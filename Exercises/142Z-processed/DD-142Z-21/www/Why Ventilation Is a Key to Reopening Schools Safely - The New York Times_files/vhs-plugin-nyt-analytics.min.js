(window.webpackJsonpVHS=window.webpackJsonpVHS||[]).push([[5],{502:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=c(a(9)),s=c(a(8)),o=c(a(89)),u=c(a(169)),l=c(a(5)),d=c(a(634));function c(e){return e&&e.__esModule?e:{default:e}}var h=new l.default("vhs:plugin:nyt-analytics"),p=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];Promise.resolve().then((function(){return h.log.apply(h,t)}))},y=window.dataLayer||[],f=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.player=a,this.dimensions=new d.default(t,a),this.unsubscribes=[],this.firstPlay=!0,this.startUpTimeSent=!1,this.loadedTimestamp=null}return n(e,[{key:"init",value:function(){this.dimensions.init(),this.setOncePerMediaTrackers(),this.subscribe(),this.trackPlayerLoad(),this.trackMediaLoad(),this.trackInview(),this.trackPause(),this.trackResume(),this.trackSeek(),this.trackMediaComplete(),this.trackMute(),this.trackUnmute(),this.trackHdOn(),this.trackHdOff(),this.trackEnterFullscreen(),this.trackExitFullscreen(),this.trackAdPause(),this.trackAdResume(),this.trackAdStart(),this.trackAdSkip(),this.trackAdComplete(),this.trackPlayerError(),this.trackRebuffering(),this.trackMediaError(),this.trackEndSlateInview(),this.trackEndSlateLoaded(),this.trackCaptionOn(),this.trackCaptionOff(),this.trackTwitter(),this.trackEmbed(),this.trackFacebook()}},{key:"subscribe",value:function(){var e=this;this.store.whenever("player",(function(){return!0}),(function(t,a){t.media&&a.media&&t.media.id===a.media.id&&a.isMediaEnded&&t.isMediaPlaying&&e.resetOncePerMediaTrackers()})),this.store.whenever("player.isMediaLoaded",!0,(function(){e.resetOncePerMediaTrackers()}))}},{key:"setOncePerMediaTrackers",value:function(){this.unsubscribes.push(this.track25PercentConsumed()),this.unsubscribes.push(this.track50PercentConsumed()),this.unsubscribes.push(this.track75PercentConsumed()),this.unsubscribes.push(this.track90PercentConsumed()),this.unsubscribes.push(this.track3SecondsConsumed()),this.unsubscribes.push(this.track30SecondsConsumed()),this.unsubscribes.push(this.trackPlay())}},{key:"resetOncePerMediaTrackers",value:function(){this.unsubscribes.forEach((function(e){return e()})),this.unsubscribes=[],this.setOncePerMediaTrackers()}},{key:"trackPlayerLoad",value:function(){var e=this,t="player-load",a=this.store.getState();if(this.loadedTimestamp=new Date,a.player.isElementReady)p(t,{dimensions:this.dimensions.getDefaultBatch()}),this.pushToDataLayer(t);else var i=this.store.whenever("player.isElementReady",!0,(function(){i(),p(t,{dimensions:e.dimensions.getDefaultBatch()})}))}},{key:"trackMediaLoad",value:function(){var e=this;this.store.whenever("player.isMediaLoaded",!0,(function(){p("media-load",{dimensions:e.dimensions.getCompleteBatch()}),e.pushToDataLayer("media-load")}))}},{key:"trackInview",value:function(){var e=this;this.store.getState().plugins.viewportIntersectionObserver.isInsideViewport&&(p("inview",{dimensions:this.dimensions.getDefaultBatch()}),this.pushToDataLayer("inview")),this.store.whenever("plugins.viewportIntersectionObserver.isInsideViewport",!0,(function(){p("inview",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("inview")}))}},{key:"trackTwitter",value:function(){var e=this,t="share-tools-twitter";this.store.whenever("plugins.shareTools.sharedTwitter",!0,(function(){p(t,{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer(t)}))}},{key:"trackFacebook",value:function(){var e=this,t="share-tools-facebook";this.store.whenever("plugins.shareTools.sharedFacebook",!0,(function(){p(t,{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer(t)}))}},{key:"trackEmbed",value:function(){var e=this,t="share-tools-embed";this.store.whenever("plugins.shareTools.sharedEmbed",!0,(function(){p(t,{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer(t)}))}},{key:"trackPlay",value:function(){var e=this,t=this.store.whenever("player.isMediaPlaying",!0,(function(){if(!e.store.getState().player.isAdActive){var a=e.store.getState(),i=a.player.options.autoplay,n=i?"auto-play-start":"user-play";a.player.options.loop?n=i?"auto-play-loop":"user-play-loop":e.firstPlay||(n=i?"auto-play-next":"user-play-next"),!e.startUpTimeSent&&"audio"!==e.dimensions.getType()&&e.firstPlay&&e.videoStartUpTime(new Date),e.firstPlay=!1,t(),p(n,{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer(n)}}));return t}},{key:"trackPause",value:function(){var e;e=this,this.store.getState().player.isAdActive||("pause",this.store.whenever("player.isMediaPlaying",!1,(function(){e.store.getState().plugins.controls.isMouseDown||(p("pause",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("pause"))})))}},{key:"trackResume",value:function(){var e=this;this.store.whenever("player.isMediaPlaying",!0,(function(){var t=e.store.getState();t.player.isSeeking||(0,r.default)(t,"player.media.progress")>0&&(p("resume",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("resume"))}))}},{key:"trackSeek",value:function(){var e=this;this.store.whenever("player.isSeeking",!0,(function(){p("seek",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("seek")}))}},{key:"trackMediaComplete",value:function(){var e=this;this.store.whenever("player.isMediaEnded",!0,(function(){p("media-complete",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("media-complete")}))}},{key:"trackMute",value:function(){var e=this;this.store.whenever("player.isMediaMuted",!0,(function(){p("muted",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("muted")}))}},{key:"trackUnmute",value:function(){var e=this;this.store.whenever("player.isMediaMuted",!1,(function(){p("unmuted",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("unmuted")}))}},{key:"trackHdOn",value:function(){var e=this;this.store.whenever("player.isMediaHD",!0,(function(){p("hd-on",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("hd-on")}))}},{key:"trackHdOff",value:function(){var e=this;this.store.whenever("player.isMediaHD",!1,(function(){p("hd-off",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("hd-off")}))}},{key:"track25PercentConsumed",value:function(){var e=this,t="percent-25-consumed",a=this.store.whenever("player.media.progress",(function(e){return e>0}),(function(){var i=e.store.getState();i.player.media.progress/i.player.media.duration>=.25&&(a(),p(t,{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer(t))}));return a}},{key:"track50PercentConsumed",value:function(){var e=this,t="percent-50-consumed",a=this.store.whenever("player.media.progress",(function(e){return e>0}),(function(){var i=e.store.getState();i.player.media.progress/i.player.media.duration>=.5&&(a(),p(t,{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer(t))}));return a}},{key:"track75PercentConsumed",value:function(){var e=this,t="percent-75-consumed",a=this.store.whenever("player.media.progress",(function(e){return e>0}),(function(){var i=e.store.getState();i.player.media.progress/i.player.media.duration>=.75&&(a(),p(t,{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer(t))}));return a}},{key:"track90PercentConsumed",value:function(){var e=this,t="percent-90-consumed",a=this.store.whenever("player.media.progress",(function(e){return e>0}),(function(){var i=e.store.getState();i.player.media.progress/i.player.media.duration>=.9&&(a(),p(t,{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer(t))}));return a}},{key:"track3SecondsConsumed",value:function(){var e=this,t="3-seconds-consumed",a=this.store.whenever("player.media.progress",(function(e){return e>0}),(function(){e.store.getState().player.media.progress>3&&(a(),p(t,{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer(t))}));return a}},{key:"track30SecondsConsumed",value:function(){var e=this,t="30-seconds-consumed",a=this.store.whenever("player.media.progress",(function(e){return e>0}),(function(){e.store.getState().player.media.progress>30&&(a(),p(t,{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer(t))}));return a}},{key:"trackEnterFullscreen",value:function(){var e=this,t="enter-fullscreen";this.store.whenever("plugins.fullscreen.isFullscreen",!0,(function(){p(t,{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer(t)}))}},{key:"trackExitFullscreen",value:function(){var e=this;this.store.whenever("plugins.fullscreen.isFullscreen",!1,(function(){p("exit-fullscreen",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("exit-fullscreen")}))}},{key:"trackAdPause",value:function(){var e=this;this.player.on(s.default.AD_PAUSED,(function(){p("ad-pause",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("ad-pause")}))}},{key:"trackAdResume",value:function(){var e=this;this.player.on(s.default.AD_RESUMED,(function(){p("ad-resume",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("ad-resume")}))}},{key:"trackAdStart",value:function(){var e=this,t="ad-start";this.player.on(s.default.AD_STARTED,(function(){var a=e.store.getState().player.options.autoplay;t=a?"ad-auto-play-start":"ad-user-play-next",e.startUpTimeSen||e.videoStartUpTime(new Date),p(t,{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer(t)}))}},{key:"trackAdSkip",value:function(){var e=this;this.player.on(s.default.AD_SKIPPED,(function(){p("ad-skip",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("ad-skip")}))}},{key:"trackAdComplete",value:function(){var e=this;this.player.on(s.default.AD_COMPLETED,(function(){p("ad-complete",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("ad-complete")}))}},{key:"trackPlayerError",value:function(){var e=this,t="player-error";window.addEventListener("error",(function(a){-1!==((0,r.default)(a,"filename")||"").indexOf("vhs")&&(p(t,{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer(t))})),this.player.on(s.default.ERROR,(function(a){a&&a.target||(p(t,{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer(t))}))}},{key:"trackLevelChange",value:function(){var e=this;this.player.on(s.default.LEVEL_TYPE_CHANGE,(function(){p("level-change",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("level-change")}))}},{key:"trackRebuffering",value:function(){var e=this;this.store.whenever("player.isMediaBuffering",!0,(function(){p("rebuffering",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("rebuffering")}))}},{key:"trackMediaError",value:function(){var e=this;this.player.on(s.default.ERROR,(function(t){t&&t.target&&(p("media-error",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("media-error"))}))}},{key:"trackEndSlateInview",value:function(){var e=this,t="endslate-inview";function a(e){return e.plugins.viewportIntersectionObserver.isInsideViewport&&e.plugins.endSlate.isVisible}this.store.whenever("plugins.viewportIntersectionObserver.isInsideViewport",!0,(function(){a(e.store.getState())&&(p(t,{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer(t))})),this.store.whenever("plugins.endSlate.isLoaded",!0,(function(){a(e.store.getState())&&(p(t,{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer(t))}))}},{key:"trackEndSlateLoaded",value:function(){var e=this;this.store.whenever("plugins.endSlate.isLoaded",!0,(function(){p("endslate-load",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("endslate-load")}))}},{key:"trackCaptionOn",value:function(){var e=this;this.store.whenever("plugins.captions.areCaptionsEnabled",!0,(function(){p("caption-on",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("caption-on")}))}},{key:"trackCaptionOff",value:function(){var e=this;this.store.whenever("plugins.captions.areCaptionsEnabled",!1,(function(){e.store.getState().plugins.captions.areCaptionsAvailable&&(p("caption-off",{dimensions:e.dimensions.getDefaultBatch()}),e.pushToDataLayer("caption-off"))}))}},{key:"videoStartUpTime",value:function(e){var t="video-time-to-start",a=this.player?this.player.props.playerStartTimestamp:null;this.startUpTimeSent=!0,e&&this.loadedTimestamp&&a&&(p(t,{dimensions:i({},this.dimensions.getDefaultBatch(),{videoTimeToStartFromLoaded:e.getTime()-this.loadedTimestamp.getTime(),videoTimeToStartFromInit:e.getTime()-a.getTime()})}),this.pushToDataLayer(t,{videoTimeToStartFromLoaded:e.getTime()-this.loadedTimestamp.getTime(),videoTimeToStartFromInit:e.getTime()-a.getTime()}))}},{key:"pushToDataLayer",value:function(e,t){var a=this.getTrackingData(e,this.dimensions.getTrackingConfig(),t);y.push({event:"mediaEvent",media:a})}},{key:"getTrackingData",value:function(e,t,a){var n=this.store.getState(),s={module:t.module||"video-player",version:this.dimensions.getPlayerType()||"unknown",contentCollection:(0,r.default)(n,"player.media.section"),region:t.region||"",action:t.action||"",contentId:(0,r.default)(n,"player.media.id"),eventName:e,eventTimestamp:(new Date).getTime(),referrer:(0,u.default)()||"",mData:i({videoName:(0,r.default)(n,"player.media.headline"),videoType:t.videoType||this.dimensions.getType()},t.mData,a)};return e===this.dimensions.getCompleteEvent()?s.state="completed":this.player.isPaused()?s.state="paused":s.state="playing","video-player"===s.module?s=this.addVideoData(s):"audio-player"===s.module&&(s.mData=i({},s.mData,this.audioMData())),s}},{key:"addVideoData",value:function(e){var t=this.store.getState();return e.mData.device=(0,o.default)(),e.mData.playerType=this.dimensions.getPlayerType()||"",e.mData.playerUsage=t.player.options.usage||"",e.mData.playerVersion="v3.48.2",e.mData.tech="html5",e.mData.transcriptAvailable=(0,r.default)(t,"plugins.transcript.isTranscriptAvailable"),e.mData.hd_available=!(!(0,r.default)(t,"player.media.hdSrc")&&!(0,r.default)(t,"player.media.hlsHdSrc")),e.mData.videoDeliveryMethod=(0,r.default)(t,"player.media.isLive")?"live":"vod",e.mData.videoDuration=Math.round((0,r.default)(t,"player.media.duration")),e.mData.videoFranchise=(0,r.default)(t,"player.media.series"),e.mData.videoPrimaryPlaylistId=(0,r.default)(t,"player.media.playlist.id"),e.mData.videoPrimaryPlaylistName=(0,r.default)(t,"player.media.playlist.headline"),e.mData.videoSection=(0,r.default)(t,"player.media.section"),e.mData.videoSubSection="",e.mData.videoTimeOfEvent=this.player.getCurrentTime(),e.mData.aspectRatio=(0,r.default)(t,"player.media.ratio"),t.plugins.captions&&(e.mData.captionsAvailable=t.plugins.captions.areCaptionsAvailable,e.mData.captionsEnabled=t.plugins.captions.areCaptionsEnabled),e.mData.muteEnabled=t.player.isMediaMuted,e.mData.adEnabled=(0,r.default)(this.store.getState(),"player.media.ads"),"ad"===e.mData.videoType&&(e.mData.adPosition="preroll",e.mData.adDuration=Math.round(t.player.adData.duration),e.mData.adType=(0,r.default)(this.store.getState(),"player.options.ads"),e.mData.adId=(0,r.default)(this.store.getState(),"player.adData.id"),e.mData.adDuration=(0,r.default)(this.store.getState(),"player.adData.duration")),"video"===e.mData.videoType&&(0,r.default)(t,"player.media.playlist.isSponsored")&&!(0,r.default)(t,"player.media.playlist.isPaidPost")&&(e.mData.adPosition="flexframe"),e}},{key:"audioMData",value:function(){var e=this.store.getState();return{device:(0,o.default)(),playerType:this.dimensions.getPlayerType()||"",playerUsage:e.player.options.usage||"",playerVersion:"v3.48.2",tech:"html5",deliveryMethod:(0,r.default)(e,"player.media.isLive")?"live":"aod",duration:Math.round((0,r.default)(e,"player.media.duration")),series:(0,r.default)(e,"player.media.series"),section:(0,r.default)(e,"player.media.section"),subSection:"",timeOfEvent:this.player.getCurrentTime()}}}]),e}();t.default=f},634:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=d(a(12)),s=d(a(171)),o=d(a(9)),u=d(a(62)),l=d(a(635));function d(e){return e&&e.__esModule?e:{default:e}}var c=new(d(a(5)).default)("vhs:plugin:nyt-tracking"),h=new l.default,p=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.player=a,this.state={mediaSessionId:(0,s.default)(),startTimestamp:Date.now(),readyTimestamp:null,timeToPlayStart:null,timeToPlayEnd:null,playerLoadTime:null,isFirstPlay:!0,wasLastMediaEnded:!1}}return n(e,[{key:"init",value:function(){this.subscribe()}},{key:"subscribe",value:function(){var e=this;this.store.whenever("player.media.id",(function(){return!0}),(function(t,a){void 0!==a&&(e.state.mediaSessionId=(0,s.default)(),e.state.isFirstPlay=!1,e.state.wasLastMediaEnded=!1)})),this.store.whenever("player.shouldPlay",!0,(function(){e.state.timeToPlayStart=Date.now()})),this.store.whenever("player.isAdActive",!0,(function(){e.state.timeToPlayStart=null,e.state.timeToPlayEnd=null})),this.store.whenever("player.isAdActive",!1,(function(){e.state.timeToPlayStart=Date.now()})),this.store.whenever("player.isMediaPlaying",!0,(function(){e.store.getState().player.isAdActive||(e.state.timeToPlayEnd=Date.now())})),this.store.whenever("player",(function(){return!0}),(function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.media&&a.media&&t.media.id===a.media.id&&a.isMediaEnded&&t.isMediaPlaying&&(e.state.mediaSessionId=(0,s.default)())}));var t=this.store.whenever("player.isReady",!0,(function(){e.state.readyTimestamp=Date.now(),t()}))}},{key:"getDefaultBatch",value:function(){var e={ad_duration:this.getAdDuration(),ad_load_time:this.getAdLoadTime(),ad_id:this.getAdId(),ad_creative_id:this.getAdCreativeId(),ad_position:this.getAdPosition(),ad_enabled:this.getAdEnabled(),ad_type:this.getAdType(),captions_available:this.getCaptionsAvailable(),captions_enabled:this.getCaptionsEnabled(),transcript_available:this.getTranscriptAvailable(),hd_available:this.getHDAvailable(),client_id:this.getClientId(),delivery_method:this.getDeliveryMethod(),error_code:this.getErrorCode(),error_message:this.getErrorMessage(),is_inview:this.getIsInview(),level:this.getLevel(),mute_enabled:this.getMuteEnabled(),other_data:this.getOtherData(),play_id:this.getPlayId(),seek_time:this.getSeekTime(),time_of_event:Date.now(),viewing_mode:this.getViewingMode(),voiceover_running:this.getVoiceoverRunning()};return Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]})),e}},{key:"getCompleteBatch",value:function(){var e=i({},this.getDefaultBatch(),{aspect_ratio:this.getAspectRatio(),autoplay:this.getAutoplay(),creation_type:this.getCreationType(),duration:this.getDuration(),headline:this.getHeadline(),media_id:this.getMediaId(),media_type:this.getMediaType(),play_intent:this.getPlayIntent(),player_load_time:this.getPlayerLoadTime(),player_time_to_download:this.getPlayerTimeToDownload(),player_loc:this.getPlayerLoc(),player_size:this.getPlayerSize(),player_time_to_play:this.getPlayerTimeToPlay(),primary_playlist_headline:this.getPrimaryPlaylistHeadline(),primary_playlist_id:this.getPrimaryPlaylistId(),section:this.getSection(),series:this.getSeries(),test_variant:this.getTestVariant(),type:this.getType(),uri:this.getUri(),vhs_version:this.getVhsVersion()});return Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]})),e}},{key:"getDuration",value:function(){return(0,o.default)(this.store.getState(),"player.media.duration")}},{key:"getType",value:function(){try{var t=this.store.getState().player.options.mediaType===u.default.AUDIO,a=this.store.getState().player.media.is360,i=this.store.getState().player.media.playlist.isPaidPost,n=this.store.getState().player.isAdActive;return i&&e.type.PAID_POST||n&&e.type.AD||a&&e.type["360video"]||t&&e.type.AUDIO||e.type.VIDEO}catch(e){return}}},{key:"getPlayerType",value:function(){var e=r.default.query('meta[name="PT"]'),t=r.default.query('meta[name="PST"]'),a=r.default.query('meta[name="slug"]'),i=(0,o.default)(e,"content")||"",n=(0,o.default)(t,"content")||"",s=(0,o.default)(a,"content")||"",u=i&&n?i.toLowerCase()+"-"+n.toLowerCase():null,l=null;return this.store.getState().player.options.type?l=this.store.getState().player.options.type:"multimedia-interactive"===u&&s?l=u+"|"+s:u?l=u:c.error("Player TYPE should be provided"),l}},{key:"getAdDuration",value:function(){return(0,o.default)(this.store.getState(),"player.adData.duration")}},{key:"getCreationType",value:function(){if("vanilla_js"===(0,o.default)(this.store.getState(),"player.options.usage"))return e.creationType.JS}},{key:"getMediaId",value:function(){return(0,o.default)(this.store.getState(),"player.media.id")}},{key:"getHeadline",value:function(){return(0,o.default)(this.store.getState(),"player.media.headline")}},{key:"getPrimaryPlaylistId",value:function(){return(0,o.default)(this.store.getState(),"player.media.playlist.id")}},{key:"getPrimaryPlaylistHeadline",value:function(){return(0,o.default)(this.store.getState(),"player.media.playlist.headline")}},{key:"getDeliveryMethod",value:function(){return(0,o.default)(this.store.getState(),"player.media.playbackType")}},{key:"getVhsVersion",value:function(){return"v3.48.2"}},{key:"getPlayIntent",value:function(){var t=(0,o.default)(this.store.getState(),"player.options.autoplay");return this.state.isFirstPlay?t?e.playIntent.AUTO:e.playIntent.USER:this.state.wasLastMediaEnded?t?e.playIntent.NEXT_AUTO:e.playIntent.NEXT_USER:e.playIntent.UNKNOW}},{key:"getMediaType",value:function(){return(0,o.default)(this.store.getState(),"player.options.mediaType")}},{key:"getAutoplay",value:function(){return(0,o.default)(this.store.getState(),"player.options.autoplay")}},{key:"getPlayerLoadTime",value:function(){if(this.state.readyTimestamp)return this.state.readyTimestamp-this.state.startTimestamp}},{key:"getPlayerTimeToDownload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.performance;if(this.state.playerLoadTime)return this.state.playerLoadTime;try{var t=e.getEntries().filter((function(e){return/(vhs\.js|vhs\.min\.js)/.test(e.name)}))[0];return this.state.playerLoadTime=t.duration,this.state.playerLoadTime}catch(e){return}}},{key:"getPlayerSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.performance;if(this.state.playerSize)return this.state.playerSize;try{var t=e.getEntries().filter((function(e){return/(vhs\.js|vhs\.min\.js)/.test(e.name)}))[0];return this.state.playerSize=t.transferSize,this.state.playerSize}catch(e){return}}},{key:"getMuteEnabled",value:function(){return(0,o.default)(this.store.getState(),"player.isMediaMuted")}},{key:"getCaptionsEnabled",value:function(){return(0,o.default)(this.store.getState(),"plugins.captions.areCaptionsEnabled")}},{key:"getClientId",value:function(){var e=h.getItem("clientId");return e||(e=(0,s.default)(),h.setItem("clientId",e)),e}},{key:"getCaptionsAvailable",value:function(){return(0,o.default)(this.store.getState(),"plugins.captions.areCaptionsAvailable")}},{key:"getPlayId",value:function(){return this.state.mediaSessionId}},{key:"getUri",value:function(){return(0,o.default)(this.store.getState(),"player.media.url")}},{key:"getErrorCode",value:function(){return(0,o.default)(this.player,"playback.video.error.code")}},{key:"getErrorMessage",value:function(){return(0,o.default)(this.player,"playback.video.error.message")}},{key:"getIsInview",value:function(){return(0,o.default)(this.store.getState(),"plugins.viewportIntersectionObserver.isInsideViewport")}},{key:"getPlayerTimeToPlay",value:function(){var e=this.state.timeToPlayEnd-this.state.timeToPlayStart;return isNaN(e)?void 0:e}},{key:"getAspectRatio",value:function(){return(0,o.default)(this.store.getState(),"player.media.ratio")}},{key:"getLevel",value:function(){return(0,o.default)(this.store.getState(),"player.media.hlsLevel")}},{key:"getSeries",value:function(){return(0,o.default)(this.store.getState(),"player.media.series")}},{key:"getSection",value:function(){return(0,o.default)(this.store.getState(),"player.media.section")}},{key:"getTestVariant",value:function(){return 0}},{key:"getPlayerLoc",value:function(){return(0,o.default)(this.store.getState(),"player.options.type")}},{key:"getVoiceoverRunning",value:function(){}},{key:"getViewingMode",value:function(){return"standard"}},{key:"getOtherData",value:function(){}},{key:"getAdLoadTime",value:function(){var e=this.store.getState(),t=(0,o.default)(e,"player.adData.loadStartTimestamp"),a=(0,o.default)(e,"player.adData.loadEndTimestamp")-t;return isNaN(a)?void 0:a}},{key:"getSeekTime",value:function(){return(0,o.default)(this.store.getState(),"player.seekTo")}},{key:"getAdId",value:function(){return(0,o.default)(this.store.getState(),"player.adData.id")}},{key:"getAdCreativeId",value:function(){return(0,o.default)(this.store.getState(),"player.adData.creativeId")}},{key:"getAdPosition",value:function(){var e=(0,o.default)(this.store.getState(),"player.adData.position");return 0===e?"preroll":-1===e?"postroll":e>0?"midroll":void 0}},{key:"getAdEnabled",value:function(){return(0,o.default)(this.store.getState(),"player.media.ads")}},{key:"getAdType",value:function(){return(0,o.default)(this.store.getState(),"player.options.ads")}},{key:"getTranscriptAvailable",value:function(){return(0,o.default)(this.store.getState(),"plugins.transcript.isTranscriptAvailable")}},{key:"getHDAvailable",value:function(){return(0,o.default)(this.store.getState(),"player.media.hdSrc")||(0,o.default)(this.store.getState(),"player.media.hlsHdSrc")}},{key:"getCompleteEvent",value:function(){return this.getType()===e.type.AUDIO?"audio-complete":"video-complete"}},{key:"getTrackingConfig",value:function(){var t=void 0;switch(this.getType()){case e.type.AD:t=i({},e.adConfig);break;case e.type.PAID_POST:t=i({},e.paidPostConfig);break;case e.type["360video"]:t=i({},e.video360Config);break;case e.type.AUDIO:t=i({},e.audioConfig);break;case e.type.VIDEO:default:t=i({},e.videoConfig)}return t}}]),e}();p.creationType={JS:"js",HTML:"html"},p.type={VIDEO:"video",AD:"ad",PAID_POST:"paidPost","360video":"360video",AUDIO:"audio"},p.playIntent={USER:"user",AUTO:"auto",NEXT_USER:"next_user",NEXT_AUTO:"next_auto",UNKNOW:"unknow"},p.videoConfig={videoType:p.type.VIDEO,module:"video-player",mData:{}},p.video360Config={videoType:p.type["360video"],module:"video-player",mData:{}},p.adConfig={videoType:p.type.AD,module:"video-player",mData:{}},p.paidPostConfig={videoType:p.type.PAID_POST,module:"video-player",mData:{}},p.audioConfig={videoType:p.type.AUDIO,module:"audio-player",mData:{}},t.default=p},635:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=a(5);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=new((i=r)&&i.__esModule?i:{default:i}).default("vhs:util:session-storage"),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"nytvhs";s(this,e),this.prefix=t}return n(e,[{key:"getItem",value:function(e){try{var t=sessionStorage.getItem(this.prefix+"."+e);return JSON.parse(t)}catch(e){o.error(e)}return null}},{key:"setItem",value:function(e,t){try{sessionStorage.setItem(this.prefix+"."+e,JSON.stringify(t))}catch(e){o.error(e)}}},{key:"removeItem",value:function(e){try{sessionStorage.removeItem(this.prefix+"."+e)}catch(e){o.error(e)}}},{key:"clear",value:function(){var e=this;try{Object.keys(sessionStorage).filter((function(t){return 0===t.indexOf(e.prefix)})).forEach((function(e){return sessionStorage.removeItem(e)}))}catch(e){o.error(e)}}}]),e}();t.default=u}}]);
//# sourceMappingURL=vhs-plugin-nyt-analytics.min.js.map