# Convexity and curvature

Looking locally at the graph of a function our eyes immediately register the slope. A glance shows whether the slope is positive or negative. Comparing the slopes at two locales is also an automatic visual task: most people have little difficulty saying which slope is steeper. One consequence of this is our ability to perform a task visually: `r mark(2230)`

- ***Tangent line***: We can recognize whether a line that touches the graph at a point is tangent to the graph.

-----

```{exercise, name="Positive or negative"}
```
<details>
```{r echo=FALSE}
graph_with_boxes(mosaic::rfun(~x, seed=920),
                 interval = tibble(x=c(-3, -1.6, 0, 1, 3),
                                   xend=c(-2.6, -1.3, .5, 1.4, 3.4)),
                 domain = c(-5, 5))
```
```{r pos-or-neg-slope, echo=FALSE, results="markup"}
askMC(
  "Glance at the graph. In which boxes the slope is negative?", 
  "A, B, C",
  "B, C, D",
  "+A, C, D+"
)
```
</details>

```{exercise, name="relative-slope"}
```
<details>
```{r echo=FALSE}
graph_with_boxes(mosaic::rfun(~x, seed=910), 
                 interval = tibble(x=c(-1.6, 0, 1),
                                   xend=c(-1.3, .5, 1.4)),
                 domain = c(-2, 2))

```
```{r relative-slope, echo=FALSE, results="markup"}
askMC(
  "Consider the slope of the function in the domains marked by the boxes. What is the order of boxes from least steep to steepest?",
  "A, B, C",
  "C, A, B",
  "+A, C, B+",
  "none of these",
  random_answer_order=FALSE
)
```
</details>

```{exercise, name="tangents-to-curves"}
```

<details>
```{r echo=FALSE}
graph_with_tangents(mosaic::rfun(~x, seed=913), 
                 touches =c(-1.6, 0, 2.2),
                 offsets = rep(1, 3),
                 domain = c(-3, 3))

```

```{r tangents-A, echo=FALSE, results="markup"}
askMC("Which of the line segments is tangent to the curve at the point marked with a dot?", 
      "A", "B", "C", "+all of them+", "none of them",
      random_answer_order=FALSE
      )
```



```{r echo=FALSE}
graph_with_tangents(mosaic::rfun(~x, seed=914), 
                 touches =c(-1.6, 0, 2.2),
                 offsets = c(1, 0.8, 1.2),
                 domain = c(-3, 3))

```

```{r tangents-B, echo=FALSE, results="markup"}
askMC("Which of the line segments is tangent to the curve at the point marked with a dot?", 
      "+A+", "B" = "too shallow", "C"="too steep", "all of them", "none of them",
      random_answer_order=FALSE
      )
```

</details>

-----


Finding a numerical value for the slope is not an automatic process. We need to do some arithmetic, computing rise over run. Or, in the language of calculus, we can calculate the slope by evaluating the derivative function. `r mark(2235)`

Other aspects of functions are also readily discerned from a glance at the function graph.

- ***Concavity***: We can tell within each locale whether the function is concave down, concave up, or not concave.
- ***Curvature***: Generalizing the tangent line capability a bit, we can do a pretty good job of eyeballing the tangent circle recognizing whether a circle has much too large or much too small a radius.. 
- ***Smoothness***: We can distinguish smooth functions from non-smooth ones. Or, as you will see, there are some kinds of smoothness that we can discern and others that are not apparent to the eye. 

This chapter is about how to ***quantify*** these properties. It turns out that this is naturally done by calculating derivatives. (In the case of smoothness, continuity of the derivative function. So do continuity before smoothness.) `r mark(2240)`

The following exercises are simply meant to test your visual acuity in spotting concavity, tangency, and smoothness. 


-----

<details>

```{exercise, name="concave-A"}
```{r echo=FALSE}
graph_with_boxes(mosaic::rfun(~x, seed=920),
                 interval = tibble(x=c(-2.7, -1.6, 0, 1, 3),
                                   xend=c(-2.3, -1.3, .5, 1.4, 3.4)),
                 domain = c(-5, 5))
```
```{r concavity-A, echo=FALSE, results="markup"}
askMC(
  "In which of the boxes is the function concave up?",
  "+A and E+",
  "B and D",
  "C and D"
)
```

</details>

-----

<details>

```{r echo=FALSE}
set.seed(2)
Pts <- tibble(x=runif(6, 0, 5), y=(rnorm(length(x))))
f <- mosaic::spliner(y ~ x, data = Pts)
ddf <- D(f(x) ~ x + x)
set.seed(723)
Pts <- tibble(x=0:5, y=sort(rnorm(length(x))))
f2 <- splinefun(Pts$x, Pts$y, method="monoH.FC")
df2 <- D(f2(x) ~ x)
```

```{r echo=FALSE}
graph_with_boxes(df2,
                 interval = tibble(x=c(.25, .8, 1.5),
                                   xend=c(.75, 1.3, 2.0)),
                 domain = c(0, 2))
```

```{r smoothA, echo=FALSE, results="markup"}
askMC("In which boxes is the function smooth?",
      "A and B",
      "B and C",
      "+A and C+",
      "none of them",
      "all of them",
      random_answer_order=FALSE)
```

</details>

-----

<details>
```{r echo=FALSE}
graph_with_boxes(f,
                 interval = tibble(x=c( 2.75, 3.4, 4.25),
                                   xend=c( 3.25, 3.9, 4.75)),
                 domain = c(2, 4.8))
```
```{r smoothB, echo=FALSE, results="markup"}
askMC("In which boxes is the function smooth?",
      "A and B",
      "B and C",
      "A and C",
      "none of them",
      "+all of them+",
      random_answer_order=FALSE)
```

</details>

-----

<details>

```{r echo=FALSE}
graph_with_boxes(ddf,
                 interval = tibble(x=c( .75, 1.75 ),
                                   xend=c( 1.25, 2.25)),
                 domain = c(0,2.7))
```
```{r smoothC, echo=FALSE, results="markup"}
askMC("In which boxes is the function smooth?",
      "+A+",
      "B",
      "neither of them",
      "both of them",
      random_answer_order=FALSE)
```
</details>


-----


## Concavity

Change in the slope


## Curvature

Orthogonal to tangent

Tangent circle to function.

Graphics frame.

We're also pretty good at eyeballing the ***radius of curvature***.  This can be calculated from the first and second derivatives. The radius of curvature operator is $${\cal K} f(x) \equiv \frac{\left|\partial_{xx} f(x)\right|}{\left|1 + \left(\strut\partial_x f(x)\right)^2\right|^{3/2}}$$ `r mark(2245)`

```{exercise, name="curvature-dimension"}
Show that the dimension of the curvature only makes sense if the $[x]$ and $[f(x)]$ are the same.
```
