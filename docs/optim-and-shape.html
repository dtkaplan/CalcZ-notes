<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 22 Optimization | CalcZ Student Notes</title>
<meta name="author" content="Daniel Kaplan">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.8/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><script src="libs/plotly-binding-4.9.4/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.18/datatables.js"></script><link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script><script type="text/x-mathjax-config">
    const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
    for (let popover of popovers){
      const div = document.createElement('div');
      div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
      div.innerHTML = popover.getAttribute('data-content');
      
      // Will this work with TeX on its own line?
      var has_math = div.querySelector("span.math");
      if (has_math) {
        document.body.appendChild(div);
      	MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
      	MathJax.Hub.Queue(function(){
          popover.setAttribute('data-content', div.innerHTML);
      	})
      }
    }
    </script>
</head>
<body>
<span class="math inline">
    \(\newcommand{\line}{\text{line}}
    \newcommand{\hump}{\text{hump}}
    \newcommand{\sigmoid}{\text{sigmoid}}
    \newcommand{\recip}{\text{recip}}
    \newcommand{\diff}[1]{{\cal D}_#1}
    \newcommand{\pnorm}{\text{pnorm}}
    \newcommand{\dnorm}{\text{dnorm}}\)
    </span>

    <!-- see https://www.homepages.ucl.ac.uk/~ucahmto/elearning/2019/09/14/bookdown.html-->
    <script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="css/CalcZ-style.css">
<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">CalcZ Student Notes</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome to calculus</a></li>
<li class="book-part">Block 1: Functions and quantity</li>
<li><a class="" href="outline-of-block-1.html">Outline of Block 1</a></li>
<li><a class="" href="change.html"><span class="header-section-number">1</span> Change</a></li>
<li><a class="" href="structure-of-a-function.html"><span class="header-section-number">2</span> Structure of a function</a></li>
<li><a class="" href="naked-intro.html"><span class="header-section-number">3</span> Naked modeling functions</a></li>
<li><a class="" href="fun-describing.html"><span class="header-section-number">4</span> Describing functions</a></li>
<li><a class="" href="fun-notation.html"><span class="header-section-number">5</span> Notation for functions</a></li>
<li><a class="" href="graphs-and-graphics.html"><span class="header-section-number">6</span> Graphics &amp; function graphs</a></li>
<li><a class="" href="params-intro.html"><span class="header-section-number">7</span> Parameters for functions</a></li>
<li><a class="" href="process-of-modeling.html"><span class="header-section-number">8</span> Process of modeling</a></li>
<li><a class="" href="fun-slopes.html"><span class="header-section-number">9</span> Slope function</a></li>
<li><a class="" href="function-inverses-and-solving.html"><span class="header-section-number">10</span> Function inverses and “solving”</a></li>
<li><a class="" href="fun-assembling.html"><span class="header-section-number">11</span> Assembling functions</a></li>
<li><a class="" href="fun-multiple-inputs.html"><span class="header-section-number">12</span> Functions with multiple inputs</a></li>
<li><a class="" href="fun-piecewise.html"><span class="header-section-number">13</span> Piecewise functions</a></li>
<li><a class="" href="magnitudes.html"><span class="header-section-number">14</span> Magnitudes</a></li>
<li><a class="" href="dimensions.html"><span class="header-section-number">15</span> Dimensions</a></li>
<li class="book-part">Block 2: Differentiation</li>
<li><a class="" href="outline-of-block-2.html">Outline of Block 2</a></li>
<li><a class="" href="change-relationships.html"><span class="header-section-number">16</span> Change relationships</a></li>
<li><a class="" href="computing-derivs.html"><span class="header-section-number">17</span> Computing derivatives</a></li>
<li><a class="" href="convexity-and-curvature.html"><span class="header-section-number">18</span> Convexity and curvature</a></li>
<li><a class="" href="cont-and-smooth.html"><span class="header-section-number">19</span> Continuity and smoothness</a></li>
<li><a class="" href="evanescent-h.html"><span class="header-section-number">20</span> Evanescent h</a></li>
<li><a class="" href="prod-comp-rules.html"><span class="header-section-number">21</span> Differentiation of assembled functions</a></li>
<li><a class="active" href="optim-and-shape.html"><span class="header-section-number">22</span> Optimization</a></li>
<li><a class="" href="partial-change.html"><span class="header-section-number">23</span> Partial change</a></li>
<li><a class="" href="local-approximations.html"><span class="header-section-number">24</span> Local approximations</a></li>
<li><a class="" href="approximation-near-a-reference-input.html"><span class="header-section-number">25</span> Approximation near a reference input</a></li>
<li class="book-part">Block 3: Accumulation</li>
<li><a class="" href="outline-of-block-3.html">Outline of Block 3</a></li>
<li><a class="" href="change-accumulation.html"><span class="header-section-number">26</span> Change and accumulation</a></li>
<li><a class="" href="iteration-and-accumulation.html"><span class="header-section-number">27</span> Iteration and accumulation</a></li>
<li><a class="" href="net-change.html"><span class="header-section-number">28</span> Accumulation as net change</a></li>
<li><a class="" href="accum-advanced-algebra.html"><span class="header-section-number">29</span> Advanced algebraic methods</a></li>
<li><a class="" href="antidiff-review.html"><span class="header-section-number">30</span> Review of anti-differentiation methods</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/dtkaplan/CalcZ-notes">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="optim-and-shape" class="section level1" number="22">
<h1>
<span class="header-section-number">22</span> Optimization<a class="anchor" aria-label="anchor" href="#optim-and-shape"><i class="fas fa-link"></i></a>
</h1>
<p>To “optimize” means to make something as good as possible with the available resources. Optimization problems are common in science, logistics, industry, and any other area where one seeks the best solution to a problem. Some everyday examples:</p>
<ul>
<li>How much salt to add to a stew. Stews can be too salty, or they can be not salty enough. Somewhere in the middle is the optimum.</li>
<li>When to harvest trees being grown for lumber. Harvest too soon and you might be losing out on the prime growing years. Wait too long and trees will have settled in to slow growth, if any.</li>
<li>Walking up too steep a slope is tiring and slows you down; that’s why hiking trails have switchbacks. When the switchbacks are too shallow, it takes a long time to cover the distance. What’s the most efficient angle to enable hikers to get up the hill in the shortest time.</li>
</ul>
<div id="structure-of-the-problem" class="section level2" number="22.1">
<h2>
<span class="header-section-number">22.1</span> Structure of the problem<a class="anchor" aria-label="anchor" href="#structure-of-the-problem"><i class="fas fa-link"></i></a>
</h2>
<p>In an optimization problem, there is one or more input quantity whose value you have to choose. The amount of salt; the years to wait from planting to harvesting a tree; the angle of the trail with respect to the slope. We’ll call this the <strong><em>decision quantity</em></strong>.</p>
<p>Similarly, there is one or more output quantity that you value and want to make as good as possible. The taste of the stew; the income produced by selling the lumber; the time it takes to walk up the hill. The output quantity is called the <strong><em>objective</em></strong>.</p>
<p>The model that relates to inputs to the objective output is called the <strong><em>objective function</em></strong>. Solving an optimization problem—once the modeling phase is complete—amounts to finding a value for the decision quantity (the input to the objective function) that produces the best level of the objective (the output from the objective function).</p>
<p>Sometimes the objective is something that you want to <strong><em>minimize</em></strong>, make as small as possible. In the hiking trail problem, we seek to minimize the amount of time it takes to walk up the trail. Sometimes you want to <strong><em>maximize</em></strong> the objective, as in the wood-harvest problem where the objective is to harvest the most wood per year.</p>
<p>Mathematically, maximization and minimization are the same thing. Every minimization problem can be turned into a maximization problem by putting a negative sign in front of the objective function. To simplify the discussion, in talking about finding the solution to an optimization problem we’ll imagine that the goal is to maximize. But keep in mind that many circumstances in the real world, “best” can mean to minimization.</p>
<p>The solution you seek in a maximization problem is called the <strong><em>argmax</em></strong>. This is a contraction of two words: the <em>argument</em> (that is, input) that produces the <em>maximum</em> output. (For minimization, the solution is the ***argmin.)</p>
<p>Once you have found the argmax you can plug that value into the objective function to find the value of the output. That value is the <strong><em>maximum</em></strong>.</p>
<div class="takenote">
<p>People often talk about “finding the maximum.” This is misleading. The setup for an optimization problem is:</p>
<ol style="list-style-type: decimal">
<li>Construct (that is, model) the objective function.</li>
<li>Now that you know the objective function, find the input to that function—that is, the <strong>argmax</strong>—that produces the maximum output.</li>
</ol>
</div>
<p>To illustrate the setup of an optimization problem, imagine yourself in the situation of a contest to see who can shoot a tennis ball the farthest into a field with a slingshot. During the contest, you will adjust the vertical angle of launch, place the ball into the slingshot’s cradle, pull back as far as possible, and let go. To win the contest, you need to optimize how you launch the ball.</p>
<p>The objective is the distance travelled by the ball. For simplicity, we’ll imagine that the velocity of the ball at release is fixed at <span class="math inline">\(v_0\)</span>. You’ll win or lose based on the angle of launch you choose.</p>
<p>Before you head out into the field to experiment, let’s do a bit of preparation. We’ll model how far the ball will travel (horizontally) as a function of the angle of launch <span class="math inline">\(\theta\)</span> and the initial velocity <span class="math inline">\(v_0\)</span>.</p>
<p>The mathematics of such problems involves an area called <strong><em>differential equations</em></strong>, an important part of calculus which we’ll come to later in the course. Since you don’t have the tools yet, we’ll just state a simple model of how long the ball stays in the air.
<span class="math display">\[\text{duration}(v_0, \theta) = 2 v_0 \sin(\theta)/g\]</span> <span class="math inline">\(g\)</span> is the acceleration due to gravity, which is about <span class="math inline">\(9.8 \text{m}\text{s}^{-2}\)</span>, assuming that the contest is being held on Earth.</p>
<p>The horizontal distance travelled by the tennis ball will be <span class="math display">\[\text{hdist}(v_0, \theta) = \cos(\theta) v_0\, \text{duration}(v_0, \theta) = 2 v_0^2 \cos(\theta)\sin(\theta) / g\]</span>
Our objective function is hdist(), and we seek to find the argmax. The input <span class="math inline">\(v_0\)</span> is (we have assumed) fixed, so the decision quantity is the angle <span class="math inline">\(\theta\)</span>.</p>
<p>The best choice of <span class="math inline">\(\theta\)</span> will make the quantity <span class="math inline">\(\cos(\theta)\sin(\theta)\)</span> as large as possible. So in finding the argmax, we don’t need to be concerned with <span class="math inline">\(v_0\)</span> or <span class="math inline">\(g\)</span>.</p>
<p>Finding the argmax can be accomplished simply by plotting the function <span class="math inline">\(\cos(\theta)\sin(\theta)\)</span>. We’ll implement the function so that the input is in units of <em>degrees</em>.</p>
<div class="sourceCode" id="cb164"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu">makeFun</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Trig.html">cos</a></span><span class="op">(</span><span class="va">pi</span><span class="op">*</span><span class="va">theta</span><span class="op">/</span><span class="fl">180</span><span class="op">)</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/Trig.html">sin</a></span><span class="op">(</span><span class="va">pi</span><span class="op">*</span><span class="va">theta</span><span class="op">/</span><span class="fl">180</span><span class="op">)</span> <span class="op">~</span> <span class="va">theta</span><span class="op">)</span>
<span class="fu">slice_plot</span><span class="op">(</span><span class="fu">f</span><span class="op">(</span><span class="va">theta</span><span class="op">)</span> <span class="op">~</span> <span class="va">theta</span>, <span class="fu">domain</span><span class="op">(</span>theta<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">90</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu">slice_plot</span><span class="op">(</span><span class="fu">f</span><span class="op">(</span><span class="va">theta</span><span class="op">)</span> <span class="op">~</span> <span class="va">theta</span>, <span class="fu">domain</span><span class="op">(</span>theta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">40</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span id="fig:ball-theta"></span>
<img src="CalcZ-notes_files/figure-html/ball-theta-1.png" alt="The distance travelled by a ball launched at an angle of $\theta$$, according to the simple model is duration of flight and distance travelled." width="90%"><img src="CalcZ-notes_files/figure-html/ball-theta-2.png" alt="The distance travelled by a ball launched at an angle of $\theta$$, according to the simple model is duration of flight and distance travelled." width="90%"><p class="caption">
Figure 22.1: The distance travelled by a ball launched at an angle of <span class="math inline">\(\theta\)</span>$, according to the simple model is duration of flight and distance travelled.
</p>
</div>
<p>From the graph, especially the zoomed-in version, you can read off the argmax as <span class="math inline">\(\theta = 45^\circ\)</span>.</p>
<p>Finding the argmax solves the problem. You may also want to present your solution by saying what the value of the output of hdist() is when the argmax is given as input. You can read off the graph that the maximum of <span class="math inline">\(\cos(\theta)\sin(\theta)\)</span> is 0.5 at <span class="math inline">\(\theta = 45^\circ\)</span>, so overall the distance will be <span class="math inline">\(v_0^2 / g\)</span></p>
<div class="todo">
<p>Review Exercise: What is the dimension of <span class="math inline">\(v_0^2 / g\)</span>?</p>
</div>
</div>
<div id="interpreting-the-argmax" class="section level2" number="22.2">
<h2>
<span class="header-section-number">22.2</span> Interpreting the argmax<a class="anchor" aria-label="anchor" href="#interpreting-the-argmax"><i class="fas fa-link"></i></a>
</h2>
<p>The graphical solution given to the slingshot problem is entirely satisfactory. Whether that solution will win the contest depends of course on whether the model we built for the objective function is correct. There are potentially important things we have left out, such as air resistence.</p>
<p>Solving the optimization problem has prepared us to go out in the field and test the result. Perhaps we’ll find that the real-world optimum angle is somewhat steeper or shallower than <span class="math inline">\(\theta = 45^\circ\)</span>.</p>
<p>Besides the argmax, another important quantity to read from the graph in Figure <a href="optim-and-shape.html#fig:ball-theta">22.1</a> is the <strong><em>precision</em></strong> of the argmax. In strict mathematical terms, the argmax is exactly 45 degrees. But in practical terms, it may not matter so much to the outcome if we are a little away from <span class="math inline">\(45^\circ\)</span>. For example, according to the model, any angle in the range <span class="math inline">\(40^\circ &lt; \theta &lt; 50^\circ\)</span> would produce an output that is within 1% of the distance reached at the argmax.</p>
<p>Contests are won or lost by margins of less than 1%, so you should not casually deviate from the argmax. On the other hand, <span class="math inline">\(45^\circ\)</span> is the argmax of the <em>model</em>. Reality may deviate from the model. For instance, suppose that air resistance or wind might might have an effect of about 1% on the distance. You can expect that such factors might change the optimal angle by as much or more than <span class="math inline">\(\pm 5^\circ\)</span>.</p>
</div>
<div id="derivatives-and-optimization" class="section level2" number="22.3">
<h2>
<span class="header-section-number">22.3</span> Derivatives and optimization<a class="anchor" aria-label="anchor" href="#derivatives-and-optimization"><i class="fas fa-link"></i></a>
</h2>
<p>We’re now going to reframe the search for the argmax and it’s interpretation in terms of derivatives of the objective function with respect to the decision quantity (<span class="math inline">\(\theta\)</span> in the slingshot problem). For a function of one variable, this will not be an improvement from the look-at-the-graph technique to find the argmax. A genuine reason to use derivatives is to set us up in the future to solve problems with more than one variable, where it is hard to draw or interpret a graph. Also, describing functions in the language of derivatives can help us think more clearly about aspects of the problem, such as the precision of the argmax.</p>
<p>With a graph such as Figure <a href="optim-and-shape.html#fig:ball-theta">22.1</a>, it’s easy to find the argmax; common sense carries the day. So it won’t be obvious at first why we are going to take the following approach:</p>
<p>Let’s denote an argmax of the objective function <span class="math inline">\(f(x)\)</span> by <span class="math inline">\(x^\star\)</span>.
Let’s look at the derivative <span class="math inline">\(\partial_x f(x)\)</span> in the neighborhood of <span class="math inline">\(x^\star\)</span>. Referring to Figure <a href="optim-and-shape.html#fig:ball-theta">22.1</a>, where <span class="math inline">\(x^\star = 45^\circ\)</span>, you may be able to see that <span class="math inline">\(\partial_x f(x^\star)\)</span> is zero; the line tangent to the function’s graph at <span class="math inline">\(x^\star\)</span> is flat.</p>
<p>Seen another way, the slope of <span class="math inline">\(f(x)\)</span> to the left of <span class="math inline">\(x^\star\)</span> is positive; moving a tiny bit to the right (that is, increasing <span class="math inline">\(x\)</span> by a very small amount, leads to an increase in the output <span class="math inline">\(f(x)\)</span>. Intuitively, as you approach the peak of a hill, you are walking uphill.) Just to the right of <span class="math inline">\(x^\star\)</span>, the slope of <span class="math inline">\(f(x)\)</span> is negative; as you reach the top of a hill and continue on, you will be going downhill. So the derivative function is positive on one side of <span class="math inline">\(x^\star\)</span> and negative on the other, suggesting that it crosses zero at the argmax.</p>
<p>Inputs <span class="math inline">\(x^\star\)</span> such that <span class="math inline">\(\partial_x f(x^\star) = 0\)</span> are called <strong><em>critical points</em></strong>. Why not call them simply argmaxes? Because a the slope will also be zero at an argmin. And it’s even possible to have the slope be zero at a point that’s neither an argmin or an argmax.</p>
<p><strong>Question tmp-31</strong>: Consider the function <span class="math inline">\(f(x) \equiv x^3\)</span>. Confirm that the value of the derivative <span class="math inline">\(\partial_x f(x = 0)\)</span> and so <span class="math inline">\(x^\star = 0\)</span> is a critical point. Which sort of critical point is <span class="math inline">\(x^\star=0\)</span>? (Hint: Draw the graph of <span class="math inline">\(f(x)\)</span> near <span class="math inline">\(x=0\)</span> to see what’s going on.)</p>
<ol>
<li><p>An argmax [But <span class="math inline">\(f(0) &lt; f(x &gt; 0)\)</span>, so <span class="math inline">\(x^\star=0\)</span> can’t be an argmax.]</p></li>
<li><p>An argmin [But <span class="math inline">\(f(x &lt; 0) &lt; f(0)\)</span>, so <span class="math inline">\(x^\star=0\)</span> can’t be an argmin.]</p></li>
<li><p>Neither (+) []</p></li>
</ol>
<p>At this point, we know that values <span class="math inline">\(x^\star\)</span> that give <span class="math inline">\(\partial_x f(x^\star) = 0\)</span> are “critical points,” but we haven’t said how to figure out whether a given critical point is an argmax, an argmin, or neither. This is where the behavior of <span class="math inline">\(\partial_x f(x)\)</span> <em>near</em> x=x^$ is important. If <span class="math inline">\(x^\star\)</span> is an argmax, then <span class="math inline">\(\partial_x f(x)\)</span> will be positive to the left of <span class="math inline">\(x^\star\)</span> and negative to the right of <span class="math inline">\(x^\star\)</span>; walk up the hill to get to <span class="math inline">\(x^\star\)</span>, at the top the hill is flat, and just past the top the hill has a negative slope.</p>
<p>For an argmin, changing <span class="math inline">\(x\)</span> from less than <span class="math inline">\(x^\star\)</span> to greater than <span class="math inline">\(x\star\)</span>; you will be walking down into the valley, then level at the very bottom <span class="math inline">\(x=x^\star\)</span>, then back up the other side of the valley after you pass <span class="math inline">\(x=x^\star\)</span>. Figure <a href="optim-and-shape.html#fig:d2-hill">22.2</a> shows the situation.</p>
<pre><code>## Warning: geom_vline(): Ignoring `mapping` because `xintercept` was provided.

## Warning: geom_vline(): Ignoring `mapping` because `xintercept` was provided.

## Warning: geom_vline(): Ignoring `mapping` because `xintercept` was provided.

## Warning: geom_vline(): Ignoring `mapping` because `xintercept` was provided.</code></pre>
<div class="figure" style="text-align: center">
<span id="fig:d2-hill"></span>
<img src="CalcZ-notes_files/figure-html/d2-hill-1.png" alt="Top row: An objective function near an argmax (left) and an argmin (right). Bottom row: The derivative of the objective function" width="50%"><img src="CalcZ-notes_files/figure-html/d2-hill-2.png" alt="Top row: An objective function near an argmax (left) and an argmin (right). Bottom row: The derivative of the objective function" width="50%"><img src="CalcZ-notes_files/figure-html/d2-hill-3.png" alt="Top row: An objective function near an argmax (left) and an argmin (right). Bottom row: The derivative of the objective function" width="50%"><img src="CalcZ-notes_files/figure-html/d2-hill-4.png" alt="Top row: An objective function near an argmax (left) and an argmin (right). Bottom row: The derivative of the objective function" width="50%"><p class="caption">
Figure 22.2: Top row: An objective function near an argmax (left) and an argmin (right). Bottom row: The derivative of the objective function
</p>
</div>
<p>The bottom row of graphs in Figure <a href="optim-and-shape.html#fig:d2-hill">22.2</a> shows the derivative of the objective function <span class="math inline">\(f(x)\)</span>, that is, <span class="math inline">\(\partial_x f(x)\)</span>. You can see that for the argmax of <span class="math inline">\(f(x)\)</span>, the derivative <span class="math inline">\(\partial_x f(x)\)</span> is positive to the left and negative to the right. Similarly, near the argmin of <span class="math inline">\(f(x)\)</span>, the derivative <span class="math inline">\(\partial_x f(x)\)</span> is negative to the left and positive to the right.</p>
<p>Stated another way, the derivative <span class="math inline">\(\partial_x f(x)\)</span> has a positive slope near an argmin and a negative slope near an argmax.</p>
<p>Just as we differentiate <span class="math inline">\(f(x)\)</span> to find it’s slope, so to find the slope of the function <span class="math inline">\(\partial_x f(x)\)</span> we can differentiate it. The result is called the <strong><em>second derivative</em></strong>. We could write it <span class="math inline">\(\partial_x \left[\partial_x f(x)\right]\)</span>, but for brevity we write it <span class="math inline">\(\partial_{xx} f(x)\)</span>.</p>
<p>The second derivative of the objective function <span class="math inline">\(f(x)\)</span> at a critical point <span class="math inline">\(x^\star\)</span> is what tells us whether the critical point is an argmax, an argmin, or neither.
Critical point <span class="math inline">\(x^\star\)</span> | <span class="math inline">\(\partial_x f(x^\star)\)</span> | <span class="math inline">\(\partial_{xx} f(x^\star)\)</span>
———————–|———————|——————-
argmax | 0 | negative
argmin | 0 | positive
neither| 0 | 0</p>
<p><strong>Question tmp-32</strong>: Returning to the function <span class="math inline">\(f(x) \equiv x^3\)</span>, find the value of the second-derivative <span class="math inline">\(\partial_{xx} f(x^\star)\)</span> evaluated at the critical point <span class="math inline">\(x = x^\star = 0\)</span>. Which of these is <span class="math inline">\(\partial_{xx} f( x=0\)</span>?</p>
<ol>
<li><p>Negative [But you established in the previous exercise that the critical point <span class="math inline">\(x^\star=0\)</span> is neither an argmin nor wan argmax.]</p></li>
<li><p>Positive [But you established in the previous exercise that the critical point <span class="math inline">\(x^\star=0\)</span> is neither an argmin nor wan argmax.]</p></li>
<li><p>Zero (+) []</p></li>
</ol>
<div class="why">
<p>When we differentiate a function <span class="math inline">\(f(x)\)</span>, we produce a new function that we can call anything we like. To help readers follow the thread of the story, it’s nice to name the new function <span class="math inline">\(\partial_x f(x)\)</span>. That signals clearly to the reader the origins of the new function with respect to the original function <span class="math inline">\(f(x)\)</span>.</p>
<p>In words, <span class="math inline">\(\partial_x f(x)\)</span> is often called the <strong><em>derivative</em></strong> of <span class="math inline">\(f(x)\)</span> (with respect to x). To “derive” is a very general term and could mean just about any way of creating something new from something old. In calculus, “derivative” always means “created by differentiation.” Perhaps it would have been better if history had led us to call <span class="math inline">\(\partial_x f(x)\)</span> by the name “differentiated <span class="math inline">\(f(x)\)</span>” or “the differential function of <span class="math inline">\(f(x)\)</span>.”</p>
</div>
<p>Graphically, we can read the second derivative <span class="math inline">\(\partial_{xx} f(x)\)</span> as the slope of the first derivative <span class="math inline">\(\partial_x f(x)\)</span> or as the <strong><em>concavity</em></strong> of the function <span class="math inline">\(f(x)\)</span> itself. When <span class="math inline">\(\partial_{xx} f(x) &lt; 0\)</span>, then <span class="math inline">\(f(x)\)</span> is <strong><em>concave down</em></strong> (a frown). Likewise, when <span class="math inline">\(\partial_{xx} f(x) &gt;0\)</span> the <span class="math inline">\(f(x)\)</span> is <strong><em>concave up</em></strong> (a smile). When <span class="math inline">\(\partial_{xx} f(x) = 0\)</span>, then <span class="math inline">\(f(x)\)</span> has no curvature.</p>
<div class="takenote">
<p>To this point, we’ve translated features of functions that are evident on a graph into the language of derivatives:</p>
<ol style="list-style-type: lower-roman">
<li>The <strong>slope</strong> of a function <span class="math inline">\(f(x)\)</span> at any input <span class="math inline">\(x\)</span> is the <strong>value</strong> of the derivative function <span class="math inline">\(\partial_x f(x)\)</span> at that same <span class="math inline">\(x\)</span>.</li>
<li>The <strong>concavity</strong> of a function <span class="math inline">\(f(x)\)</span> at any input is the <strong>slope</strong> of the derivative function, that is, <span class="math inline">\(\partial_x f(x)\)</span>.</li>
<li>Putting (i) and (ii) together, we get that the <strong>concavity</strong> of a function <span class="math inline">\(f(x)\)</span> at any input <span class="math inline">\(x\)</span> is the <strong>value of the second derivative</strong> function, that is, <span class="math inline">\(\partial_{xx} f(x)\)</span>.</li>
<li>At an argmax <span class="math inline">\(x^\star\)</span> of <span class="math inline">\(f(x)\)</span>, the value of the derivative function <span class="math inline">\(\partial_x f(x^\star)\)</span> is zero and the value of the second derivative function <span class="math inline">\(\partial_{xx} f(x^\star)\)</span> is <strong>negative</strong>. (The situation at an argmin is similar, the derivative of the objective function is zero and the second derivative is <strong>positive</strong>.)</li>
</ol>
</div>

<div class="exercise">
<span id="exr:concavity" class="exercise"><strong>Exercise 22.1  (02/concavity)  </strong></span>
</div>
<details><p>The graph shows three different functions labeled (A), (B), and (C).</p>
<p><img src="CalcZ-notes_files/figure-html/daily-digital-02-C1-1.png" width="32%" style="display: block; margin: auto;"><img src="CalcZ-notes_files/figure-html/daily-digital-02-C1-2.png" width="32%" style="display: block; margin: auto;"><img src="CalcZ-notes_files/figure-html/daily-digital-02-C1-3.png" width="32%" style="display: block; margin: auto;"></p>
<p><strong>Question A</strong> Function (A) is</p>
<p>    concave down<span class="mcanswer"> ✓ </span>       non-concave<span class="mcanswer"> ☹︎ </span>       concave up<span class="mcanswer"> ☹︎ </span></p>
<p><strong>Question B</strong> Function (B) is</p>
<p>    concave down<span class="mcanswer"> ☹︎ </span>       non-concave<span class="mcanswer"> ☹︎ </span>       concave up<span class="mcanswer"> ✓ </span></p>
<p><strong>Question C</strong> Function (C) is</p>
<p>    concave down<span class="mcanswer"> ☹︎ </span>       non-concave<span class="mcanswer"> ✓ </span>       concave up<span class="mcanswer"> ☹︎ </span></p>
<p><strong>Question D</strong> The <strong>negative</strong> of function (A) is</p>
<p>    concave down<span class="mcanswer"> ☹︎ </span>       non-concave<span class="mcanswer"> ☹︎ </span>       concave up<span class="mcanswer"> ✓ </span></p>
<p>The graph shows a function <span class="math inline">\(\mbox{wave}(t) \equiv \sin(2 \pi t/4)\)</span> and labels four input values <span class="math inline">\(t\)</span>.</p>
<div class="inline-figure"><img src="CalcZ-notes_files/figure-html/daily-digital-02-C2-1.png" width="90%" style="display: block; margin: auto;"></div>
<p><strong>Question E</strong> For what values of the input <span class="math inline">\(t\)</span> is the function concave up?</p>
<ol style="list-style-type: lower-roman">
<li>
<span class="math inline">\(t = A\)</span> and <span class="math inline">\(t=D\)</span><span class="mcanswer"> ☹︎ </span><br>
</li>
<li>
<span class="math inline">\(t = A\)</span> and <span class="math inline">\(t=C\)</span><span class="mcanswer"> ☹︎ </span><br>
</li>
<li>
<span class="math inline">\(t = C\)</span> and <span class="math inline">\(t = D\)</span><span class="mcanswer"> ✓ </span><br>
</li>
<li>none of the above<span class="mcanswer"> ☹︎ </span>
</li>
</ol>
<p><strong>Question F</strong> For what values of the input <span class="math inline">\(t\)</span> is the function non-concave?</p>
<p>    <span class="math inline">\(t = A\)</span><span class="mcanswer"> ✓ </span>       <span class="math inline">\(t=B\)</span><span class="mcanswer"> ☹︎ </span>       <span class="math inline">\(t=C\)</span><span class="mcanswer"> ☹︎ </span>       none of the above<span class="mcanswer"> ☹︎ </span></p>
<p><strong>Question G</strong> Where is the function steepest?</p>
    <span class="math inline">\(t = A\)</span><span class="mcanswer"> ✓ </span>       <span class="math inline">\(t=B\)</span><span class="mcanswer"> ☹︎ </span>       <span class="math inline">\(t=C\)</span><span class="mcanswer"> ☹︎ </span>       <span class="math inline">\(t=D\)</span><span class="mcanswer"> ☹︎ </span>
</details><div class="exercise">
<span id="exr:unnamed-chunk-142" class="exercise"><strong>Exercise 22.2  (tree-loves-fish)  </strong></span>
</div>
<details><p>Here is a smooth function marked at a few points. Your task is, at each point, to estimate the value of the derivative, the sign of the second derivative, and the radius of the circle that would nicely match the function in a small region around each point. (Remember, we’re asking for the <em>radius</em> of the circle, which is half the <em>diameter</em>.)</p>
<p>To simplify things, here is a table giving seven different combinations of the quantities you are to estimate. Some of them correctly match one of the labeled points, some do not. All you need to do is choose which is the correct set of quantities for each labeled point.</p>
<div class="inline-figure"><img src="CalcZ-notes_files/figure-html/unnamed-chunk-346-1.png" width="90%" style="display: block; margin: auto;"></div>
<table class="table table-sm">
<colgroup>
<col width="13%">
<col width="23%">
<col width="36%">
<col width="26%">
</colgroup>
<thead><tr class="header">
<th align="left">row</th>
<th align="right">value of 1st deriv</th>
<th align="center">sign of 2nd deriv</th>
<th align="left">radius                                       </th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">i</td>
<td align="right">-0.3</td>
<td align="center">pos</td>
<td align="left">0.25 <!--D-->
</td>
</tr>
<tr class="even">
<td align="left">ii</td>
<td align="right">2.1</td>
<td align="center">near 0</td>
<td align="left">2000 <!--B-->
</td>
</tr>
<tr class="odd">
<td align="left">iii</td>
<td align="right">-1.4</td>
<td align="center">neg</td>
<td align="left">12</td>
</tr>
<tr class="even">
<td align="left">iv</td>
<td align="right">0.3</td>
<td align="center">neg</td>
<td align="left">0.3 <!--C-->
</td>
</tr>
<tr class="odd">
<td align="left">v</td>
<td align="right">2.1</td>
<td align="center">pos</td>
<td align="left">0.1</td>
</tr>
<tr class="even">
<td align="left">vi</td>
<td align="right">1.3</td>
<td align="center">neg</td>
<td align="left">3 <!--E-->
</td>
</tr>
<tr class="odd">
<td align="left">vii</td>
<td align="right">0.5</td>
<td align="center">pos</td>
<td align="left">1 <!--A-->
</td>
</tr>
</tbody>
</table>
<p><strong>Question A</strong> Which row from the table best matches the function at point A?</p>
<p>    i<span class="mcanswer"> ☹︎ </span>       ii<span class="mcanswer"> ☹︎ </span>       iii<span class="mcanswer"> ☹︎ </span>       iv<span class="mcanswer"> ☹︎ </span>       v<span class="mcanswer"> ☹︎ </span>       vi<span class="mcanswer"> ☹︎ </span>       vii<span class="mcanswer"> ✓ </span></p>
<p><strong>Question B</strong> Which row from the table best matches the function at point B?</p>
<p>    i<span class="mcanswer"> ☹︎ </span>       ii<span class="mcanswer"> ✓ </span>       iii<span class="mcanswer"> ☹︎ </span>       iv<span class="mcanswer"> ☹︎ </span>       v<span class="mcanswer"> ☹︎ </span>       vi<span class="mcanswer"> ☹︎ </span>       vii<span class="mcanswer"> ☹︎ </span></p>
<p><strong>Question C</strong> Which row from the table best matches the function at point C?</p>
<p>    i<span class="mcanswer"> ☹︎ </span>       ii<span class="mcanswer"> ☹︎ </span>       iii<span class="mcanswer"> ☹︎ </span>       iv<span class="mcanswer"> ✓ </span>       v<span class="mcanswer"> ☹︎ </span>       vi<span class="mcanswer"> ☹︎ </span>       vii<span class="mcanswer"> ☹︎ </span></p>
<p><strong>Question D</strong> Which row from the table best matches the function at point D?</p>
<p>    i<span class="mcanswer"> ✓ </span>       ii<span class="mcanswer"> ☹︎ </span>       iii<span class="mcanswer"> ☹︎ </span>       iv<span class="mcanswer"> ☹︎ </span>       v<span class="mcanswer"> ☹︎ </span>       vi<span class="mcanswer"> ☹︎ </span>       vii<span class="mcanswer"> ☹︎ </span></p>
<p><strong>Question E</strong> Which row from the table best matches the function at point E?</p>
    i<span class="mcanswer"> ☹︎ </span>       ii<span class="mcanswer"> ☹︎ </span>       iii<span class="mcanswer"> ☹︎ </span>       iv<span class="mcanswer"> ☹︎ </span>       v<span class="mcanswer"> ☹︎ </span>       vi<span class="mcanswer"> ✓ </span>       vii<span class="mcanswer"> ☹︎ </span>
</details><div class="todo">
<p>Pick up on the Lorenz curve <code>{.intheworld}</code> in block 1. Compute the concavity of a lorenz function, showing that it’s everywhere positive. Then examine the concavity of a composition of lorenz functions to determine if that is necessarily everywhere positive.</p>
</div>
<div class="workedexample">
<p>What’s the critical point?</p>
<p>You’re familiar with the quadratic polynomial: <span class="math display">\[g(x) = a_0 + a_1 x + a_2 x^2\]</span>
The graph of a quadratic polynomial is a <strong><em>parabola</em></strong>, which might be concave up or concave down. As you know, a parabola has only one critical point, which might be an argmin or an argmax.</p>
<p>Let’s find the critical point. We know that the critical point is <span class="math inline">\(x^\star\)</span> such that <span class="math inline">\(\partial_x g(x_0) = 0\)</span>. Since we know how to differentiate a power law, we can see that
<span class="math display">\[\partial_x g(x) = a_1 + 2 a_2 x\]</span> and, more specifically, at the critical point <span class="math inline">\(x^\star\)</span> the derivative will be
<span class="math display">\[a_1 + 2 a_2 x^\star = 0\]</span>
The above is an equation, not a definition. It says that whatever <span class="math inline">\(x^\star\)</span> happens to be, the quantity <span class="math inline">\(a_1 + 2 a_2 x^\star\)</span> must be zero. Using plain old algebra, we can find the location of the critical point <span class="math display">\[x^\star = -\frac{a_1}{2 a_2}\]</span></p>
</div>

<div class="exercise">
<span id="exr:unnamed-chunk-143" class="exercise"><strong>Exercise 22.3  (optim-violet)  </strong></span>
</div>
<details><p>You’re very proud of your pet dog, Swimmer. You often go to the beach and walk along the water’s edge. You throw a ball down the beach, but at an angle so it lands in the water. Swimmer goes to work. She runs down the beach (fast) and then plunges into the water, heading toward the ball. She can run fast on the beach: 400 m/minute. But she swims rather slower: 50 m/min.</p>
<p>Suppose you threw the ball to a point 50 meters down the beach and 10 meters out in the water. The overall distance to the ball is therefore <span class="math inline">\(\sqrt{50^2 + 10^2} = 51\)</span> meters. If Swimmer entered the water immediately, she would take about minute to reach the ball (51 m / 50 m/min). Swimmer can get to the ball faster by running down the beach a big and then turning into the water. If Swimmer ran all 50 meters down the beach and then turned to swim the 10 meters, it would take her (50/400 + 10/50) minutes, about one-third of a minute.</p>
<p>Can Swimmer do better? You can set up the calculation like this. Imagine <span class="math inline">\(x\)</span> to be the distance down the beach that Swimmer runs. The time to run this distance will be <span class="math inline">\(x/400\)</span>. The distance remaining to the ball can be found by the pythagorean theorem. One leg of the triangle has length <span class="math inline">\((50-x)\)</span>, the other has length 10 m. So if <span class="math inline">\(x\)</span> were 45, the distance to swim in the water would be <span class="math inline">\(\sqrt{(50-45)^2 + 10^2}\)</span>. Divide this distance by 50 m/min to get the time spent in the water.</p>
<div class="sourceCode" id="cb166"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">distance_in_water</span> <span class="op">&lt;-</span> <span class="fu">makeFun</span><span class="op">(</span> <span class="va">your_pythagorus_calculation</span> <span class="op">~</span> <span class="va">x</span><span class="op">)</span>
<span class="va">time_to_ball</span> <span class="op">&lt;-</span> <span class="fu">makeFun</span><span class="op">(</span><span class="va">x</span><span class="op">/</span><span class="fl">400</span> <span class="op">+</span> <span class="va">distance_in_water</span><span class="op">/</span><span class="fl">50</span> <span class="op">~</span> <span class="va">x</span><span class="op">)</span></code></pre></div>
<p><code>Time_to_ball()</code> takes one argument, the distance <span class="math inline">\(x\)</span> Swimmer runs down the beach before turning into the water. Use a <a href="https://maa-statprep.shinyapps.io/CalcZ-Sandbox/">SANDBOX</a> to find the distance that calculus-savvy Swimmer runs down the beach before turning into the water, if Swimmer’s goal is to get to the ball as fast as possible.</p>
<p><strong>Question A</strong> What’s the optimal running distance for Swimmer?</p>
<p>    47.25<span class="mcanswer"> ☹︎ </span>       47.5<span class="mcanswer"> ☹︎ </span>       48.25<span class="mcanswer"> ☹︎ </span>       48.75<span class="mcanswer"> ✓ </span>       49.25<span class="mcanswer"> ☹︎ </span>       49.75<span class="mcanswer"> ☹︎ </span></p>
<a href="https://abcnews.go.com/Technology/story?id=97628&amp;page=1">Here’s a news story</a> about a mathematician’s dog on the shore of Lake Michigan. It’s not plausible that Swimmer has been trained in calculus. Perhaps the way Swimmer solves the running distance problem is simply to graph <code>time_to_ball(x) ~ x</code> over a suitable domain and find the argmax by eye!
</details><div class="exercise">
<span id="exr:unnamed-chunk-144" class="exercise"><strong>Exercise 22.4  (optim-pink)  </strong></span>
</div>
<details><p>If you’re skeptical that a dog might do a calculus problem before running to fetch a ball, consider the path taken by a photon. “Fermat’s Principle” is that light takes the path of least time. To illustrate, consider the problem of a photon travelling from a point A to a point B, as in the diagram. The shortest path between the two points is a straight line. Along this straight-line path, the time taken by the photon will be the distance divided by the speed of light.</p>
<p>The diagram shows another path consisting of two segments, one of length <span class="math inline">\(l_1\)</span> and the other <span class="math inline">\(l_2\)</span>. Obviously, the two-segment path is longer than the straight-line path. But Fermat’s principle would lead light to “prefer” the longer path if the time taken to traverse it is shorter.</p>
<pre><code>## Warning in normalizePath("www/1200px-Fermat_Snellius.svg.png"): path[1]="www/
## 1200px-Fermat_Snellius.svg.png": No such file or directory</code></pre>
<div class="inline-figure"><img src="www/1200px-Fermat_Snellius.svg.png" width="60%" style="display: block; margin: auto;"></div>
<p>The reason the indirect path might be shorter is that the speed of light differs in different physical media. Light traveling in a vacuum famously has a speed of about 300,000 km per second. In air, the speed is smaller by a factor of 1/1.003. In water, the speed is smaller still: the factor is 1/1.3.</p>
<p>Imagine that the blue zone of the diagram is water and the clear zone air. The time for the photon to travel from point A to B is proportional to <span class="math inline">\(1.003\ l_1 + 1.3\ l_2\)</span>.</p>
<p>To see the path actually taken by light, let’s imagine that point A is <span class="math inline">\((x=0, y=10)\)</span> and point B is <span class="math inline">\((x=20, y=-10)\)</span>, and that the boundary between water and air is at <span class="math inline">\(y=0\)</span>. We’ll place the point P at <span class="math inline">\((x, 0)\)</span>. The total time taken for light to traverse this path is 1.003 dist(A to P) + 1.3 dist(P to B).</p>
<p><strong>Question A</strong> Which of these formulas gives the total time it takes for light to traverse the path from A to P at relative speed 1/1.003 and then the path from P to B at relative speed 1/1.3? A is located at <span class="math inline">\((0, 10)\)</span>, B is located at <span class="math inline">\((20,-10)\)</span>, and P is located at <span class="math inline">\((x, 0)\)</span></p>
<ol style="list-style-type: lower-roman">
<li>
<span class="math inline">\(1.003 \sqrt{(x-0)^2 +(0-10)^2}+ 1.3\sqrt{(20-x)^2 + (-10 - 0)^2}\)</span><span class="mcanswer"> ✓ </span><br>
</li>
<li>
<span class="math inline">\(\sqrt{(x-0)^2 +(0-10)^2}/1.003+ \sqrt{(20-x)^2 + (-10 - 0)^2}/1.3\)</span><span class="mcanswer"> ☹︎ It’s true that you divide distance by speed to get time, but here the relative speeds are <span class="math inline">\(1/1.003\)</span> and <span class="math inline">\(1/1.3\)</span>. </span><br>
</li>
<li>
<span class="math inline">\(1.003 \sqrt{(x-10)^2 +(0-0)^2}+ 1.3\sqrt{(-10 -x)^2 + (50 - 0)^2}\)</span><span class="mcanswer"> ☹︎ This mixes up the x and y coordinates. The distance from A to P is <span class="math inline">\(\sqrt{(x_P - x_A)^2 + (y_P - y_A)^2}\)</span>. In this problem, point P is at <span class="math inline">\((50-x, 0)\)</span>. </span>
</li>
</ol>
<p>Implement the calculation of <code>total_time()</code> in R, then use a graph to find the argmin.</p>
<div class="scaffolding">
<div class="sourceCode" id="cb168"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">total_time</span> <span class="op">&lt;-</span> <span class="fu">makeFun</span><span class="op">(</span> <span class="va">your_formula</span> <span class="op">~</span> <span class="va">x</span><span class="op">)</span>
<span class="fu">slice_plot</span><span class="op">(</span><span class="fu">total_time</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">~</span> <span class="va">x</span>, <span class="fu">domain</span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="co"># For the next problem</span>
<span class="va">dx_time</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/deriv.html">D</a></span><span class="op">(</span><span class="fu">total_time</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">~</span> <span class="va">x</span><span class="op">)</span>
<span class="va">dxx_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/deriv.html">D</a></span><span class="op">(</span><span class="fu">total_time</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">~</span> <span class="va">x</span> <span class="op">+</span> <span class="va">x</span><span class="op">)</span></code></pre></div>
</div>
<p><strong>Question B</strong> i) What value of <span class="math inline">\(x\)</span> (that is, the argmin) minimizes the travel time of light between points A and B? (Choose the best answer)</p>
<ol style="list-style-type: lower-roman">
<li>10.52<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.02<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.19<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.61<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.07<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.22<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.46<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.50<span class="mcanswer"> ✓ </span><br>
</li>
<li>12.95<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>13.19<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>13.21<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>13.34<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>13.92<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>14.03<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>14.14<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>14.16<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>14.44<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>14.5<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>14.94<span class="mcanswer"> ☹︎ </span>
</li>
</ol>
<p><strong>Question C</strong> ii) Suppose that instead of being water, the blue area was glass. The speed of light in glass is roughly 1/1.5 times as big as in vacuum. What value of <span class="math inline">\(x\)</span> minimizes the travel time of light between points A and B? (Choose the best answer)</p>
<ol style="list-style-type: lower-roman">
<li>10.13<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.07<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.13<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.5<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.57<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.38<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.62<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.87<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.88<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.95<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>13.16<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>13.4<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>13.60<span class="mcanswer"> ✓ </span><br>
</li>
<li>13.71<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>13.85<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>14.18<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>14.25<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>14.34<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>14.7<span class="mcanswer"> ☹︎ </span>
</li>
</ol></details><div class="exercise">
<span id="exr:unnamed-chunk-145" class="exercise"><strong>Exercise 22.5  (optim-red)  </strong></span>
</div>
<details><div class="todo">
<p>Turn this into a problem about algebra.</p>
<p>Later in accumulation, figure out the mile-markers on the road.</p>
</div>
<p>There is a tradition in mathematics education of using <em>geometrical</em>, distance-related problems to illustrate optimization. As it happens, some such problems can provide some valuable insight into physical situations.</p>
<p>Suppose you have a function <span class="math inline">\(f(x)\)</span> whose graph represents the path of a road through the jungle. There is a lion at coordinates <span class="math inline">\((3, 2)\)</span> in the jungle. At what point as you travel along the road will you be closest to the lion.</p>
<p>The trick here is to see that your position on the road at any value of <span class="math inline">\(x\)</span> is <span class="math inline">\((x, f(x))\)</span>. The distance to the lion as a function of <span class="math inline">\(x\)</span> is <span class="math display">\[ \text{lion_dist}(x) \equiv \sqrt{(x - 3)^2 + (f(x)-2)^2} .\]</span></p>
<p>The road and the lion are graphed in the sandbox for the road <span class="math inline">\(f(x) \equiv x^2 e^{-x}\)</span>. You can see that the road comes closest to the lion at roughly <span class="math inline">\(x=3\)</span>. When you implement the <span class="math inline">\(\text{lion_dist}(x)\)</span> function, you’ll be able to find the <em>argmin</em>, that is, the value of the input <span class="math inline">\(x\)</span> for which the output <span class="math inline">\(\text{lion_dist}(x)\)</span> is minimal. The value of the function <span class="math inline">\(\text{lion_dist}(x)\)</span> at the argmin is the <em>min</em> of the function.</p>
<div class="sourceCode" id="cb169"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">slice_plot</span><span class="op">(</span><span class="va">x</span><span class="op">^</span><span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="op">-</span><span class="va">x</span><span class="op">)</span> <span class="op">~</span> <span class="va">x</span>, <span class="fu">domain</span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">gf_label</span><span class="op">(</span><span class="fl">2</span> <span class="op">~</span> <span class="fl">3</span>, label<span class="op">=</span><span class="st">"lion"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">gf_refine</span><span class="op">(</span><span class="fu">coord_fixed</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="CalcZ-notes_files/figure-html/unnamed-chunk-354-1.png" width="90%" style="display: block; margin: auto;"></div>
<p>To find the argmin of the distance to the lion more precisely, implement the <span class="math inline">\(\text{lion_dist}(x)\)</span> function in the sandbox. Plot this out and look for the minimum. Alternatively, find <span class="math inline">\(\partial_x \text{lion_dist}(x)\)</span> and find the <span class="math inline">\(x\)</span> of the zero crossing.</p>
<p><strong>Question A</strong> Using the sandbox above, find the argmin for which the graph of the function <span class="math inline">\(g(x) \equiv x^2 \exp(-x)\)</span> comes closest to the point <span class="math inline">\((3, 2)\)</span>? (Choose the best answer.)</p>
<ol style="list-style-type: lower-roman">
<li>2.03<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>2.07<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>2.21<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>2.27<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>2.28<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>2.33<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>2.37<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>2.39<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>2.43<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>2.48<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>2.58<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>2.71<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>2.80<span class="mcanswer"> ✓ </span><br>
</li>
<li>2.94<span class="mcanswer"> ☹︎ </span>
</li>
</ol></details><div class="exercise">
<span id="exr:unnamed-chunk-146" class="exercise"><strong>Exercise 22.6  (optim-blue)  </strong></span>
</div>
<details><p>In the previous problem, you used graphics to find the argmin of a function. You can, of course, successively reset the domain of the graphing window to zoom in on the location of the argmin.</p>
<p>To find the argmin numerically, you start with a (pretty good) guess for the argmin. Recall that a function (such as <code>total_time()</code>) can be modeled with a low-order polynomial. When the function has an extreme point the polynomial should include a quadratic term. Suppose you have guessed that <span class="math inline">\(x=10\)</span> is a good starting guess for the argmin of the air-to-water problem. You can compute the first and second derivatives of <code>total_time(x)</code> with respect to <code>x</code> and evaluate those derivative functions at <span class="math inline">\(x=10\)</span>. (Use the <code><a href="https://rdrr.io/r/stats/deriv.html">D()</a></code> function to construct the derivatives.) In the sandbox, use the value of those two derivatives at the <span class="math inline">\(x=10\)</span> guess to find the approximation to the minimum of the function.</p>
<p>To help remind you, the quadratic approximation to a function <span class="math inline">\(t(x)\)</span> around a reference point <span class="math inline">\(x_0\)</span> is: <span class="math display">\[q(x) \equiv t(x_0) + \partial_x t(x_0) [x - x_0] + \frac{1}{2} \partial_{xx} t(x_0) [x - x_0]^2\]</span>
Find the derivative <span class="math inline">\(\partial_x q(x)\)</span> and set this equal to zero. Inserting appropriate values for <span class="math inline">\(x_0\)</span>, <span class="math inline">\(\partial_x t(x_0)\)</span>, and <span class="math inline">\(\partial_{xx} t(x_0)\)</span> will enable you to calculate the value of <span class="math inline">\(x\)</span> at the minimum of the approximating quadratic.</p>
<p><strong>Question A</strong> iii) Letting the blue area be water (1/1.3 speed factor) and starting with a guess <span class="math inline">\(x_0=10\)</span>, find the <span class="math inline">\(x\)</span> that minimizes the approximating quadratic.</p>
<ol style="list-style-type: lower-roman">
<li>9.912<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>10.748<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.017<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.151<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.267<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.327<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.515<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.713<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.81<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.074<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.276<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.321<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.438<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.461<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.579<span class="mcanswer"> ✓ </span><br>
</li>
<li>12.618<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.637<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.993<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>13.261<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>13.36<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>13.527<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>13.888<span class="mcanswer"> ☹︎ </span>
</li>
</ol>
<p><strong>Question B</strong> iv) Using the correct answer from (iii) for a new <span class="math inline">\(x_0\)</span>, find the value of <span class="math inline">\(x\)</span> that minimizes the new approximating quadratic.</p>
<ol style="list-style-type: lower-roman">
<li>9.912<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>10.748<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.017<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.151<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.267<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.327<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.515<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.713<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>11.81<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.074<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.276<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.321<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.438<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.461<span class="mcanswer"> ✓ </span><br>
</li>
<li>12.579<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.618<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.637<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>12.993<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>13.261<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>13.36<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>13.527<span class="mcanswer"> ☹︎ </span><br>
</li>
<li>13.888<span class="mcanswer"> ☹︎ </span>
</li>
</ol></details>
</div>
<div id="tree-harvesting" class="section level2" number="22.4">
<h2>
<span class="header-section-number">22.4</span> Tree harvesting<a class="anchor" aria-label="anchor" href="#tree-harvesting"><i class="fas fa-link"></i></a>
</h2>
<p>Your uncle Bob is writing a business plan for a tree farm for lumber. Having heard that you are taking Math 141Z, he emails you giving some information asking for some numbers. In particular, Bob sends you a report saying that, for the species of tree he plans to plant, the amount of usable lumber is a function of growth time <span class="math inline">\(t\)</span> looking like the function defined in the sandbox:</p>
<div class="scaffolding">
<div class="sourceCode" id="cb170"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lumber</span> <span class="op">&lt;-</span> <span class="fu">makeFun</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="va">t</span><span class="op">&lt;</span><span class="fl">10</span>, <span class="fl">0</span>, <span class="fl">100</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="op">(</span><span class="va">t</span><span class="op">-</span><span class="fl">25</span><span class="op">)</span><span class="op">/</span><span class="fl">8</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="op">(</span><span class="va">t</span><span class="op">-</span><span class="fl">25</span><span class="op">)</span><span class="op">/</span><span class="fl">8</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">~</span> <span class="va">t</span><span class="op">)</span>
<span class="va">dt_lumber</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/deriv.html">D</a></span><span class="op">(</span><span class="fu">lumber</span><span class="op">(</span><span class="va">t</span><span class="op">)</span> <span class="op">~</span> <span class="va">t</span><span class="op">)</span>
<span class="va">ave_growth_rate</span> <span class="op">&lt;-</span> <span class="fu">makeFun</span><span class="op">(</span> <span class="va">your_expression_here</span> <span class="op">~</span> <span class="va">t</span><span class="op">)</span>
<span class="fu">slice_plot</span><span class="op">(</span><span class="fu">lumber</span><span class="op">(</span><span class="va">t</span><span class="op">)</span> <span class="op">~</span> <span class="va">t</span>, <span class="fu">domain</span><span class="op">(</span>t<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="CalcZ-notes_files/figure-html/unnamed-chunk-356-1.png" width="90%" style="display: block; margin: auto;"></div>
</div>
<p>Bob has heard that the time to harvest is when the tree is growing fastest.</p>
<p><strong>Question C</strong> A) What is the value of <code>t</code> (in years) at which <span class="math inline">\(\partial_t\)</span> <code>lumber(t)</code> is largest?</p>
<p>    15<span class="mcanswer"> ☹︎ </span>       16<span class="mcanswer"> ☹︎ </span>       17<span class="mcanswer"> ☹︎ </span>       18<span class="mcanswer"> ☹︎ </span>       19<span class="mcanswer"> ☹︎ </span>       20<span class="mcanswer"> ☹︎ </span>       21<span class="mcanswer"> ☹︎ </span>       22<span class="mcanswer"> ☹︎ </span>       23<span class="mcanswer"> ☹︎ </span>       24<span class="mcanswer"> ☹︎ </span>       25<span class="mcanswer"> ✓ </span>       26<span class="mcanswer"> ☹︎ </span>       27<span class="mcanswer"> ☹︎ </span>       28<span class="mcanswer"> ☹︎ </span>       29<span class="mcanswer"> ☹︎ </span>       30<span class="mcanswer"> ☹︎ </span></p>
<p>You patiently explain to your uncle that you certainly do not want to harvest trees when they are growing the fastest. You say, “You want to wait until the average growth rate up to that point is fastest. That will be a little while before the tree reaches its adult volume.”</p>
<p><strong>Question D</strong> B) What is the value of t (in years) for which the average growth rate, up to that time, is fastest.</p>
    15<span class="mcanswer"> ☹︎ </span>       17<span class="mcanswer"> ☹︎ </span>       19<span class="mcanswer"> ☹︎ </span>       21<span class="mcanswer"> ☹︎ </span>       23<span class="mcanswer"> ☹︎ </span>       25<span class="mcanswer"> ☹︎ </span>       27<span class="mcanswer"> ☹︎ </span>       29<span class="mcanswer"> ☹︎ </span>       31<span class="mcanswer"> ☹︎ </span>       33<span class="mcanswer"> ☹︎ </span>       35<span class="mcanswer"> ✓ </span>       37<span class="mcanswer"> ☹︎ </span>       39<span class="mcanswer"> ☹︎ </span>       41<span class="mcanswer"> ☹︎ </span>


<div class="exercise">
<span id="exr:unnamed-chunk-147" class="exercise"><strong>Exercise 22.7  (optim-purple)  </strong></span>This is probably misplaced. and the <code>plot_lens()</code> function would have to be provided.
</div>
<details><p>Figure 1 shows a lens together with a source and target point. Light passing through the lens is refracted. The path followed by the light will be the one with the shortest time of transit from source to target.</p>
<p>The light enters the lens at some point <span class="math inline">\(P_{in} = (x_{in}\ , \ -\mbox{Lens}(x_{in}))\)</span> and leaves at <span class="math inline">\(P_{out} = (x_{out}\ ,\  \mbox{Lens}(x_{out}))\)</span>. We don’t know either <span class="math inline">\(x_{in}\)</span> or <span class="math inline">\(x_{out}\)</span>. but we can find them by optimization.</p>
<p>To do this, we find the distance from the source to <span class="math inline">\(P_{in}\)</span>, and from <span class="math inline">\(P_{out}\)</span> to the target. These two legs of the route are through air, so the time of transit on each leg is proportional to the refractive index 1.03 times the distance.</p>
<p>Of course, light also has to travel through the lens. We’ll make the lens out of glass with a high refractive index, so the transit time will be the distance from <span class="math inline">\(P_{in}\)</span> to <span class="math inline">\(P_{out}\)</span> multiplied by the lens’s refractive index of 1.8.</p>
<p>The objective function will be the sum of the three legs’ transit times. It’s already programmed for you in the sandbox. So is the command to make a contour plot of the output of the objective function over a domain of <span class="math inline">\(x_{in}\)</span> and <span class="math inline">\(x_{out}\)</span>. Finally, the last line in the sandbox draws a picture of the lens and the light path, but you will have to insert the argmins <span class="math inline">\(x_{in}\)</span> and <span class="math inline">\(x_{out}\)</span> that you pick from the contour plot of the objective function. (The <span class="math inline">\(x_{in}\)</span> and <span class="math inline">\(x_{out}\)</span> shown in the initial code of the sandbox are not right!)</p>
<div class="sourceCode" id="cb171"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Describe the shape of the lens</span>
<span class="va">Lens_top</span> <span class="op">&lt;-</span> <span class="fu">makeFun</span><span class="op">(</span><span class="op">-</span><span class="fl">90</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fl">100</span><span class="op">^</span><span class="fl">2</span> <span class="op">-</span> <span class="va">x</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span>  <span class="op">~</span> <span class="va">x</span><span class="op">)</span>
<span class="va">Lens_bottom</span> <span class="op">&lt;-</span> <span class="fu">makeFun</span><span class="op">(</span><span class="op">-</span><span class="fu">Lens_top</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">~</span> <span class="va">x</span><span class="op">)</span>

<span class="co"># Define the objective function</span>
<span class="va">transit_time</span> <span class="op">&lt;-</span> <span class="fu">makeFun</span><span class="op">(</span>
  <span class="fl">1.03</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="op">(</span><span class="va">x_in</span> <span class="op">-</span> <span class="op">-</span><span class="fl">20</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="op">(</span><span class="fu">Lens_bottom</span><span class="op">(</span><span class="va">x_in</span><span class="op">)</span><span class="op">-</span> <span class="op">(</span><span class="op">-</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fl">1.80</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="op">(</span><span class="va">x_out</span><span class="op">-</span><span class="va">x_in</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="op">(</span><span class="fu">Lens_top</span><span class="op">(</span><span class="va">x_out</span><span class="op">)</span> <span class="op">-</span> <span class="fu">Lens_bottom</span><span class="op">(</span><span class="va">x_in</span><span class="op">)</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fl">1.03</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="op">(</span><span class="va">x_out</span> <span class="op">-</span> <span class="op">-</span><span class="fl">10</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span> <span class="op">+</span> <span class="op">(</span><span class="fu">Lens_top</span><span class="op">(</span><span class="va">x_out</span><span class="op">)</span><span class="op">-</span><span class="fl">50</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">~</span>
    <span class="va">x_in</span> <span class="op">+</span> <span class="va">x_out</span><span class="op">)</span>
<span class="co"># Graph the objective function</span>
<span class="fu">contour_plot</span><span class="op">(</span><span class="fu">transit_time</span><span class="op">(</span><span class="va">x_in</span>, <span class="va">x_out</span><span class="op">)</span> <span class="op">~</span> <span class="va">x_in</span> <span class="op">+</span> <span class="va">x_out</span>, 
             <span class="fu">domain</span><span class="op">(</span>x_in <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">40</span>,<span class="fl">40</span><span class="op">)</span>, x_out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">40</span>,<span class="fl">40</span><span class="op">)</span><span class="op">)</span>, npts<span class="op">=</span><span class="fl">200</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="CalcZ-notes_files/figure-html/unnamed-chunk-359-1.png" width="90%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb172"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Insert argmax from contour plot</span>
<span class="fu">plot_lens</span><span class="op">(</span><span class="fl">10</span>, <span class="op">-</span><span class="fl">5</span>, <span class="va">Lens_top</span>, <span class="va">Lens_bottom</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="CalcZ-notes_files/figure-html/unnamed-chunk-359-2.png" width="90%" style="display: block; margin: auto;"></div>
<p><strong>Question A</strong> When the index of refraction of the lens is 1.80, what are the optimal values for <span class="math inline">\(x_{in}\)</span> and <span class="math inline">\(x_{out}\)</span>? (Choose the best answer.)</p>
<ol style="list-style-type: lower-roman">
<li>
<span class="math inline">\(x_{in} = -22, \ x_{out} = -21\)</span><span class="mcanswer"> ✓ </span><br>
</li>
<li>
<span class="math inline">\(x_{in} = -26, \ x_{out} = -20\)</span><span class="mcanswer"> ☹︎ </span><br>
</li>
<li>
<span class="math inline">\(x_{in} = -24, \ x_{out} = -21\)</span><span class="mcanswer"> ☹︎ </span><br>
</li>
<li>
<span class="math inline">\(x_{in} = -18, \ x_{out} = -17\)</span><span class="mcanswer"> ☹︎ </span><br>
</li>
<li>
<span class="math inline">\(x_{in} = -25, \ x_{out} = -20\)</span><span class="mcanswer"> ☹︎ </span>
</li>
</ol>
<p>It’s a good practice to test software against situations where you know the right answer. A simple situation is when there is <em>no lens at all</em>. One way to do this is to change the middle line of <code>transit_time()</code> so that the index of refraction is 1.03, just like the surrounding air.</p>
<p><strong>Question B</strong> When the index of refraction of the lens is 1.03, what are the optimal values for <span class="math inline">\(x_{in}\)</span> and <span class="math inline">\(x_{out}\)</span>? (Choose the best answer.)</p>
<ol style="list-style-type: lower-roman">
<li>
<span class="math inline">\(x_{in} = -17, \ x_{out} = -15\)</span><span class="mcanswer"> ✓ </span><br>
</li>
<li>
<span class="math inline">\(x_{in} = -18, \ x_{out} = -14\)</span><span class="mcanswer"> ☹︎ </span><br>
</li>
<li>
<span class="math inline">\(x_{in} = -16, \ x_{out} = -16\)</span><span class="mcanswer"> ☹︎ </span><br>
</li>
<li>
<span class="math inline">\(x_{in} = -18, \ x_{out} = -18\)</span><span class="mcanswer"> ☹︎ </span><br>
</li>
<li>
<span class="math inline">\(x_{in} = -17, \ x_{out} = -18\)</span><span class="mcanswer"> ☹︎ </span>
</li>
</ol>
<p>Let’s explore an extreme situation. Diamond is the transparent material that has the highest index of refraction, 2.417. Imagine a material with an index of refraction of 10. This means that light will travel very slowly within the lens.</p>
<strong>Essay question tmp-33</strong>: When you examine the contour plot of <code>transit_time()</code> for this high index of refraction, there will be two, widely separated local minima. Explain briefly which part of the lens these two minima correspond to. Hint: High index means slow speed of light. Sometimes it’s worthwhile to go out of your way to avoid slowdowns.
</details><div class="todo">
<p>Exercises involving computing derivatives</p>
</div>
<div class="takenote">
<p>In the previous discussion, we used phrases such as “every function has a derivative,” or that “any function can be approximated” by a second-order polynomial. For most practical purposes, this is true. In the next chapter, however, we’ll set mathematical conditions on “every” and “any” that will let us see when there can be an exception.</p>
</div>
<div class="objectives">
<ol>
<li>
<strong>[Deriv-10a]</strong> <em>Understand and distinguish between max (min) and argmax (argmin)</em>
</li>
<li>
<strong>[Deriv-10b]</strong> <em>Visually identify max (min) and argmax (argmin) in graphs of functions of one and two variables.</em>
</li>
</ol>
</div>
<div class="objectives">
<ol>
<li>
<strong>[Deriv-10c]</strong> <em>Find max and min of a quadratic function using calculus and algebra</em>
</li>
</ol>
</div>
<div class="objectives">
<ol>
<li>
<strong>[Deriv-11a]</strong> <em>Convert a word problem into an Objective function and constraint.</em>
</li>
<li>
<strong>[Deriv-11b]</strong> <em>Convert a multivariate objective function to a univariate objective function using the constraint</em>
</li>
</ol>
</div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="prod-comp-rules.html"><span class="header-section-number">21</span> Differentiation of assembled functions</a></div>
<div class="next"><a href="partial-change.html"><span class="header-section-number">23</span> Partial change</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#optim-and-shape"><span class="header-section-number">22</span> Optimization</a></li>
<li><a class="nav-link" href="#structure-of-the-problem"><span class="header-section-number">22.1</span> Structure of the problem</a></li>
<li><a class="nav-link" href="#interpreting-the-argmax"><span class="header-section-number">22.2</span> Interpreting the argmax</a></li>
<li><a class="nav-link" href="#derivatives-and-optimization"><span class="header-section-number">22.3</span> Derivatives and optimization</a></li>
<li><a class="nav-link" href="#tree-harvesting"><span class="header-section-number">22.4</span> Tree harvesting</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/dtkaplan/CalcZ-notes/blob/master/Diff-optim.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/dtkaplan/CalcZ-notes/edit/master/Diff-optim.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>CalcZ Student Notes</strong>" was written by Daniel Kaplan. It was last built on 2021-07-01.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
