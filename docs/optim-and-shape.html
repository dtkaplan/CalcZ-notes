<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 16 Optimization | CalcZ Student Notes</title>
  <meta name="description" content="Textbook for Math 141Z/142Z for 2021-2022" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 16 Optimization | CalcZ Student Notes" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Textbook for Math 141Z/142Z for 2021-2022" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 16 Optimization | CalcZ Student Notes" />
  
  <meta name="twitter:description" content="Textbook for Math 141Z/142Z for 2021-2022" />
  

<meta name="author" content="Daniel Kaplan" />


<meta name="date" content="2021-06-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="h-and-derivatives.html"/>
<link rel="next" href="cont-and-smooth.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.18/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/plotly-binding-4.9.4/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/CalcZ-style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">CalcZ</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome to calculus</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#computing-and-apps"><i class="fa fa-check"></i>Computing and apps</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#exercises-and-feedback"><i class="fa fa-check"></i>Exercises and feedback</a></li>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#taken-out.-is-there-any-use-for-it"><i class="fa fa-check"></i><b>0.1</b> [[Taken out. Is there any use for it?]]</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="calcz-project-development-plan.html"><a href="calcz-project-development-plan.html"><i class="fa fa-check"></i>CalcZ Project Development Plan</a>
<ul>
<li class="chapter" data-level="" data-path="calcz-project-development-plan.html"><a href="calcz-project-development-plan.html#development-schedule"><i class="fa fa-check"></i>Development schedule</a></li>
<li class="chapter" data-level="" data-path="calcz-project-development-plan.html"><a href="calcz-project-development-plan.html#resources-from-ay-2020-2021"><i class="fa fa-check"></i>Resources from AY 2020-2021</a>
<ul>
<li class="chapter" data-level="" data-path="calcz-project-development-plan.html"><a href="calcz-project-development-plan.html#software"><i class="fa fa-check"></i>Software</a></li>
<li class="chapter" data-level="" data-path="calcz-project-development-plan.html"><a href="calcz-project-development-plan.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
<li class="chapter" data-level="" data-path="calcz-project-development-plan.html"><a href="calcz-project-development-plan.html#projects-from-ay-2020-2021"><i class="fa fa-check"></i>Projects from AY 2020-2021</a></li>
<li class="chapter" data-level="" data-path="calcz-project-development-plan.html"><a href="calcz-project-development-plan.html#apps"><i class="fa fa-check"></i>Apps</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Block 1: Functions and quantity</b></span></li>
<li class="chapter" data-level="" data-path="outline-of-block-1.html"><a href="outline-of-block-1.html"><i class="fa fa-check"></i>Outline of Block 1</a></li>
<li class="chapter" data-level="1" data-path="change.html"><a href="change.html"><i class="fa fa-check"></i><b>1</b> Change</a>
<ul>
<li class="chapter" data-level="1.1" data-path="change.html"><a href="change.html#quantity-vs-number"><i class="fa fa-check"></i><b>1.1</b> Quantity vs number</a></li>
<li class="chapter" data-level="1.2" data-path="change.html"><a href="change.html#functions"><i class="fa fa-check"></i><b>1.2</b> Functions</a></li>
<li class="chapter" data-level="1.3" data-path="change.html"><a href="change.html#naked-intro"><i class="fa fa-check"></i><b>1.3</b> The naked modeling functions</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="structure-of-a-function.html"><a href="structure-of-a-function.html"><i class="fa fa-check"></i><b>2</b> Structure of a function</a>
<ul>
<li class="chapter" data-level="2.1" data-path="structure-of-a-function.html"><a href="structure-of-a-function.html#domain-input-space"><i class="fa fa-check"></i><b>2.1</b> Domain: input space</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="fun-describing.html"><a href="fun-describing.html"><i class="fa fa-check"></i><b>3</b> Describing functions</a>
<ul>
<li class="chapter" data-level="3.1" data-path="fun-describing.html"><a href="fun-describing.html#computer-commands"><i class="fa fa-check"></i><b>3.1</b> Computer commands</a></li>
<li class="chapter" data-level="3.2" data-path="fun-describing.html"><a href="fun-describing.html#tables-of-inputs-and-outputs"><i class="fa fa-check"></i><b>3.2</b> Tables of inputs and outputs</a></li>
<li class="chapter" data-level="3.3" data-path="fun-describing.html"><a href="fun-describing.html#word-descriptions"><i class="fa fa-check"></i><b>3.3</b> Word descriptions</a></li>
<li class="chapter" data-level="3.4" data-path="fun-describing.html"><a href="fun-describing.html#computer-function-names"><i class="fa fa-check"></i><b>3.4</b> Computer function names</a></li>
<li class="chapter" data-level="3.5" data-path="fun-describing.html"><a href="fun-describing.html#mathematical-notation"><i class="fa fa-check"></i><b>3.5</b> Mathematical notation</a></li>
<li class="chapter" data-level="3.6" data-path="fun-describing.html"><a href="fun-describing.html#exercises-1"><i class="fa fa-check"></i><b>3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="fun-notation.html"><a href="fun-notation.html"><i class="fa fa-check"></i><b>4</b> Notation for functions</a>
<ul>
<li class="chapter" data-level="4.1" data-path="fun-notation.html"><a href="fun-notation.html#a-notation-for-computing"><i class="fa fa-check"></i><b>4.1</b> A notation for computing</a></li>
<li class="chapter" data-level="4.2" data-path="fun-notation.html"><a href="fun-notation.html#objects-and-actions"><i class="fa fa-check"></i><b>4.2</b> Objects and actions</a></li>
<li class="chapter" data-level="4.3" data-path="fun-notation.html"><a href="fun-notation.html#algorithms"><i class="fa fa-check"></i><b>4.3</b> Formulas and algorithms</a></li>
<li class="chapter" data-level="4.4" data-path="fun-notation.html"><a href="fun-notation.html#algorithms-without-formulas"><i class="fa fa-check"></i><b>4.4</b> Algorithms without formulas</a></li>
<li class="chapter" data-level="4.5" data-path="fun-notation.html"><a href="fun-notation.html#computer-notation"><i class="fa fa-check"></i><b>4.5</b> Computer notation</a></li>
<li class="chapter" data-level="4.6" data-path="fun-notation.html"><a href="fun-notation.html#calcz-naming-conventions"><i class="fa fa-check"></i><b>4.6</b> CalcZ naming conventions</a></li>
<li class="chapter" data-level="4.7" data-path="fun-notation.html"><a href="fun-notation.html#functions-in-r"><i class="fa fa-check"></i><b>4.7</b> Functions in R</a></li>
<li class="chapter" data-level="4.8" data-path="fun-notation.html"><a href="fun-notation.html#foursigns"><i class="fa fa-check"></i><b>4.8</b> E unibus plurum: <span class="math inline">\(=\)</span>, <span class="math inline">\(\equiv\)</span>, <span class="math inline">\(\rightarrow\)</span>, <code>&lt;-</code></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="graphs-and-graphics.html"><a href="graphs-and-graphics.html"><i class="fa fa-check"></i><b>5</b> Graphics &amp; function graphs</a>
<ul>
<li class="chapter" data-level="5.1" data-path="graphs-and-graphics.html"><a href="graphs-and-graphics.html#the-graphics-frame"><i class="fa fa-check"></i><b>5.1</b> The graphics frame</a></li>
<li class="chapter" data-level="5.2" data-path="graphs-and-graphics.html"><a href="graphs-and-graphics.html#data-graphics-the-point-plot"><i class="fa fa-check"></i><b>5.2</b> Data graphics: the point plot</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="graphs-and-graphics.html"><a href="graphs-and-graphics.html#asymptotes-of-functions"><i class="fa fa-check"></i><b>5.2.1</b> Asymptotes of functions</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="graphs-and-graphics.html"><a href="graphs-and-graphics.html#function-shapes"><i class="fa fa-check"></i><b>5.3</b> Graphs of the basic functions</a></li>
<li class="chapter" data-level="5.4" data-path="graphs-and-graphics.html"><a href="graphs-and-graphics.html#exercises-in-draft"><i class="fa fa-check"></i><b>5.4</b> EXERCISES in draft</a></li>
<li class="chapter" data-level="5.5" data-path="graphs-and-graphics.html"><a href="graphs-and-graphics.html#inputs-to-output"><i class="fa fa-check"></i><b>5.5</b> Inputs to output</a></li>
<li class="chapter" data-level="5.6" data-path="graphs-and-graphics.html"><a href="graphs-and-graphics.html#outputs-to-inputs"><i class="fa fa-check"></i><b>5.6</b> Outputs to inputs</a></li>
<li class="chapter" data-level="5.7" data-path="graphs-and-graphics.html"><a href="graphs-and-graphics.html#graphs-of-functions-with-two-inputs"><i class="fa fa-check"></i><b>5.7</b> Graphs of functions with two inputs</a></li>
<li class="chapter" data-level="5.8" data-path="graphs-and-graphics.html"><a href="graphs-and-graphics.html#contour-plots"><i class="fa fa-check"></i><b>5.8</b> Contour plots</a></li>
<li class="chapter" data-level="5.9" data-path="graphs-and-graphics.html"><a href="graphs-and-graphics.html#slice-plots"><i class="fa fa-check"></i><b>5.9</b> Slice plots</a></li>
<li class="chapter" data-level="5.10" data-path="graphs-and-graphics.html"><a href="graphs-and-graphics.html#creating-graphics"><i class="fa fa-check"></i><b>5.10</b> Creating graphics</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="params-intro.html"><a href="params-intro.html"><i class="fa fa-check"></i><b>6</b> Parameters for functions</a>
<ul>
<li class="chapter" data-level="6.1" data-path="params-intro.html"><a href="params-intro.html#parallel-scales"><i class="fa fa-check"></i><b>6.1</b> Parallel scales</a></li>
<li class="chapter" data-level="6.2" data-path="params-intro.html"><a href="params-intro.html#scale-the-output"><i class="fa fa-check"></i><b>6.2</b> Scale the output</a></li>
<li class="chapter" data-level="" data-path="params-intro.html"><a href="params-intro.html#exercises-2"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="process-of-modeling.html"><a href="process-of-modeling.html"><i class="fa fa-check"></i><b>7</b> Process of modeling</a>
<ul>
<li class="chapter" data-level="7.1" data-path="process-of-modeling.html"><a href="process-of-modeling.html#variations-from-scaling"><i class="fa fa-check"></i><b>7.1</b> Variations from scaling</a></li>
<li class="chapter" data-level="7.2" data-path="process-of-modeling.html"><a href="process-of-modeling.html#curve-fitting-an-exponential-function"><i class="fa fa-check"></i><b>7.2</b> Curve fitting an exponential function</a></li>
<li class="chapter" data-level="7.3" data-path="process-of-modeling.html"><a href="process-of-modeling.html#curve-fitting-a-periodic-function"><i class="fa fa-check"></i><b>7.3</b> Curve fitting a periodic function</a></li>
<li class="chapter" data-level="7.4" data-path="process-of-modeling.html"><a href="process-of-modeling.html#modeling-periodicity"><i class="fa fa-check"></i><b>7.4</b> Modeling periodicity</a></li>
<li class="chapter" data-level="7.5" data-path="process-of-modeling.html"><a href="process-of-modeling.html#the-modeling-cycle"><i class="fa fa-check"></i><b>7.5</b> The modeling cycle</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="process-of-modeling.html"><a href="process-of-modeling.html#example-cooling-water"><i class="fa fa-check"></i><b>7.5.1</b> Example: Cooling water</a></li>
<li class="chapter" data-level="7.5.2" data-path="process-of-modeling.html"><a href="process-of-modeling.html#example-the-tides"><i class="fa fa-check"></i><b>7.5.2</b> Example: The tides</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="fun-slopes.html"><a href="fun-slopes.html"><i class="fa fa-check"></i><b>8</b> Slope function</a>
<ul>
<li class="chapter" data-level="8.1" data-path="fun-slopes.html"><a href="fun-slopes.html#change-and-slope"><i class="fa fa-check"></i><b>8.1</b> Change and slope</a></li>
<li class="chapter" data-level="8.2" data-path="fun-slopes.html"><a href="fun-slopes.html#continuous-change"><i class="fa fa-check"></i><b>8.2</b> Continuous change</a></li>
<li class="chapter" data-level="8.3" data-path="fun-slopes.html"><a href="fun-slopes.html#slope"><i class="fa fa-check"></i><b>8.3</b> Slope</a></li>
<li class="chapter" data-level="8.4" data-path="fun-slopes.html"><a href="fun-slopes.html#the-fitted-line"><i class="fa fa-check"></i><b>8.4</b> The fitted line</a></li>
<li class="chapter" data-level="8.5" data-path="fun-slopes.html"><a href="fun-slopes.html#average-rate-of-change"><i class="fa fa-check"></i><b>8.5</b> Average rate of change</a></li>
<li class="chapter" data-level="8.6" data-path="fun-slopes.html"><a href="fun-slopes.html#instantaneous-rate-of-change"><i class="fa fa-check"></i><b>8.6</b> Instantaneous rate of change</a></li>
<li class="chapter" data-level="8.7" data-path="fun-slopes.html"><a href="fun-slopes.html#the-slope-function"><i class="fa fa-check"></i><b>8.7</b> The slope function</a></li>
<li class="chapter" data-level="8.8" data-path="fun-slopes.html"><a href="fun-slopes.html#to-be-turned-into-exercises"><i class="fa fa-check"></i><b>8.8</b> To be turned into exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="fun-assembling.html"><a href="fun-assembling.html"><i class="fa fa-check"></i><b>9</b> Assembling functions</a>
<ul>
<li class="chapter" data-level="9.1" data-path="fun-assembling.html"><a href="fun-assembling.html#linear-combination"><i class="fa fa-check"></i><b>9.1</b> Linear combination</a></li>
<li class="chapter" data-level="9.2" data-path="fun-assembling.html"><a href="fun-assembling.html#function-composition"><i class="fa fa-check"></i><b>9.2</b> Function composition</a></li>
<li class="chapter" data-level="9.3" data-path="fun-assembling.html"><a href="fun-assembling.html#modeling-polynomial-1"><i class="fa fa-check"></i><b>9.3</b> The modeling polynomial</a></li>
<li class="chapter" data-level="9.4" data-path="fun-assembling.html"><a href="fun-assembling.html#tukeys-ladder-optional"><i class="fa fa-check"></i><b>9.4</b> Tukey’s ladder (optional)</a></li>
<li class="chapter" data-level="9.5" data-path="fun-assembling.html"><a href="fun-assembling.html#function-multiplication"><i class="fa fa-check"></i><b>9.5</b> Function multiplication</a></li>
<li class="chapter" data-level="9.6" data-path="fun-assembling.html"><a href="fun-assembling.html#all-together-now"><i class="fa fa-check"></i><b>9.6</b> All together now!</a></li>
<li class="chapter" data-level="9.7" data-path="fun-assembling.html"><a href="fun-assembling.html#exercises-3"><i class="fa fa-check"></i><b>9.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="fun-multiple-inputs.html"><a href="fun-multiple-inputs.html"><i class="fa fa-check"></i><b>10</b> Functions with multiple inputs</a>
<ul>
<li class="chapter" data-level="10.1" data-path="fun-multiple-inputs.html"><a href="fun-multiple-inputs.html#fx-times-gt"><i class="fa fa-check"></i><b>10.1</b> f(x) times g(t)</a></li>
<li class="chapter" data-level="10.2" data-path="fun-multiple-inputs.html"><a href="fun-multiple-inputs.html#two-variable-modeling-polynomial"><i class="fa fa-check"></i><b>10.2</b> Two-variable modeling polynomial</a></li>
<li class="chapter" data-level="10.3" data-path="fun-multiple-inputs.html"><a href="fun-multiple-inputs.html#function-composition-not"><i class="fa fa-check"></i><b>10.3</b> Function composition (not!)</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="fun-piecewise.html"><a href="fun-piecewise.html"><i class="fa fa-check"></i><b>11</b> Piecewise functions</a>
<ul>
<li class="chapter" data-level="11.1" data-path="fun-piecewise.html"><a href="fun-piecewise.html#piecewise-functions"><i class="fa fa-check"></i><b>11.1</b> Piecewise functions</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="magnitudes.html"><a href="magnitudes.html"><i class="fa fa-check"></i><b>12</b> Magnitudes</a>
<ul>
<li class="chapter" data-level="12.1" data-path="magnitudes.html"><a href="magnitudes.html#counting-digits"><i class="fa fa-check"></i><b>12.1</b> Counting digits</a></li>
<li class="chapter" data-level="12.2" data-path="magnitudes.html"><a href="magnitudes.html#using-digit-to-understand-magnitude"><i class="fa fa-check"></i><b>12.2</b> Using digit() to understand magnitude</a></li>
<li class="chapter" data-level="12.3" data-path="magnitudes.html"><a href="magnitudes.html#composing-ln-with-exponential-and-power-law-functions"><i class="fa fa-check"></i><b>12.3</b> Composing <span class="math inline">\(\ln()\)</span> with exponential and power-law functions</a></li>
<li class="chapter" data-level="12.4" data-path="magnitudes.html"><a href="magnitudes.html#fractional-digits"><i class="fa fa-check"></i><b>12.4</b> Fractional digits (optional)</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="dimensions.html"><a href="dimensions.html"><i class="fa fa-check"></i><b>13</b> Dimensions</a></li>
<li class="part"><span><b>II Block 2: Differentiation</b></span></li>
<li class="chapter" data-level="" data-path="outline-of-block-2.html"><a href="outline-of-block-2.html"><i class="fa fa-check"></i>Outline of Block 2</a></li>
<li class="chapter" data-level="14" data-path="change-relationships.html"><a href="change-relationships.html"><i class="fa fa-check"></i><b>14</b> Change relationships</a>
<ul>
<li class="chapter" data-level="14.1" data-path="change-relationships.html"><a href="change-relationships.html#slopes-and-increments."><i class="fa fa-check"></i><b>14.1</b> Slopes and increments.</a></li>
<li class="chapter" data-level="14.2" data-path="change-relationships.html"><a href="change-relationships.html#slopes-and-motion"><i class="fa fa-check"></i><b>14.2</b> Slopes and motion</a></li>
<li class="chapter" data-level="14.3" data-path="change-relationships.html"><a href="change-relationships.html#differentiation"><i class="fa fa-check"></i><b>14.3</b> Differentiation</a></li>
<li class="chapter" data-level="14.4" data-path="change-relationships.html"><a href="change-relationships.html#dimension-of-derivatives"><i class="fa fa-check"></i><b>14.4</b> Dimension of derivatives</a></li>
<li class="chapter" data-level="14.5" data-path="change-relationships.html"><a href="change-relationships.html#using-h"><i class="fa fa-check"></i><b>14.5</b> Using h</a></li>
<li class="chapter" data-level="14.6" data-path="change-relationships.html"><a href="change-relationships.html#differencing"><i class="fa fa-check"></i><b>14.6</b> Differencing</a></li>
<li class="chapter" data-level="14.7" data-path="change-relationships.html"><a href="change-relationships.html#instantaneous-rate-of-change-1"><i class="fa fa-check"></i><b>14.7</b> Instantaneous rate of change</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="h-and-derivatives.html"><a href="h-and-derivatives.html"><i class="fa fa-check"></i><b>15</b> h and derivatives</a>
<ul>
<li class="chapter" data-level="15.1" data-path="h-and-derivatives.html"><a href="h-and-derivatives.html#the-h-framework"><i class="fa fa-check"></i><b>15.1</b> The <span class="math inline">\(h\)</span> framework</a></li>
<li class="chapter" data-level="15.2" data-path="h-and-derivatives.html"><a href="h-and-derivatives.html#approximations-to-naked-modeling-functions"><i class="fa fa-check"></i><b>15.2</b> Approximations to naked modeling functions</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="optim-and-shape.html"><a href="optim-and-shape.html"><i class="fa fa-check"></i><b>16</b> Optimization</a>
<ul>
<li class="chapter" data-level="16.1" data-path="optim-and-shape.html"><a href="optim-and-shape.html#structure-of-the-problem"><i class="fa fa-check"></i><b>16.1</b> Structure of the problem</a></li>
<li class="chapter" data-level="16.2" data-path="optim-and-shape.html"><a href="optim-and-shape.html#interpreting-the-argmax"><i class="fa fa-check"></i><b>16.2</b> Interpreting the argmax</a></li>
<li class="chapter" data-level="16.3" data-path="optim-and-shape.html"><a href="optim-and-shape.html#derivative-and-optimization"><i class="fa fa-check"></i><b>16.3</b> Derivative and optimization</a></li>
<li class="chapter" data-level="16.4" data-path="optim-and-shape.html"><a href="optim-and-shape.html#approximations-around-xstar"><i class="fa fa-check"></i><b>16.4</b> Approximations around <span class="math inline">\(x^\star\)</span></a></li>
<li class="chapter" data-level="16.5" data-path="optim-and-shape.html"><a href="optim-and-shape.html#solving-computationally"><i class="fa fa-check"></i><b>16.5</b> Solving computationally</a></li>
<li class="chapter" data-level="16.6" data-path="optim-and-shape.html"><a href="optim-and-shape.html#use-case-risk-of-earthquakes"><i class="fa fa-check"></i><b>16.6</b> Use case: Risk of earthquakes</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="cont-and-smooth.html"><a href="cont-and-smooth.html"><i class="fa fa-check"></i><b>17</b> Continuity and smoothness</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">CalcZ Student Notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="optim-and-shape" class="section level1" number="16">
<h1><span class="header-section-number">Chapter 16</span> Optimization</h1>
<p>To “optimize” means to make something as good as possible with the available resources. Optimization problems are common in science, logistics, industry, and any other area where one seeks the best solution to a problem. Some everyday examples:</p>
<ul>
<li>How much salt to add to a stew. Stews can be too salty, or they can be not salty enough. Somewhere in the middle is the optimum.</li>
<li>When to harvest trees being grown for lumber. Harvest too soon and you might be losing out on the prime growing years. Wait too long and trees will have settled in to slow growth, if any.</li>
<li>Walking up too steep a slope is tiring and slows you down; that’s why hiking trails have switchbacks. When the switchbacks are too shallow, it takes a long time to cover the distance. What’s the most efficient angle to enable hikers to get up the hill in the shortest time.</li>
</ul>
<div id="structure-of-the-problem" class="section level2" number="16.1">
<h2><span class="header-section-number">16.1</span> Structure of the problem</h2>
<p>In an optimization problem, there is one or more input quantity whose value you have to choose. The amount of salt; the years to wait from planting to harvesting a tree; the angle of the trail with respect to the slope. We’ll call this the <strong><em>decision quantity</em></strong>.</p>
<p>Similarly, there is one or more output quantity that you value and want to make as good as possible. The taste of the stew; the income produced by selling the lumber; the time it takes to walk up the hill. The output quantity is called the <strong><em>objective</em></strong>.</p>
<p>The model that relates to inputs to the objective output is called the <strong><em>objective function</em></strong>. Solving an optimization problem—once the modeling phase is complete—amounts to finding a value for the decision quantity (the input to the objective function) that produces the best level of the objective (the output from the objective function).</p>
<p>Sometimes the objective is something that you want to <strong><em>minimize</em></strong>, make as small as possible. In the hiking trail problem, we seek to minimize the amount of time it takes to walk up the trail. Sometimes you want to <strong><em>maximize</em></strong> the objective, as in the wood-harvest problem where the objective is to harvest the most wood per year.</p>
<p>Mathematically, maximization and minimization are the same thing. Every minimization problem can be turned into a maximization problem by putting a negative sign in front of the objective function. To simplify the discussion, in talking about finding the solution to an optimization problem we’ll imagine that the goal is to maximize. But keep in mind that many circumstances in the real world, “best” can mean to minimization.</p>
<p>The solution you seek in a maximization problem is called the <strong><em>argmax</em></strong>. This is a contraction of two words: the <em>argument</em> (that is, input) that produces the <em>maximum</em> output. (For minimization, the solution is the ***argmin.)</p>
<p>Once you have found the argmax you can plug that value into the objective function to find the value of the output. That value is the <strong><em>maximum</em></strong>.</p>
<div class="takenote">
<p>People often talk about “finding the maximum.” This is misleading. The setup for an optimization problem is:</p>
<ol style="list-style-type: decimal">
<li>Construct (that is, model) the objective function.</li>
<li>Now that you know the objective function, find the input to that function—that is, the <strong>argmax</strong>—that produces the maximum output.</li>
</ol>
</div>
<p>To illustrate the setup of an optimization problem, imagine yourself in the situation of a contest to see who can shoot a tennis ball the farthest into a field with a slingshot. During the contest, you will adjust the vertical angle of launch, place the ball into the slingshot’s cradle, pull back as far as possible, and let go. To win the contest, you need to optimize how you launch the ball.</p>
<p>The objective is the distance travelled by the ball. For simplicity, we’ll imagine that the velocity of the ball at release is fixed at <span class="math inline">\(v_0\)</span>. You’ll win or lose based on the angle of launch you choose.</p>
<p>Before you head out into the field to experiment, let’s do a bit of preparation. We’ll model how far the ball will travel (horizontally) as a function of the angle of launch <span class="math inline">\(\theta\)</span> and the initial velocity <span class="math inline">\(v_0\)</span>.</p>
<p>The mathematics of such problems involves an area called <strong><em>differential equations</em></strong>, an important part of calculus which we’ll come to later in the course. Since you don’t have the tools yet, we’ll just state a simple model of how long the ball stays in the air.
<span class="math display">\[\text{duration}(v_0, \theta) = 2 v_0 \sin(\theta)/g\]</span> <span class="math inline">\(g\)</span> is the acceleration due to gravity, which is about <span class="math inline">\(9.8 \text{m}\text{s}^{-2}\)</span>, assuming that the contest is being held on Earth.</p>
<p>The horizontal distance travelled by the tennis ball will be <span class="math display">\[\text{hdist}(v_0, \theta) = \cos(\theta) v_0\, \text{duration}(v_0, \theta) = 2 v_0^2 \cos(\theta)\sin(\theta) / g\]</span>
Our objective function is hdist(), and we seek to find the argmax. The input <span class="math inline">\(v_0\)</span> is (we have assumed) fixed, so the decision quantity is the angle <span class="math inline">\(\theta\)</span>.</p>
<p>The best choice of <span class="math inline">\(\theta\)</span> will make the quantity <span class="math inline">\(\cos(\theta)\sin(\theta)\)</span> as large as possible. So in finding the argmax, we don’t need to be concerned with <span class="math inline">\(v_0\)</span> or <span class="math inline">\(g\)</span>.</p>
<p>Finding the argmax can be accomplished simply by plotting the function <span class="math inline">\(\cos(\theta)\sin(\theta)\)</span>. We’ll implement the function so that the input is in units of <em>degrees</em>.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="optim-and-shape.html#cb105-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(<span class="fu">cos</span>(pi<span class="sc">*</span>theta<span class="sc">/</span><span class="dv">180</span>)<span class="sc">*</span><span class="fu">sin</span>(pi<span class="sc">*</span>theta<span class="sc">/</span><span class="dv">180</span>) <span class="sc">~</span> theta)</span>
<span id="cb105-2"><a href="optim-and-shape.html#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="fu">slice_plot</span>(<span class="fu">f</span>(theta) <span class="sc">~</span> theta, <span class="fu">domain</span>(<span class="at">theta=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">90</span>)))</span>
<span id="cb105-3"><a href="optim-and-shape.html#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="fu">slice_plot</span>(<span class="fu">f</span>(theta) <span class="sc">~</span> theta, <span class="fu">domain</span>(<span class="at">theta =</span> <span class="fu">c</span>(<span class="dv">40</span>, <span class="dv">50</span>)))</span></code></pre></div>
<div class="figure"><span id="fig:ball-theta"></span>
<img src="CalcZ-notes_files/figure-html/ball-theta-1.png" alt="The distance travelled by a ball launched at an angle of $\theta$$, according to the simple model is duration of flight and distance travelled." width="672" /><img src="CalcZ-notes_files/figure-html/ball-theta-2.png" alt="The distance travelled by a ball launched at an angle of $\theta$$, according to the simple model is duration of flight and distance travelled." width="672" />
<p class="caption">
Figure 16.1: The distance travelled by a ball launched at an angle of <span class="math inline">\(\theta\)</span>$, according to the simple model is duration of flight and distance travelled.
</p>
</div>
<p>From the graph, especially the zoomed-in version, you can read off the argmax as <span class="math inline">\(\theta = 45^\circ\)</span>.</p>
<p>Finding the argmax solves the problem. You may also want to present your solution by saying what the value of the output of hdist() is when the argmax is given as input. You can read off the graph that the maximum of <span class="math inline">\(\cos(\theta)\sin(\theta)\)</span> is 0.5 at <span class="math inline">\(\theta = 45^\circ\)</span>, so overall the distance will be <span class="math inline">\(v_0^2 / g\)</span>
:::</p>
<p>Review Exercise: What is the dimension of <span class="math inline">\(v_0^2 / g\)</span>?</p>
</div>
<div id="interpreting-the-argmax" class="section level2" number="16.2">
<h2><span class="header-section-number">16.2</span> Interpreting the argmax</h2>
<p>The graphical solution given to the slingshot problem is entirely satisfactory. Whether that solution will win the contest depends of course on whether the model we built for the objective function is correct. There are potentially important things we have left out, such as air resistence.</p>
<p>Solving the optimization problem has prepared us to go out in the field and test the result. Perhaps we’ll find that the real-world optimum angle is somewhat steeper or shallower than <span class="math inline">\(\theta = 45^\circ\)</span>.</p>
<p>Besides the argmax, another important quantity to read from the graph in Figure <a href="optim-and-shape.html#fig:ball-theta">16.1</a> is the <strong><em>precision</em></strong> of the argmax. In strict mathematical terms, the argmax is exactly 45 degrees. But in practical terms, it may not matter so much to the outcome if we are a little away from <span class="math inline">\(45^\circ\)</span>. For example, according to the model, any angle in the range <span class="math inline">\(40^\circ &lt; \theta &lt; 50^\circ\)</span> would produce an output that is within 1% of the distance reached at the argmax.</p>
<p>Contests are won or lost by margins of less than 1%, so you should not casually deviate from the argmax. On the other hand, <span class="math inline">\(45^\circ\)</span> is the argmax of the <em>model</em>. Reality may deviate from the model. For instance, suppose that air resistance or wind might might have an effect of about 1% on the distance. You can expect that such factors might change the optimal angle by as much or more than <span class="math inline">\(\pm 5^\circ\)</span>.</p>
</div>
<div id="derivative-and-optimization" class="section level2" number="16.3">
<h2><span class="header-section-number">16.3</span> Derivative and optimization</h2>
<p>We’re now going to reframe the search for the argmax and it’s interpretation in terms of derivatives of the objective function with respect to the decision quantity (<span class="math inline">\(\theta\)</span> in the slingshot problem). For a function of one variable, this will not be an improvement from the look-at-the-graph technique to find the argmax. A genuine reason to use derivatives is to set us up in the future to solve problems with more than one variable, where it is hard to draw or interpret a graph. Also, describing functions in the language of derivatives can help us think more clearly about aspects of the problem, such as the precision of the argmax.</p>
<p>With a graph such as Figure <a href="optim-and-shape.html#fig:ball-theta">16.1</a>, it’s easy to find the argmax; common sense carries the day. So it won’t be obvious at first why we are going to take the following approach:</p>
<p>Let’s denote an argmax of the objective function <span class="math inline">\(f(x)\)</span> by <span class="math inline">\(x^\star\)</span>.
Let’s look at the derivative <span class="math inline">\(\partial_x f(x)\)</span> in the neighborhood of <span class="math inline">\(x^\star\)</span>. Referring to Figure <a href="optim-and-shape.html#fig:ball-theta">16.1</a>, where <span class="math inline">\(x^\star = 45^\circ\)</span>, you may be able to see that <span class="math inline">\(\partial_x f(x^\star)\)</span> is zero; the line tangent to the function’s graph at <span class="math inline">\(x^\star\)</span> is flat.</p>
<p>Seen another way, the slope of <span class="math inline">\(f(x)\)</span> to the left of <span class="math inline">\(x^\star\)</span> is positive; moving a tiny bit to the right (that is, increasing <span class="math inline">\(x\)</span> by a very small amount, leads to an increase in the output <span class="math inline">\(f(x)\)</span>. Intuitively, as you approach the peak of a hill, you are walking uphill.) Just to the right of <span class="math inline">\(x^\star\)</span>, the slope of <span class="math inline">\(f(x)\)</span> is negative; as you reach the top of a hill and continue on, you will be going downhill. So the derivative function is positive on one side of <span class="math inline">\(x^\star\)</span> and negative on the other, suggesting that it crosses zero at the argmax.</p>
<p>Inputs <span class="math inline">\(x^\star\)</span> such that <span class="math inline">\(\partial_x f(x^\star) = 0\)</span> are called <strong><em>critical points</em></strong>. Why not call them simply argmaxes? Because a the slope will also be zero at an argmin. And it’s even possible to have the slope be zero at a point that’s neither an argmin or an argmax.</p>
<div class="etude-question">
<p><strong>Question tmp-53</strong>: Consider the function <span class="math inline">\(f(x) \equiv x^3\)</span>. Confirm that the value of the derivative <span class="math inline">\(\partial_x f(x = 0)\)</span> and so <span class="math inline">\(x^\star = 0\)</span> is a critical point. Which sort of critical point is <span class="math inline">\(x^\star=0\)</span>? (Hint: Draw the graph of <span class="math inline">\(f(x)\)</span> near <span class="math inline">\(x=0\)</span> to see what’s going on.)</p>
<ol>
<li><p>An argmax [But <span class="math inline">\(f(0) &lt; f(x &gt; 0)\)</span>, so <span class="math inline">\(x^\star=0\)</span> can’t be an argmax.]</p></li>
<li><p>An argmin [But <span class="math inline">\(f(x &lt; 0) &lt; f(0)\)</span>, so <span class="math inline">\(x^\star=0\)</span> can’t be an argmin.]</p></li>
<li><p>Neither (+) []</p></li>
</ol>
</div>
<p>At this point, we know that values <span class="math inline">\(x^\star\)</span> that give <span class="math inline">\(\partial_x f(x^\star) = 0\)</span> are “critical points,” but we haven’t said how to figure out whether a given critical point is an argmax, an argmin, or neither. This is where the behavior of <span class="math inline">\(\partial_x f(x)\)</span> <em>near</em> x=x^$ is important. If <span class="math inline">\(x^\star\)</span> is an argmax, then <span class="math inline">\(\partial_x f(x)\)</span> will be positive to the left of <span class="math inline">\(x^\star\)</span> and negative to the right of <span class="math inline">\(x^\star\)</span>; walk up the hill to get to <span class="math inline">\(x^\star\)</span>, at the top the hill is flat, and just past the top the hill has a negative slope.</p>
<p>For an argmin, changing <span class="math inline">\(x\)</span> from less than <span class="math inline">\(x^\star\)</span> to greater than <span class="math inline">\(x\star\)</span>; you will be walking down into the valley, then level at the very bottom <span class="math inline">\(x=x^\star\)</span>, then back up the other side of the valley after you pass <span class="math inline">\(x=x^\star\)</span>. Figure <a href="optim-and-shape.html#fig:d2-hill">16.2</a> shows the situation.</p>
<pre><code>## Warning: geom_vline(): Ignoring `mapping` because `xintercept` was provided.

## Warning: geom_vline(): Ignoring `mapping` because `xintercept` was provided.

## Warning: geom_vline(): Ignoring `mapping` because `xintercept` was provided.

## Warning: geom_vline(): Ignoring `mapping` because `xintercept` was provided.</code></pre>
<div class="figure"><span id="fig:d2-hill"></span>
<img src="CalcZ-notes_files/figure-html/d2-hill-1.png" alt="Top row: An objective function near an argmax (left) and an argmin (right). Bottom row: The derivative of the objective function" width="50%" /><img src="CalcZ-notes_files/figure-html/d2-hill-2.png" alt="Top row: An objective function near an argmax (left) and an argmin (right). Bottom row: The derivative of the objective function" width="50%" /><img src="CalcZ-notes_files/figure-html/d2-hill-3.png" alt="Top row: An objective function near an argmax (left) and an argmin (right). Bottom row: The derivative of the objective function" width="50%" /><img src="CalcZ-notes_files/figure-html/d2-hill-4.png" alt="Top row: An objective function near an argmax (left) and an argmin (right). Bottom row: The derivative of the objective function" width="50%" />
<p class="caption">
Figure 16.2: Top row: An objective function near an argmax (left) and an argmin (right). Bottom row: The derivative of the objective function
</p>
</div>
<p>The bottom row of graphs in Figure <a href="optim-and-shape.html#fig:d2-hill">16.2</a> shows the derivative of the objective function <span class="math inline">\(f(x)\)</span>, that is, <span class="math inline">\(\partial_x f(x)\)</span>. You can see that for the argmax of <span class="math inline">\(f(x)\)</span>, the derivative <span class="math inline">\(\partial_x f(x)\)</span> is positive to the left and negative to the right. Similarly, near the argmin of <span class="math inline">\(f(x)\)</span>, the derivative <span class="math inline">\(\partial_x f(x)\)</span> is negative to the left and positive to the right.</p>
<p>Stated another way, the derivative <span class="math inline">\(\partial_x f(x)\)</span> has a positive slope near an argmin and a negative slope near an argmax.</p>
<p>Just as we differentiate <span class="math inline">\(f(x)\)</span> to find it’s slope, so to find the slope of the function <span class="math inline">\(\partial_x f(x)\)</span> we can differentiate it. The result is called the <strong><em>second derivative</em></strong>. We could write it <span class="math inline">\(\partial_x \left[\partial_x f(x)\right]\)</span>, but for brevity we write it <span class="math inline">\(\partial_{xx} f(x)\)</span>.</p>
<p>The second derivative of the objective function <span class="math inline">\(f(x)\)</span> at a critical point <span class="math inline">\(x^\star\)</span> is what tells us whether the critical point is an argmax, an argmin, or neither.</p>
<table>
<thead>
<tr class="header">
<th>Critical point <span class="math inline">\(x^\star\)</span></th>
<th><span class="math inline">\(\partial_x f(x^\star)\)</span></th>
<th><span class="math inline">\(\partial_{xx} f(x^\star)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>argmax</td>
<td>0</td>
<td>negative</td>
</tr>
<tr class="even">
<td>argmin</td>
<td>0</td>
<td>positive</td>
</tr>
<tr class="odd">
<td>neither</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<div class="etude-question">
<p><strong>Question tmp-54</strong>: Returning to the function <span class="math inline">\(f(x) \equiv x^3\)</span>, find the value of the second-derivative <span class="math inline">\(\partial_{xx} f(x^\star)\)</span> evaluated at the critical point <span class="math inline">\(x = x^\star = 0\)</span>. Which of these is <span class="math inline">\(\partial_{xx} f( x=0\)</span>?</p>
<ol>
<li><p>Negative [But you established in the previous exercise that the critical point <span class="math inline">\(x^\star=0\)</span> is neither an argmin nor wan argmax.]</p></li>
<li><p>Positive [But you established in the previous exercise that the critical point <span class="math inline">\(x^\star=0\)</span> is neither an argmin nor wan argmax.]</p></li>
<li><p>Zero (+) []</p></li>
</ol>
</div>
<div class="why">
<p>When we differentiate a function <span class="math inline">\(f(x)\)</span>, we produce a new function that we can call anything we like. To help readers follow the thread of the story, it’s nice to name the new function <span class="math inline">\(\partial_x f(x)\)</span>. That signals clearly to the reader the origins of the new function with respect to the original function <span class="math inline">\(f(x)\)</span>.</p>
<p>In words, <span class="math inline">\(\partial_x f(x)\)</span> is often called the <strong><em>derivative</em></strong> of <span class="math inline">\(f(x)\)</span> (with respect to x). To “derive” is a very general term and could mean just about any way of creating something new from something old. In calculus, “derivative” always means “created by differentiation.” Perhaps it would have been better if history had led us to call <span class="math inline">\(\partial_x f(x)\)</span> by the name “differentiated <span class="math inline">\(f(x)\)</span>” or “the differential function of <span class="math inline">\(f(x)\)</span>.”</p>
</div>
<p>Graphically, we can read the second derivative <span class="math inline">\(\partial_{xx} f(x)\)</span> as the slope of the first derivative <span class="math inline">\(\partial_x f(x)\)</span> or as the <strong><em>concavity</em></strong> of the function <span class="math inline">\(f(x)\)</span> itself. When <span class="math inline">\(\partial_{xx} f(x) &lt; 0\)</span>, then <span class="math inline">\(f(x)\)</span> is <strong><em>concave down</em></strong> (a frown). Likewise, when <span class="math inline">\(\partial_{xx} f(x) &gt;0\)</span> the <span class="math inline">\(f(x)\)</span> is <strong><em>concave up</em></strong> (a smile). When <span class="math inline">\(\partial_{xx} f(x) = 0\)</span>, then <span class="math inline">\(f(x)\)</span> has no curvature.</p>
<div class="takenote">
<p>To this point, we’ve translated features of functions that are evident on a graph into the language of derivatives:</p>
<ol style="list-style-type: lower-roman">
<li>The <strong>slope</strong> of a function <span class="math inline">\(f(x)\)</span> at any input <span class="math inline">\(x\)</span> is the <strong>value</strong> of the derivative function <span class="math inline">\(\partial_x f(x)\)</span> at that same <span class="math inline">\(x\)</span>.</li>
<li>The <strong>concavity</strong> of a function <span class="math inline">\(f(x)\)</span> at any input is the <strong>slope</strong> of the derivative function, that is, <span class="math inline">\(\partial_x f(x)\)</span>.</li>
<li>Putting (i) and (ii) together, we get that the <strong>concavity</strong> of a function <span class="math inline">\(f(x)\)</span> at any input <span class="math inline">\(x\)</span> is the <strong>value of the second derivative</strong> function, that is, <span class="math inline">\(\partial_{xx} f(x)\)</span>.</li>
<li>At an argmax <span class="math inline">\(x^\star\)</span> of <span class="math inline">\(f(x)\)</span>, the value of the derivative function <span class="math inline">\(\partial_x f(x^\star)\)</span> is zero and the value of the second derivative function <span class="math inline">\(\partial_{xx} f(x^\star)\)</span> is <strong>negative</strong>. (The situation at an argmin is similar, the derivative of the objective function is zero and the second derivative is <strong>positive</strong>.)</li>
</ol>
</div>
<div class="workedexample">
<p>What’s the critical point?</p>
<p>You’re familiar with the quadratic polynomial: <span class="math display">\[g(x) = a_0 + a_1 x + a_2 x^2\]</span>
The graph of a quadratic polynomial is a <strong><em>parabola</em></strong>, which might be concave up or concave down. As you know, a parabola has only one critical point, which might be an argmin or an argmax.</p>
<p>Let’s find the critical point. We know that the critical point is <span class="math inline">\(x^\star\)</span> such that <span class="math inline">\(\partial_x g(x_0) = 0\)</span>. Since we know how to differentiate a power law, we can see that
<span class="math display">\[\partial_x g(x) = a_1 + 2 a_2 x\]</span> and, more specifically, at the critical point <span class="math inline">\(x^\star\)</span> the derivative will be
<span class="math display">\[a_1 + 2 a_2 x^\star = 0\]</span>
The above is an equation, not a definition. It says that whatever <span class="math inline">\(x^\star\)</span> happens to be, the quantity <span class="math inline">\(a_1 + 2 a_2 x^\star\)</span> must be zero. Using plain old algebra, we can find the location of the critical point <span class="math display">\[x^\star = -\frac{a_1}{2 a_2}\]</span></p>
</div>
<div class="todo">
<p>Exercises involving computing derivatives</p>
</div>
</div>
<div id="approximations-around-xstar" class="section level2" number="16.4">
<h2><span class="header-section-number">16.4</span> Approximations around <span class="math inline">\(x^\star\)</span></h2>
<p>Starting with just the naked modeling functions (e.g. <span class="math inline">\(e^t\)</span>), you have a small but rich set of mathematical operations that enables you to make a huge variety of functions to suit a big range of modeling needs:</p>
<ul>
<li><strong><em>input scaling</em></strong>, which turns the naked modeling functions into the more directly useful basic modeling functions.</li>
<li><strong><em>linear combinations</em></strong> of functions, e.g. <span class="math inline">\(A + B e^{-kt}\)</span></li>
<li><strong><em>compositions</em></strong> of functions, e.g. <span class="math inline">\(e^{-kt^2}\)</span> which you can recognize as the composition of an exponential with a power-law function.</li>
<li><strong><em>products</em></strong> of functions, e.g., <span class="math inline">\(\sin\left(\frac{2\pi}{P}x\right) e^{-kt}\)</span></li>
</ul>
<p>Now we want to tame this profusion of possibilities and consider a way to construct stand-ins for any function, using a universal format that needs a minimum of information and can be used for many purposes <strong><em>in place of</em></strong> the original function. It’s helpful to have a name for the stand-ins that reminds us of whom they are stand-ins for. If the original function is <span class="math inline">\(f(x)\)</span>, we’ll write the names of the stand-ins with a tilde, as in <span class="math inline">\(\widetilde{\,f\ }(x)\)</span>.</p>
<p>The stand-in functions are intended to be much simpler than the original but useable as a substitute for the original. The catch is that the stand-in is warranteed to be a good substitute only <strong><em>within a small neighborhood</em></strong> of the domain of the origin.</p>
<p>The information we need to construct the stand-ins is very limited. First, we need to specify where the warranteed neighborhood is. We’ll tend to use <span class="math inline">\(x_0\)</span> as identifying the center of that neighborhood. We’ll also need <span class="math inline">\(f(x_0)\)</span>, the output of the original function when the input is <span class="math inline">\(x_0\)</span>, and <span class="math inline">\(\partial_x f(x_0)\)</span> and <span class="math inline">\(\partial_{xx} f(x_0)\)</span>.<br />
::: {.takenote}
This is a good time to remind you of the notation conventions that we are using to write about functions and evaluating functions.</p>
<p>A <strong><em>function</em></strong> with all its individual characteristics and idiosyncracies is written <span class="math inline">\(f(x)\)</span>: the function name and the name of the input or inputs. The <strong><em>name of this function</em></strong> is <span class="math inline">\(f()\)</span>. The name of the input to <span class="math inline">\(f()\)</span> is <span class="math inline">\(x\)</span>, or whatever is the input name that was given in the parentheses following the name.</p>
<p>Every function has a derivative function. We could call that derivative function anything we like, but it’s sensible to give it a name that states explicitly where it comes from. We’re using <span class="math inline">\(\partial_x f(x)\)</span> for this purpose. Similarly, the name we use for the second derivative is <span class="math inline">\(\partial_{xx} f(x)\)</span>.</p>
<p>Evaluating a function means to specify a particular value for the input. We use several ways of making it clear when we are talking about a particular value of the input, e.g.
<span class="math display">\[\mbox{function output:}\ \ \ f(x = 3)\ \ \ \text{or}\ \ f(3)\ \ \ \text{or}\ \ \left.f(x)\strut\right|_{x=3}\]</span>
The output of such an evaluated function is a quantity.</p>
<p>Sometimes we want to refer to the output for some particular input, but <em>we don’t have that specific quantity pinned down yet</em>. Our preferred style for writing this is to use a name that is similar to an input name, but which has a subscript as in <span class="math inline">\(x_0\)</span>, <span class="math inline">\(x_1\)</span>, <span class="math inline">\(x_i\)</span>, <span class="math inline">\(x_\star\)</span> or, occasionally, a superscript as in <span class="math inline">\(x^\star\)</span>. The output of the function is then written like this:
<span class="math display">\[\mbox{function output:}\ \ \ f(x = x_0)\ \ \ \text{or}\ \ f(x_0)\ \ \ \text{or}\ \ \left.f(x)\strut\right|_{x=x_0}\]</span>
This same style applies when the function has a name like <span class="math inline">\(\partial_x f()\)</span> or <span class="math inline">\(\partial_{xx} f()\)</span>, for instance</p>
<p><span class="math display">\[\mbox{function output:}\ \ \ \partial_x f(x = x_0)\ \ \ \text{or}\ \ \partial_x f(x_0)\ \ \ \text{or}\ \ \left.\partial_x f(x)\strut\right|_{x=x_0}\]</span>
:::</p>
<p>Here are two universal formats that can be used to construct a stand-in for <em>any</em> function near a particular input <span class="math inline">\(x_0\)</span>. Since it’s useful to have a name for the stand-in, we’ll use a tilde on top of the original function name:</p>
<ul>
<li>First-order approximation: <span class="math inline">\(\widetilde{f_1}(x) \equiv f(x_0) + \partial_x f(x_0) (x-x_0)\)</span></li>
<li>Second-order approximation: <span class="math inline">\(\widetilde{f_2}(x) \equiv f(x_0) + \partial_x f(x_0) [x-x_0] + \frac{1}{2} \partial_{xx} f(x_0) [x - x_0]^2\)</span></li>
</ul>
<p>Notice that the first two terms of <span class="math inline">\(\widetilde{f_2}(x)\)</span> are identical to <span class="math inline">\(\widetilde{f_1}(x)\)</span>, so we could write the second-order approximation as
<span class="math display">\[\widetilde{f_2}(x) \equiv \widetilde{f_1}(x) +\frac{1}{2} \partial_{xx} f(x_0) [x-x_0]^2\]</span></p>
<p>The first-order approximation <span class="math inline">\(\widetilde{f_1}(x)\)</span> is nothing more than the straight-line function whose graph is tangent to the graph of <span class="math inline">\(f(x)\)</span> at the input <span class="math inline">\(x=x_0\)</span>.</p>
<p>The second-order approximation is a quadratic polynomial. Being quadratic, its graph is the familiar parabola. The graph of <span class="math inline">\(\widetilde{f_2}(x)\)</span> is the parabola that is tangent to the graph of <span class="math inline">\(f(x)\)</span>.</p>
<div class="workedexample">
<p>Consider the function <span class="math inline">\(g(x)\)</span> whose graph is shown in Figure <a href="#fig:ds-g"><strong>??</strong></a>.</p>
<pre><code>## Warning: geom_vline(): Ignoring `mapping` because `xintercept` was provided.

## Warning: geom_vline(): Ignoring `mapping` because `xintercept` was provided.</code></pre>
<p><img src="CalcZ-notes_files/figure-html/ds-g-1.png" width="672" />
We haven’t given you a formula for <span class="math inline">\(g(x)\)</span>, but you can see that it isn’t any of the basic modeling functions but something more complicated. We’re going to construct a first-order and second-order approximation to <span class="math inline">\(g(x)\)</span> in a neighborhood <span class="math inline">\(x_0 = -1\)</span> as marked by the blue shaded area.</p>
<p>Note that <span class="math inline">\(x_0\)</span> is not an argmin of <span class="math inline">\(g(x)\)</span>. You can see that the argmin is a little to the right of <span class="math inline">\(x_0\)</span>.</p>
<p>The “facts” about <span class="math inline">\(g(x)\)</span> that are needed to construct the approximations, beyond the specification of the location of the neighborhood <span class="math inline">\(x_0\)</span>, are the values <span class="math inline">\(g(x_0)\)</span>, <span class="math inline">\(\partial_x g(x_0)\)</span>, and <span class="math inline">\(\partial_{xx} g(x_0)\)</span>. These are:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="optim-and-shape.html#cb108-1" aria-hidden="true" tabindex="-1"></a>x0 <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb108-2"><a href="optim-and-shape.html#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="fu">g</span>(x0)</span></code></pre></div>
<pre><code>## [1] -23.992</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="optim-and-shape.html#cb110-1" aria-hidden="true" tabindex="-1"></a>dx_g <span class="ot">&lt;-</span> <span class="fu">D</span>(<span class="fu">g</span>(x) <span class="sc">~</span> x)</span>
<span id="cb110-2"><a href="optim-and-shape.html#cb110-2" aria-hidden="true" tabindex="-1"></a>dxx_g <span class="ot">&lt;-</span> <span class="fu">D</span>(<span class="fu">g</span>(x) <span class="sc">~</span> x <span class="sc">+</span> x)</span>
<span id="cb110-3"><a href="optim-and-shape.html#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dx_g</span>(x0)</span></code></pre></div>
<pre><code>## [1] -2.3493</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="optim-and-shape.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dxx_g</span>(x0)</span></code></pre></div>
<pre><code>## [1] 7.8077</code></pre>
<p>With these facts, we can construct the first- and second-order approximations:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="optim-and-shape.html#cb114-1" aria-hidden="true" tabindex="-1"></a>tilde1_g <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(<span class="sc">-</span><span class="fl">23.992</span> <span class="sc">-</span> <span class="fl">2.3493</span><span class="sc">*</span>(x<span class="sc">-</span>x0) <span class="sc">~</span> x)</span>
<span id="cb114-2"><a href="optim-and-shape.html#cb114-2" aria-hidden="true" tabindex="-1"></a>tilde2_g <span class="ot">&lt;-</span> <span class="fu">makeFun</span>(<span class="fu">tilde1_g</span>(x) <span class="sc">+</span> (<span class="fl">7.8077</span><span class="sc">/</span><span class="dv">2</span>) <span class="sc">*</span> (x<span class="sc">-</span>x0)<span class="sc">^</span><span class="dv">2</span> <span class="sc">~</span> x)</span></code></pre></div>
<p>Figure <a href="optim-and-shape.html#fig:ds-g2">16.3</a> shows <span class="math inline">\(\widetilde{g_1}(x)\)</span> and <span class="math inline">\(\widetilde{g_2}(x)\)</span>, zooming in around <span class="math inline">\(x_0 = -1\)</span>.</p>
<pre><code>## Warning: geom_vline(): Ignoring `mapping` because `xintercept` was provided.

## Warning: geom_vline(): Ignoring `mapping` because `xintercept` was provided.</code></pre>
<div class="figure"><span id="fig:ds-g2"></span>
<img src="CalcZ-notes_files/figure-html/ds-g2-1.png" alt="The first-order (green) and second-order (red) approximations to $g(x)$ near $x_0=-1$." width="672" />
<p class="caption">
Figure 16.3: The first-order (green) and second-order (red) approximations to <span class="math inline">\(g(x)\)</span> near <span class="math inline">\(x_0=-1\)</span>.
</p>
</div>
<p>You can see that <span class="math inline">\(\widetilde{g_2}(x)\)</span> is a good approximation to <span class="math inline">\(g(x)\)</span>. In particular, the argmin of <span class="math inline">\(\widetilde{g_2}(x)\)</span> is close to the that of <span class="math inline">\(g(x)\)</span>.</p>
<p>In a previous example, we showed that the argmin of the parabolic function <span class="math inline">\(a_0 + a_1 x + a_2 x^2\)</span> is <span class="math inline">\(x^\star = -\frac{a_1}{2 a_2}\)</span>. Using that formula, the argmin of <span class="math inline">\(\widetilde{g_2}(x)\)</span> is -2.3493/(7.8077/2) = -0.602.</p>
</div>
</div>
<div id="solving-computationally" class="section level2" number="16.5">
<h2><span class="header-section-number">16.5</span> Solving computationally</h2>
<div class="todo">
<p>How to find the zeros of the derivative of a function and how to evaluate the second derivative at those zeros to find out what kind of critical point it is.</p>
</div>
<div class="todo">
<p>The cubic bifurcation. Start with a cubic with an argmax followed by an argmin. Then move the parameter to see the two critical points coalesce into a single point then disappear.</p>
<p>Or, maybe, “the problem with polynomials.” Linear function always has 1 root and no critical points. Quadratic function always has one critical point (and subject to a constant may have two roots generically). But a cubic might have 1 or 3 solutions and the behavior depends on the constant. It might have one or three critical points.</p>
</div>
<div class="takenote">
<p>In the previous discussion, we used phrases such as “every function has a derivative,” or that “any function can be approximated” by a second-order polynomial. For most practical purposes, this is true. In the next chapter, however, we’ll set mathematical conditions on “every” and “any” that will let us see when there can be an exception.</p>
</div>
<div class="todo">
<p>Move this earthquake example to a point where you can do parametric plots.</p>
</div>
</div>
<div id="use-case-risk-of-earthquakes" class="section level2" number="16.6">
<h2><span class="header-section-number">16.6</span> Use case: Risk of earthquakes</h2>
<p>For software designers, a <strong><em>use case</em></strong> is a description of how a person will use the software to accomplish a particular goal. It’s fair to wonder what are the use cases of differentiation. It’s early days in your study of calculus, so some of the use cases are beyond your reach. But knowing about first and second derivatives, argmaxes and maximums, curvature, and linear and quadratic approximations gives you access to one of the most important general patterns in scientific work: the measurement of <strong><em>precision</em></strong>.</p>
<p>As you know, precision refers to how well you know a quantity and is often expressed using the plus-or-minus notation. To illustrate, consider the earthquake risk situation in the Cascadia Subduction Zone that includes western Oregon and Washington states. The last devastating earthquake was on January 26, 1700, a date approximated by local oral tradition and derived from written tsunami records across the Pacific Ocean in Japan.</p>
<p>Geologic features allow approximate dating of previous large earthquakes in the region, specifically one about 700 years previous to the latest and on about 2000 years before that.
<!-- https://agupubs.onlinelibrary.wiley.com/doi/epdf/10.1029/97RG00222 section 6.3 --></p>
<p>Your task as a modeler is to estimate the probability of another high-magnitude earthquake occuring in the next 100 years.</p>
<p>A standard model for the time interval between consecutive earthquakes is <span class="math inline">\(p(y) \equiv k e^{-ky}\)</span>, where <span class="math inline">\(p(t)\)</span> is the probability of an earthquake happening exactly <span class="math inline">\(y\)</span> years after the last. We can use data on previous earthquakes to find an approximate value for <span class="math inline">\(k\)</span>. Once we know <span class="math inline">\(k\)</span>, we can calculate the probability that the next earthquake will occur between 2025 and 2125 as <span class="math inline">\(e^{-325 k} - e^{-425 k}\)</span> where 325 is the time interval from 1700 to 2025 and 426 is the interval between 1700 and 2125. (You’ll see where the formula comes from in Block 3.)</p>
<p>We have information on two complete earthquake cycles, one lasting 2000 years and the other 700. A standard way to estimate the parameter <span class="math inline">\(k\)</span> is called “maximum likelihood.” This amounts to assuming a value for <span class="math inline">\(k\)</span> and then, with that value, calculating the likelihood of having seen inter-quake intervals of 2000 and of 700 years. This likelihood is
<span class="math display">\[p(2000) \times p(700) = k^2 e^{-k (2000 + 700)}\]</span> A graph of the likelihood as a function of <span class="math inline">\(k\)</span>, using a log vertical scale gives:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="optim-and-shape.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">slice_plot</span>(<span class="fu">log</span>(k<span class="sc">^</span><span class="dv">2</span> <span class="sc">*</span> <span class="fu">exp</span>(<span class="sc">-</span>k<span class="sc">*</span><span class="dv">2700</span>)) <span class="sc">~</span> k, <span class="fu">domain</span>(<span class="at">k=</span><span class="fu">c</span>(<span class="fl">0.0001</span>, <span class="fl">0.003</span>)), <span class="at">npts=</span><span class="dv">500</span>)</span></code></pre></div>
<p><img src="CalcZ-notes_files/figure-html/unnamed-chunk-112-1.png" width="672" />
Making a parametric plot</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="optim-and-shape.html#cb117-1" aria-hidden="true" tabindex="-1"></a>Quakes <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb117-2"><a href="optim-and-shape.html#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">k =</span> <span class="fu">seq</span>(<span class="fl">0.0001</span>, <span class="fl">0.0025</span>, <span class="at">length=</span><span class="dv">1000</span>),</span>
<span id="cb117-3"><a href="optim-and-shape.html#cb117-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">LL =</span> <span class="fu">log</span>(k<span class="sc">^</span><span class="dv">2</span> <span class="sc">*</span> <span class="fu">exp</span>(<span class="sc">-</span>k<span class="sc">*</span><span class="dv">2700</span>)),</span>
<span id="cb117-4"><a href="optim-and-shape.html#cb117-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">prob =</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="dv">325</span><span class="sc">*</span>k) <span class="sc">-</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="dv">425</span><span class="sc">*</span>k)         </span>
<span id="cb117-5"><a href="optim-and-shape.html#cb117-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb117-6"><a href="optim-and-shape.html#cb117-6" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_point</span>(LL <span class="sc">~</span> k, <span class="at">data=</span>Quakes)</span></code></pre></div>
<p><img src="CalcZ-notes_files/figure-html/unnamed-chunk-113-1.png" width="672" /></p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="optim-and-shape.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_point</span>(LL <span class="sc">~</span> prob, <span class="at">data =</span> Quakes)</span></code></pre></div>
<p><img src="CalcZ-notes_files/figure-html/unnamed-chunk-113-2.png" width="672" /></p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="optim-and-shape.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_point</span>(prob <span class="sc">~</span> k, <span class="at">data =</span> Quakes)</span></code></pre></div>
<p><img src="CalcZ-notes_files/figure-html/unnamed-chunk-113-3.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="h-and-derivatives.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="cont-and-smooth.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/dtkaplan/CalcZ-notes/edit/main/Diff-shape.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
