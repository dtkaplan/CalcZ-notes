<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 9 Assembling functions | CalcZ Student Notes</title>
<meta name="author" content="Daniel Kaplan">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.4/tabs.js"></script><script src="libs/bs3compat-0.2.4/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.12/datatables.js"></script><link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script><link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="libs/plotly-binding-4.9.3/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script><script type="text/x-mathjax-config">
  const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
  for (let popover of popovers){
    const div = document.createElement('div');
    div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
    div.innerHTML = popover.getAttribute('data-content');
    
    // Will this work with TeX on its own line?
    var has_math = div.querySelector("span.math");
    if (has_math) {
      document.body.appendChild(div);
    	MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    	MathJax.Hub.Queue(function(){
        popover.setAttribute('data-content', div.innerHTML);
    	})
    }
  }
  </script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="css/CalcZ-style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">CalcZ Student Notes</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome to calculus</a></li>
<li><a class="" href="calcz-project-development-plan.html">CalcZ Project Development Plan</a></li>
<li class="book-part">Block 1: Functions and quantity</li>
<li><a class="" href="outline-of-block-1.html">Outline of Block 1</a></li>
<li><a class="" href="change.html"><span class="header-section-number">1</span> Change</a></li>
<li><a class="" href="structure-of-a-function.html"><span class="header-section-number">2</span> Structure of a function</a></li>
<li><a class="" href="fun-describing.html"><span class="header-section-number">3</span> Describing functions</a></li>
<li><a class="" href="fun-notation.html"><span class="header-section-number">4</span> Notation for functions</a></li>
<li><a class="" href="graphs-and-graphics.html"><span class="header-section-number">5</span> Graphics &amp; function graphs</a></li>
<li><a class="" href="params-intro.html"><span class="header-section-number">6</span> Parameters for functions</a></li>
<li><a class="" href="process-of-modeling.html"><span class="header-section-number">7</span> Process of modeling</a></li>
<li><a class="" href="fun-slopes.html"><span class="header-section-number">8</span> Slope function</a></li>
<li><a class="active" href="fun-assembling.html"><span class="header-section-number">9</span> Assembling functions</a></li>
<li><a class="" href="fun-multiple-inputs.html"><span class="header-section-number">10</span> Functions with multiple inputs</a></li>
<li><a class="" href="fun-piecewise.html"><span class="header-section-number">11</span> Piecewise functions</a></li>
<li><a class="" href="magnitudes.html"><span class="header-section-number">12</span> Magnitudes</a></li>
<li><a class="" href="dimensions.html"><span class="header-section-number">13</span> Dimensions</a></li>
<li class="book-part">Block 2: Differentiation</li>
<li><a class="" href="outline-of-block-2.html">Outline of Block 2</a></li>
<li><a class="" href="change-relationships.html"><span class="header-section-number">14</span> Change relationships</a></li>
<li><a class="" href="h-and-derivatives.html"><span class="header-section-number">15</span> h and derivatives</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/dtkaplan/CalcZ-notes">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="fun-assembling" class="section level1">
<h1>
<span class="header-section-number">9</span> Assembling functions<a class="anchor" aria-label="anchor" href="#fun-assembling"><i class="fas fa-link"></i></a>
</h1>
<p>When we need a new function for some purpose, we practically always build it out of existing functions. For instance, a parameterized function like <span class="math display">\[A \sin\left(\frac{2 \pi}{P}x\right) + C\]</span> is built by assempling together a straight-line input scaling, a naked <span class="math inline">\(\sin()\)</span> function, and another straight-line function for scaling the output from <span class="math inline">\(\sin()\)</span>.</p>
<p>In this chapter, we’ll introduce three general frameworks for combining functions: linear combination, composition, and multiplication.</p>
<div id="linear-combination" class="section level2">
<h2>
<span class="header-section-number">9.1</span> Linear combination<a class="anchor" aria-label="anchor" href="#linear-combination"><i class="fas fa-link"></i></a>
</h2>
<p>One of the most widely used sorts of combination is called a <strong><em>linear combination</em></strong>. The mathematics of linear combination is, it happens, at the core of the use of math in applications, whether that be constructing a Google-like search engine or analyzing medical data to see if a treatment has a positive effect.</p>
<p>You’ve worked for many years with one kind of linear combination: polynomials. No doubt you’ve seen functions<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;It’s likely that you saw polynomials as things to be factored, rather than as functions taking an input and producing an output. So they were written as &lt;em&gt;equations&lt;/em&gt;: &lt;span class="math inline"&gt;\(e x^2 + 5x - 2 = 0\)&lt;/span&gt;&lt;/p&gt;'><sup>12</sup></a> like <span class="math display">\[f(x) \equiv 3 x^2 + 5 x - 2\]</span></p>
<p>There are three modeling functions in this polynomial. In this case, as in polynomials generally, they are all power-law functions: <span class="math inline">\(g_0(x) \equiv 1\)</span>, <span class="math inline">\(g_1(x) \equiv x\)</span>, and <span class="math inline">\(g_2(x) \equiv x^2\)</span>. With these functions defined, we can write the polynomial <span class="math inline">\(f(x)\)</span> as <span class="math display">\[f(x) \equiv 3 g_2(x) + 5 g_1(x) - 2 g_0(x)\]</span>
Each of the functions is being scaled by a quantity—3, 5, and -2 in this example—and the scaled functions are added up. That’s a linear combination; scale and add. (Later, we’ll see that the <strong><em>scalars</em></strong> generally come with units. So we might well have a metric polynomial and an equivalent traditional-unit polynomial. Just wait.)</p>
<div class="why">
<p>Notice that we said <span class="math inline">\(g_0(x) \equiv 1\)</span> is a power-law function. Why? Since <span class="math inline">\(x^0=1\)</span> for all <span class="math inline">\(x\)</span>, we might equally well have written <span class="math inline">\(g_0(x) \equiv x^0\)</span> which is visibly a power-law function.</p>
<p>We’re just trying to emphasize that a polynomial is a linear combination of power-law functions, in particular those power-law functions with whole-number, positive exponents. The individual functions, say, <span class="math inline">\(x^2\)</span> or <span class="math inline">\(x^5\)</span> are called <strong><em>monomials</em></strong>. A polynomial is a combination of monomials, just like a chemical polymer is a combination of monomers.</p>
</div>
<p>There are other places where you have seen linear combinations:</p>
<ul>
<li>The parameterized <strong><em>sinusoid</em></strong> <span class="math display">\[A \sin\left(\frac{2 \pi}{P}t\right) + C\]</span> is a linear combination of the functions <span class="math inline">\(h_1(t) \equiv \sin\left(\frac{2 \pi}{P} t\right)\)</span> and <span class="math inline">\(g_0(t) \equiv 1\)</span>. The scalars are <span class="math inline">\(A\)</span> and <span class="math inline">\(C\)</span>.</li>
<li>The parameterized <strong><em>exponential</em></strong> <span class="math display">\[A e^{kt} + C\]</span> The functions being combined are <span class="math inline">\(e^{kt}\)</span> and <span class="math inline">\(g_0(t) \equiv 1\)</span>. The scalars are, again, <span class="math inline">\(A\)</span> and <span class="math inline">\(C\)</span>.</li>
<li>The straight line function <span class="math inline">\(a x + b\)</span>. The functions being combined are <span class="math inline">\(x\)</span> and <span class="math inline">\(1\)</span>, the scalars are <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span>.</li>
</ul>
<p>Note that neither the parameterized exponential or the parameterized sinusoid is a polynomial.</p>
<p>There are a few reasons for us to be introducing linear combinations here.</p>
<ol style="list-style-type: decimal">
<li>You will see linear combinations everywhere once you know to look for them.</li>
<li>There is a highly refined mathematical theory of linear combinations that gives us powerful ways to think about them as well as computer software that can quickly find the best scalars to use to match input-output data.</li>
<li>The concept of linear combination generalizes the simple idea that we have been calling “scaling the output.” From now on, we’ll use the linear-combination terminology and avoid the narrower idea of “scaling the output.”</li>
<li>Many physical systems are described by linear combinations. For instance, the motion of a vibrating molecule or a helicopter in flight or a building shaken by an earthquake are described in terms of simple “modes” which are linearly combined to make up the entire motion. More down to Earth, the timbre of a musical instrument is set by the scalars in a linear combination of pure tones.</li>
<li>Many modeling tasks can be put into the framework of choosing an appropriate set of simple functions to combine and then (letting the computer) figure out the best scalars to use in the combination.</li>
</ol>
<p>Even better, there is an automatic, reliable, and fast algorithm for finding the scalars for a set of functions that are to be combined to match data as closely as possible. So the modeler just has to select the functions to be used, the computer can find the coefficients. (We’ll explore the mathematics and methods of linear combinations, usually called <strong><em>linear algebra</em></strong>, in Block 5.)</p>
<div class="todo">
<p>Example: The tides as a linear combination of sinusoids.</p>
</div>
<div class="todo">
<p>Example: Models of inequality</p>
<p>Lorenz curve: Connects (0,0) and (1,1) and is never concave down.</p>
<ul>
<li>Any power-law with an exponent of 1 or greater.</li>
<li>Any linear combination of such power-laws with the scalars adding to 1.</li>
<li>Product of two Lorenz curves is a Lorenz curve.</li>
</ul>
<p><span class="math inline">\((1 - (1-p)^\alpha)\)</span></p>
<p><span class="math inline">\(p^\beta\left(1 - (1-p)^\alpha\right)\)</span></p>
</div>
</div>
<div id="function-composition" class="section level2">
<h2>
<span class="header-section-number">9.2</span> Function composition<a class="anchor" aria-label="anchor" href="#function-composition"><i class="fas fa-link"></i></a>
</h2>
<p>To <strong><em>compose</em></strong> two functions, <span class="math inline">\(f(x)\)</span> and <span class="math inline">\(g(x)\)</span>, means to apply one of the functions to the output of the other. “<span class="math inline">\(f()\)</span> composed with <span class="math inline">\(g()\)</span>” means <span class="math inline">\(f(g(x))\)</span>. This is generally very different from “<span class="math inline">\(g()\)</span> composed with <span class="math inline">\(f()\)</span>” which means <span class="math inline">\(g(f(x))\)</span>.</p>
<p>For instance, suppose you have recorded the outdoor temperature over the course of a day and packaged this into a function <span class="math inline">\(\mbox{AirTemp}(t)\)</span>: temperature as a function of time <span class="math inline">\(t\)</span>. Your digital thermometer uses degrees Celsius, but you want the output units to be degrees Kelvin. The conversion function is <span class="math display">\[\mbox{CtoK}(C) \equiv C + 273.15\]</span>
Notice that CtoK() takes temperature as input. With this, we can write the “Kelvin as a function of time” as <span class="math display">\[\mbox{CtoK}\left(\mbox{AirTemp}(t)\right)\]</span>
It’s important to distinguish the above time <span class="math inline">\(\rightarrow\)</span> Kelvin function from something that looks very much the same but is utterly different: <span class="math inline">\(\mbox{AirTemp}\left(\mbox{CtoK}(t)\right)\)</span>. As a matter of arithmetic, you can put time as an input to CtoK(). But it has a completely different meaning in terms of the real world. If time were measured in hours, then CtoK<span class="math inline">\((t)\)</span> would be looking at the temperature eleven and a half days ago, instead of the temperature at time <span class="math inline">\(t\)</span>.</p>
<div class="why">
<p>We used <span class="math inline">\(C\)</span> as the name of the input to CtoK(). Shouldn’t it be something like <span class="math inline">\(x\)</span> or <span class="math inline">\(y\)</span>?</p>
<p>Keep in mind that the names of the inputs to a function can be anything whatsoever, so long as they are used consistently in the function algorithm. If we wanted, we could call the first input to any function <span class="math inline">\(x\)</span>, or for that matter <span class="math inline">\(y\)</span> or giraffe.</p>
<p>The point of the notation <span class="math inline">\(\mbox{CtoK}(C) \equiv C + 273.15\)</span> is to make it utterly clear that <span class="math inline">\(C\)</span> is the name we’re using for the input by listing it in the parentheses that follow the function name CtoK(). This, unlike high-school notation, allows us great freedom in the choice of names.</p>
<p>We can use that freedom to make it easier to communicate with other people. (And remember, one of those other people is “future you.”) We used the name <span class="math inline">\(C\)</span> to reinforce the message that CtoK() converts <em>celsius</em> to <em>kelvin</em>, and not vice versa.</p>
</div>
<p>Here is a simple, approximate formula for the length of day (in hours) as a function of latitude <span class="math inline">\(L\)</span> and the declination angle <span class="math inline">\(\delta\)</span> of the sun.</p>
<p><span class="math display">\[\text{day_length}(L, \delta) \equiv \frac{2}{15} \arccos\left(-\tan(L)*\tan(δ)\right)\]</span>
The declination angle is the latitude of the point on the earth’s surface pierced by an imagined line connecting the centers of the earth and the sun. On the summer solstice, it is <span class="math inline">\(23.44^\circ\)</span>, the longest day of the year.</p>
<p>A computer implement must look different, since <span class="math inline">\(L\)</span> and <span class="math inline">\(\delta\)</span> are typically provided in degrees while the <code><a href="https://rdrr.io/r/base/Trig.html">tan()</a></code> and other trigonometric functions in most computer languages expect units of radians. The conversion is easy: <span class="math inline">\(\text{deg2rad}(d) \equiv \frac{\pi}{180} d\)</span>. The conversion the other way is <span class="math inline">\(\text{rad2deg}(r) \equiv \frac{180}{\pi} r\)</span>.</p>
<p>In order to get the day-length formula to work in a computer, we have to compose the <span class="math inline">\(\tan()\)</span> function with <code>deg2rad()</code>. The output of <code><a href="https://rdrr.io/r/base/Trig.html">acos()</a></code> is in radians, so we have to convert it back to degrees. Like this:</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">day_length</span> <span class="op">&lt;-</span> <span class="fu">makeFun</span><span class="op">(</span>
  <span class="op">(</span><span class="fl">2</span><span class="op">/</span><span class="fl">15</span><span class="op">)</span><span class="op">*</span><span class="fu">rad2deg</span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/r/base/Trig.html">acos</a></span><span class="op">(</span>
      <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Trig.html">tan</a></span><span class="op">(</span><span class="fu">deg2rad</span><span class="op">(</span><span class="va">L</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/Trig.html">tan</a></span><span class="op">(</span><span class="fu">deg2rad</span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">)</span>
    <span class="op">)</span>
  <span class="op">)</span> <span class="op">~</span> <span class="va">L</span><span class="op">+</span><span class="va">d</span><span class="op">)</span></code></pre></div>
<div class="etude-question">
<p><strong>Q-11</strong>: Using an R sandbox, calculate the length of the day at latitude <span class="math inline">\(39^\deg\)</span> on the longest day of the year, which is when the declination of the sun is <span class="math inline">\(23.44^\circ\)</span>. How long is it?</p>
<ol>
<li><p>13.9 hours []</p></li>
<li><p>14.7 hours (+) []</p></li>
<li><p>14.9 hours []</p></li>
<li><p>15.1 hours []</p></li>
</ol>
</div>
<p>Now to make a plot of day length as a function of day of the year. Of course, <code>day_length(L, d)</code> does not take day of the year into account. What’s missing is to know the declination of the sun as a function of calendar day.</p>
<p>We’ll represent calendar day as a number <span class="math inline">\(n\)</span> that runs from 0 at the start of January 1st to 365 at the end of December 31. Given this convention, the declination of the sun is</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">delta_sun</span> <span class="op">&lt;-</span> <span class="fu">makeFun</span><span class="op">(</span><span class="op">-</span><span class="fl">23.44</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/Trig.html">cos</a></span><span class="op">(</span><span class="op">(</span><span class="fl">2</span><span class="op">*</span><span class="va">pi</span><span class="op">/</span><span class="fl">365</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="va">n</span><span class="op">+</span><span class="fl">10</span><span class="op">)</span> <span class="op">)</span> <span class="op">~</span> <span class="va">n</span><span class="op">)</span></code></pre></div>
<p>Composing <code>day_length()</code> with <code>delta_sun()</code> (on the <code>d</code> argument only) we get a function of day of year <code>n</code>:</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">slice_plot</span><span class="op">(</span>
  <span class="fu">day_length</span><span class="op">(</span><span class="fl">39</span>, <span class="fu">delta_sun</span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">~</span> <span class="va">n</span>, 
  <span class="fu">domain</span><span class="op">(</span>n<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">365</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="CalcZ-notes_files/figure-html/unnamed-chunk-63-1.png" width="672"></div>
<div class="etude-question">
<p><strong>Q-12</strong>: How long is the day on April Fools (<span class="math inline">\(n=90\)</span>) at Latitude 39N? (Use a sandbox for the calculation.)</p>
<ol>
<li><p>12.38 hours (+) []</p></li>
<li><p>12.59 hours []</p></li>
<li><p>12.64 hours []</p></li>
<li><p>12.74 hours []</p></li>
</ol>
</div>
</div>
<div id="modeling-polynomial-1" class="section level2">
<h2>
<span class="header-section-number">9.3</span> The modeling polynomial<a class="anchor" aria-label="anchor" href="#modeling-polynomial-1"><i class="fas fa-link"></i></a>
</h2>
<p>Sometimes, in order to model some simple relationship you need to build a function whose graph has a simple, curving shape.</p>
<p>A simple but surprisingly powerful approach is to use a <strong><em>low-order polynomial</em></strong>. The <strong><em>order of a polynomial</em></strong> is the highest exponent on the input. For example, a straight-line function, <span class="math inline">\(g_1(x) \equiv a_0 + a_1 x\)</span>, is a <strong>first-order</strong> polynomial. A <strong><em>quadratic</em></strong>, <span class="math inline">\(g_2(x) \equiv b_0 + b_1 x + b_2 x^2\)</span> is a <strong>second-order</strong> polynomial.</p>
<p>Many modelers are tempted to extend the technique to third-, fourth-, fifth-order and even higher. This is only rarely worthwhile since all second-, fourth-, sixth- and higher-even-order <strong><em>monomials</em></strong> have basically the same U-shape, like a referee signalling a touch-down. Similarly, first-, third-, fifth- and higher odd-order monomial have similar <img src="www/cubic.png"> shapes.</p>
<p>An ofttimes better approach is to compose the polynomial with a curved but monotonic function, such as a logarithm.</p>
<div class="why">
<p>Explain why we are now using subscripts for the names of scalars.</p>
</div>
</div>
<div id="tukeys-ladder-optional" class="section level2">
<h2>
<span class="header-section-number">9.4</span> Tukey’s ladder (optional)<a class="anchor" aria-label="anchor" href="#tukeys-ladder-optional"><i class="fas fa-link"></i></a>
</h2>
<div class="todo">
<p>[[Tukey’s ladder]] Using a simple straight line with input composition and/or output composition. You can get a variety of curve shapes using only a linear function.</p>
</div>
<div class="todo">
<p>As exercises?</p>
<p>Log transformation of used car prices</p>
<p>[[Perceived brightness or loudness]] is a log scale.</p>
</div>
</div>
<div id="function-multiplication" class="section level2">
<h2>
<span class="header-section-number">9.5</span> Function multiplication<a class="anchor" aria-label="anchor" href="#function-multiplication"><i class="fas fa-link"></i></a>
</h2>
<p>The third in our repertoire of methods for making new function out of old is plain old multiplication. With two functions <span class="math inline">\(f(x)\)</span> and <span class="math inline">\(g(x)\)</span>, the product is simply <span class="math inline">\(f(x)g(x)\)</span>.</p>
<p>It’s essential to distinguish between function multiplication and function composition:</p>
<p><span class="math display">\[\underbrace{f(x) g(x)}_\mbox{multiplication}\ \ \ \ \underbrace{f(g(x)) \ \ \mbox{or}\ \ \ g(f(x))}_\mbox{composition}\]</span></p>
<p>In function composition, only one of the functions—the <strong><em>interior function</em></strong> is applied to the overall input, <span class="math inline">\(x\)</span> in the above example. The other function gets its input from the output of its partner.</p>
<p>In multiplication, each of the functions is applied to the input individually. Then their outputs are multiplied to produce the overall output.</p>
<p>In function composition, the order of the functions matters: <span class="math inline">\(f(g(x))\)</span> and <span class="math inline">\(g(f(x))\)</span> are in general completely different functions.</p>
<p>In function multiplication, the order doesn’t matter because multiplication is <strong><em>commutative</em></strong>, that is, if <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span> are each quantities, <span class="math inline">\(a \times b = b \times a\)</span>.</p>
<p><strong><em>Transient vibration</em></strong></p>
<p>A guitar string is plucked to produce a note. The note is, of course, vibrations of the air created by vibrations of the string.</p>
<p>After plucking, the note fades away. An important model of this is a sinusoid (of the correct period to correspond to the frequency of the note) times an exponential.</p>
<p>Function multiplication is used so often in modeling that you’ll see it in many modeling situations. Here’s one example that is important in physics and communication: the <strong><em>wave packet.</em></strong> Overall, the wave packet is a localized oscillation as in Figure @ref{fig:wave-packet}.</p>
<div class="figure">
<span id="fig:wave-packet"></span>
<img src="CalcZ-notes_files/figure-html/wave-packet-1.png" alt="A *wave packet* constructed by multiplying a sinusoid by a hump function." width="672"><p class="caption">
Figure 9.1: A <em>wave packet</em> constructed by multiplying a sinusoid by a hump function.
</p>
</div>
<p>This is the product of two simple functions: a hump times a sinusoid.</p>
<div class="figure">
<span id="fig:making-wave-packet"></span>
<img src="CalcZ-notes_files/figure-html/making-wave-packet-1.png" alt="The two components of the wave packet in Figure \@ref(fig:wave-packet)" width="50%"><img src="CalcZ-notes_files/figure-html/making-wave-packet-2.png" alt="The two components of the wave packet in Figure \@ref(fig:wave-packet)" width="50%"><p class="caption">
Figure 9.2: The two components of the wave packet in Figure <a href="fun-assembling.html#fig:wave-packet">9.1</a>
</p>
</div>
<p>EXERCISES: Say which two kinds of functions are being multiplied here.</p>
<div class="inline-figure">
<img src="CalcZ-notes_files/figure-html/unnamed-chunk-64-1.png" width="672">
::: {.etude-question}</div>
<p><strong>Q-13</strong>: What are the two basic modeling functions being multiplied?</p>
<ol>
<li><p>A sinusoid and another sinusoid with a faster period. (+) []</p></li>
<li><p>A hump and a sinusoid. []</p></li>
<li><p>A sigmoidal function and a sinusoid. []</p></li>
<li><p>[]</p></li>
</ol>
<p>:::</p>
<div class="etude-question">
<p><strong>Q-14</strong>: What is the period of the envelope?</p>
<ol>
<li><p>10 [It’s true that the broad peaks in the overall function occur every 10 time units. But a sine wave has two excursions from zero every cycle, one positive and one negative. So if the period of the envelope were 10, we would see an amplitude of the faster sinusoid near zero every 5 time units.]</p></li>
<li><p>20 (+) []</p></li>
<li><p>30 [If this were so, the dips in amplitude of the faster sign would occur every 15 time units.]</p></li>
</ol>
</div>
<p>Other examples along the same lines.</p>
<p>EXERCISE: Provide a sigmoid and a series of humps. Ask the student to sketch out the product.</p>
</div>
<div id="all-together-now" class="section level2">
<h2>
<span class="header-section-number">9.6</span> All together now!<a class="anchor" aria-label="anchor" href="#all-together-now"><i class="fas fa-link"></i></a>
</h2>
<p>Two or all three of the techniques for combining functions—linear combinations, function composition, and function multiplication—can be used in the same function.</p>
<p>Consider the function for the length of the day
<span class="math display">\[\text{day_length}(L, \delta) \equiv \frac{2}{15} \arccos\left(-\tan(L)*\tan(δ)\right)\]</span>
The 2/15 is scaling the output of <span class="math inline">\(\arccos()\)</span>: scaling is in linear combination.</p>
<p>The <span class="math inline">\(\arcos()\)</span> is being composed with an interior function that is itself a scaled product of two functions.</p>
<p>EXERCISE: The algebra of composition of the hump function <span class="math inline">\(e^{-x^2}\)</span>.</p>
<!--
Air pressure vs time for a car driving up a mountain.

[[Solar declinsion as function of time of year.]] Then turn this into day-length. See <https://physics.stackexchange.com/questions/28563/hours-of-light-per-day-based-on-latitude-longitude-formula>

Sun's declination angle
$$\delta = \Phi \cos\left(C (d-d_r)/dy\right)$$ where $\Phi =23.44^\circ$, $C=360^\circ$, $d_r$ is Julian day for summer solstice in northern hemisphere: June 21 which is day 172, $d_y$ is the number of days per year: 365.25.


```r
solar_dec <- makeFun(23.44*cos(2*pi*(d - 172)/365.25) ~ d)
slice_plot(solar_dec(d)~ d, domain(d=c(0,1000)))
```

<img src="CalcZ-notes_files/figure-html/unnamed-chunk-65-1.png" width="672" />
Hour angle of sunrise

```r
ha <- makeFun(acos( 
  #cos(90.833*pi/180)/(cos(L)*cos(d))
                - tan(L)*tan(d)) ~ L + d)
ha(pi/4, 23*pi/180)
```

```
## [1] 2.009178
```

```r
slice_plot((180/pi)*ha(pi/4, ang) ~ ang, domain(ang=pi*c(-23, 23)/180))
```

<img src="CalcZ-notes_files/figure-html/unnamed-chunk-66-1.png" width="672" />

```r
# Length of day at latitude L, Julian day d
dlen <- makeFun(2*(180/pi)*ha(L, (pi/180)*solar_dec(d))/15 ~ L + d)
slice_plot(dlen(66.5*pi/180, d) ~ d, domain(d=c(0,365)), npts=5000) %>%
  gf_hline(yintercept=c(0, 24), color="blue") %>%
  gf_lims(y=c(0,24))
```

```
## Warning: geom_hline(): Ignoring `mapping` because `yintercept` was provided.
```

<img src="CalcZ-notes_files/figure-html/unnamed-chunk-66-2.png" width="672" />

Length of day: $2 \text{ha}(L, d)/15$
Composition example: write ha() to accept degrees rather than radians


ha = arccos (cos(90.833) /(cos(L)*cos(δ)) - tan(L)*tan(δ))

[[Instantaneous power of AC voltage]] Power = I^2 R = V^2/R
V will be a sinusoid


Log transformation of prices (log income rises steadily, so compose exp with a straight-line function.

Log-log and semi-log plots are an example of composing a log with a function to get a simpler function.




[[For integration chapter]] Wind energy potential: not the cube of the average wind velocity, but the average of the cube of wind velocity.



## (from original draft) Combining and composing functions


::: {.objectives}
#. **[Fun-4-c-1]** *Use linear combination and direct multiplication of functions of one variable to produce functions of multiple variables*
#. **[Fun-4-c-2]** *Recognize that composition of functions does not itself create a function of multiple variables.*
:::

Linear combination and composition of functions are often used hand-in-hand to construct models. For instance, our model of the data from cooling water was a linear combination of a constant function and a sinusoidal function $$\mbox{temperature}(t) \equiv 25.9 + 60.7\, e^{-0.019 t}$$
Similarly, our model from the Providence tide data was 
$$\mbox{tide}(t) \equiv 1.02 + 0.50 \sin(2\pi (t - 15.4)/12.56)$$
In both cases, the sine part of the combination is a mathematical ($\exp(x)$ or $\sin(x)$) function composed with a linear interior function: $-0.019 t$ for the cooling water, and $2\pi (t - 15.4)/12.56$ for the tides.

Each of these models was a function of one input. (Coincidentally, the input in both cases was "time", measured in minutes in the cooling-water example and hours in the tide example.)

-->
<!--
::: {.todo}
**The modeling cycle**?????????

Redo the length of day with the correction for diffraction and the angle subtended by the sun.
:::
-->

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="fun-slopes.html"><span class="header-section-number">8</span> Slope function</a></div>
<div class="next"><a href="fun-multiple-inputs.html"><span class="header-section-number">10</span> Functions with multiple inputs</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#fun-assembling"><span class="header-section-number">9</span> Assembling functions</a></li>
<li><a class="nav-link" href="#linear-combination"><span class="header-section-number">9.1</span> Linear combination</a></li>
<li><a class="nav-link" href="#function-composition"><span class="header-section-number">9.2</span> Function composition</a></li>
<li><a class="nav-link" href="#modeling-polynomial-1"><span class="header-section-number">9.3</span> The modeling polynomial</a></li>
<li><a class="nav-link" href="#tukeys-ladder-optional"><span class="header-section-number">9.4</span> Tukey’s ladder (optional)</a></li>
<li><a class="nav-link" href="#function-multiplication"><span class="header-section-number">9.5</span> Function multiplication</a></li>
<li><a class="nav-link" href="#all-together-now"><span class="header-section-number">9.6</span> All together now!</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/dtkaplan/CalcZ-notes/blob/master/Fun-assembling.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/dtkaplan/CalcZ-notes/edit/master/Fun-assembling.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>CalcZ Student Notes</strong>" was written by Daniel Kaplan. It was last built on 2021-06-04.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
