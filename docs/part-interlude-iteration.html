<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Chapter 21 (PART) Interlude: Iteration | CalcZ Student Notes</title>

    <meta name="author" content="Daniel Kaplan" />
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link href="libs/bootstrap-4.5.3/bootstrap.min.css" rel="stylesheet" />
  <script src="libs/bootstrap-4.5.3/bootstrap.bundle.min.js"></script>
  <script src="libs/bs3compat-0.2.4/tabs.js"></script>
  <script src="libs/bs3compat-0.2.4/bs3compat.js"></script>
  <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
  <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
  <script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
  <script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
  <link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
  <script src="libs/datatables-binding-0.12/datatables.js"></script>
  <link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
  <link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
  <script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
  <link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
  <script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
  <script src="libs/plotly-binding-4.9.3/plotly.js"></script>
  <script src="libs/typedarray-0.1/typedarray.min.js"></script>
  <link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
  <script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
    <script type="text/x-mathjax-config">
  const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
  for (let popover of popovers){
    const div = document.createElement('div');
    div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
    div.innerHTML = popover.getAttribute('data-content');
    
    // Will this work with TeX on its own line?
    var has_math = div.querySelector("span.math");
    if (has_math) {
      document.body.appendChild(div);
    	MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    	MathJax.Hub.Queue(function(){
        popover.setAttribute('data-content', div.innerHTML);
    	})
    }
  }
  </script>
    <script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script>

  <!-- CSS -->
    <link rel="stylesheet" href="css/CalcZ-style.css" />
    
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">CalcZ Student Notes</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="part-interlude-iteration" class="section level1 nonumber">
<h1><span class="header-section-number">Chapter 21</span> (PART) Interlude: Iteration</h1>
<p>Back in the days when mathematical notation was developed, calculations were done by people (who were called “computers”). Since people were involved, it was reasonable to rely on common sense guiding them to do the right thing. For instance, suppose the computers task was to calculate <span class="math inline">\(3.7^5\)</span>. A reasonable instruction to a human is “multiply 3.7 by itself five times.”</p>
<p>As it happens, that isn’t a very clear instruction. Does it mean “solve the same multiplication problem, <span class="math inline">\(3.7 \times 3.7\)</span>, five times in succession?” That’s easy, because once you’ve done it, getting 13.69 as the answer, you just repeat that answer four more times: five times in total. As you know, that’s not the way to get the right answer (which is 693.4396).</p>
<p>Writing unambiguous instructions suitable for a machine to carry out is challenging, especially when first starting out. Fortunately there is a more-or-less straightforward framework for carrying out <strong><em>iteration</em></strong>. Once you know this framework, you’ll be able to present information to the computer in the right way.</p>
<div id="initialize-state-update-state-terminate" class="section level2">
<h2><span class="header-section-number">21.1</span> Initialize state, update state, terminate</h2>
<p>A nice way to think about iteration is a process for establishing a <strong><em>state</em></strong> and updating that state over and over until you are done.</p>
<p>Consider the calculation of <span class="math inline">\(3.7^{\,5}\)</span>. Here’s a nice approach:</p>
<ol style="list-style-type: decimal">
<li>We’ll call the state <code>x</code> and initialize it to 1.</li>
<li>Define the update process to be "multiply <code>x</code> by 3.7 and make this the new state.</li>
<li>Carry out the update process 5 times.</li>
</ol>
<p>There are two, distinct styles for describing iteration to the computer: <strong><em>function composition</em></strong> versus <strong><em>looping</em></strong>. Almost everyone find looping easier to understand, but function composition makes it more obvious what the update process is.</p>
<p>Here’s the looping style in R for the <span class="math inline">\(3.7^{\,5}\)</span> problem.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="part-interlude-iteration.html#cb24-1"></a>x &lt;-<span class="st"> </span><span class="dv">1</span> <span class="co"># Initialize state</span></span>
<span id="cb24-2"><a href="part-interlude-iteration.html#cb24-2"></a><span class="cf">for</span> (n <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</span>
<span id="cb24-3"><a href="part-interlude-iteration.html#cb24-3"></a>  x &lt;-<span class="st"> </span><span class="fl">3.7</span> <span class="op">*</span><span class="st"> </span>x  <span class="co"># Update state</span></span>
<span id="cb24-4"><a href="part-interlude-iteration.html#cb24-4"></a>}</span>
<span id="cb24-5"><a href="part-interlude-iteration.html#cb24-5"></a>x </span></code></pre></div>
<pre><code>## [1] 693.4396</code></pre>
<p>The composition style is different.</p>
<ol style="list-style-type: lower-roman">
<li>You write a function that takes the present state and returns the updated state.</li>
<li>Compose that function <span class="math inline">\(n\)</span> times</li>
<li>Apply the composed function to the initial state</li>
</ol>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="part-interlude-iteration.html#cb26-1"></a>update &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="fl">3.7</span><span class="op">*</span>x</span>
<span id="cb26-2"><a href="part-interlude-iteration.html#cb26-2"></a>cfun &lt;-<span class="st"> </span><span class="kw">compose_n</span>(update, <span class="dt">n=</span><span class="dv">5</span>)</span>
<span id="cb26-3"><a href="part-interlude-iteration.html#cb26-3"></a><span class="kw">cfun</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##       x
##   &lt;dbl&gt;
## 1  693.</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="part-interlude-iteration.html#cb28-1"></a>fib &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) <span class="kw">c</span>(x<span class="op">+</span>y, x)</span>
<span id="cb28-2"><a href="part-interlude-iteration.html#cb28-2"></a>eight &lt;-<span class="st"> </span><span class="kw">compose_n</span>(fib, <span class="dt">n=</span><span class="dv">5</span>)(<span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb28-3"><a href="part-interlude-iteration.html#cb28-3"></a>goo &lt;-<span class="st"> </span><span class="kw">compose_n</span>(fib, <span class="dt">n=</span><span class="dv">3</span>, <span class="dt">accumulate=</span><span class="ot">TRUE</span>)</span>
<span id="cb28-4"><a href="part-interlude-iteration.html#cb28-4"></a><span class="kw">goo</span>(eight)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##       x     y
##   &lt;dbl&gt; &lt;dbl&gt;
## 1     8     5
## 2    13     8
## 3    21    13
## 4    34    21</code></pre>
</div>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>CalcZ Student Notes</strong>" was written by Daniel Kaplan. It was last built on 2021-05-19.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
