# (PART) Block 1: Functions and quantity {.unnumbered}

# Change

Calculus is about change, and change is about relationships. A changing climate is about the relationship between, say, global average temperature and time. It's also about changing levels of CO_2_ and methane, both their production and elimination by atmospheric and geological processes. It's about how burning oil (a change in configuration of the atoms in hydrocarbons) contributes to ocean acidification (the process of change in ocean pH). It's about a whole complex and intricate network of relationships and how change in one component provokes change in others.

This book presents calculus in terms of two simple but central concepts: ***functions*** and ***quantities***. Those words have everyday meanings which are, happily, close to the specific mathematical concepts that we will be using over and over again. Close ... but not identical. So pay careful attention to the brief descriptions that follow.

A mathematical ***quantity*** is an amount of "stuff." The real-world stuff might be mass or time or length. It equally well can be velocity or volume or momentum or corn yield per acre. We live in a world of stuff, some of which is tangible (e.g., corn, mass, force) and some of which is harder to get your hands on and your minds around (acceleration, crop yield, fuel economy). An important use of calculus is helping us conceptualize the abstract kinds of stuff as mathematical compositions of simpler stuff. For example, crop yield incorporates mass with length and time. (Later, you'll see us using the more scientific-sounding term ***dimension*** instead of "stuff.")

Most people are inclined to think about "quantity" as the same as "number." This is understandable but misguided. Quantity is about the amount of stuff and the first thing you need to know about any quantity is what the kind of stuff is. A "mile" is a kind of stuff: length. A meter is the same kind of stuff. A liter is a different kind of stuff: volume. A gallon or an acre-foot is the same kind of stuff.

"Stuff," as we mean it here, is what we measure. As you know, we measure with ***units***. Which units are appropriate depends on the kind of stuff. Meters, miles, microns are all appropriate units of length, even though the actual lengths of one unit differ markedly. (A mile is roughly a million microns.) 

Only after you know the dimension and units does the number have meaning. Saying a number is only part of specifying a quantity.

Here's the salient difference between number and quantity when it comes to calculus: All sorts of arithmetic and other mathematical operations can be performed to combine numbers: addition, multiplication, square roots, etc. When performing mathematics on quantities, only multiplication and division are universally allowed. For addition, square roots, and such, the operation makes sense only if the dimensions are suitable.

The mathematics of units and dimension are the equivalent in the technical world of common sense in our everyday world. For instance (and this may not make sense at this point), if someone tells me they are taking the square root of 10 liters, I know immediately that either they are just mistaken or that they haven't told me essential elements of the situation. It's just as if someone said, "I swam across the tennis court." You know that they either used the wrong verb---walk and run would work---or that it wasn't a tennis court, or that something important was unstated, perhaps, "During the flood, I swam across the tennis court."

The other central concept in the book is ***functions*** in their mathematical and computing sense. A function is something that takes one or more inputs and returns an output. In calculus, we'll deal mainly with functions that take one or more quantities as inputs and returns another quantity as output. But sometimes we'll work with functions that take functions as input and return a quantity as output. And there will even be functions that take a functions as inputs and return a function as an output.

You've almost certainly seen functions expressed in the general form $f(x)$. The function is $f()$, the input is $x$. Perhaps it's obvious at this point that $x$ is a quantity. $f(x)$ is the operation performed on that quantity. In computing, there is a definite, widely used, notation^[Really, a set of notations.] to identify the output of a function. Strangely, in mathematics there is not. This is a major source of confusion both to students learning calculus and professionals using computers to do the work of calculus.

It's possible to present calculus without functions. For instance, Isaac Newton, the inventor of calculus, spoke of "flowing quantities."^[In Newton's language, a "flowing quantity" was a *fluent* and the change in a flowing quantity was a *fluxion*.]

It's practically impossible (and generally unwise) to do computing without functions. They are a basic building block of every mainstream modern computer language. Since the operations of calculus in actual practice are performed on the computer, common sense suggests that we should describe calculus in terms of functions. That's what we will do in this book.

For you, this may take a bit of getting used to. The reason is that the notation used in high-school algebra and in almost all calculus texts is not the notation of functions. For example, almost all students have seen a mathematical ***expression*** in this form: $$y = m x + b$$
Using the language of math classes, we can say that the expression "describes a relationship between two variables." And from your experience, you know that the ***variables*** are $x$ and $y$. The other letters, $m$ and $b$, are something else. Many students will reflexively call them the "slope" and "intercept" of the "line." 

You are so used to this that you probably don't see the huge ambiguity involved. For instance, what kind of mathematical thing is being referred to in $y = m x + b$? It's an ***equation***, for sure. It's a straight line. But a straight line is not the same thing as an equation. And vice versa. So we might say, "It is an equation describing a straight line." 

If you've studied calculus before, you may have seen an equation like $y' = m$ or perhaps $dy/dx = m$ which is another way of describing a straight line.

The notation of equations is a poor substitute for the notation of functions. For instance, what is the input and what is the output? It's not explicitly stated and left to the reader to wonder. If we re-arrange $$y = m x + b \ \ \text{into}\ \ \ 0 = m x + b - y$$ using the allowed manipulations of algebra do we still have a function? If so, is it the same function as $m x + b$? Would $x$ be the input or would both $x$ and $y$ be inputs? And if $mx + b - y$ is a function, then is the output always zero?

The engineers and mathematicians who invented computer languages realized over about a decade that they had to be more explicit in identifying the input, the output, and the function itself. Why? Because computers need to be given unambiguous instructions.^[Actually, it's common to give computers ambiguous instructions. The computer will carry out the instruction in the way it does, which may not be anything like what the programmer expected or intended.] Sorting this out was a difficult process even for those mathematically talented and skilled pioneers of notation, so you can be forgiven for the occasional confusion you have when dealing with notation that pre-dates computing. 

In this book we'll be explicit and consistent in the ways we denote functions so that you can always figure out what are the inputs and how they are being translated into the output. A good start in learning to read the function notation is to see the equivalent of $y=m x + b$ in that notation: $$g(x) \equiv m x + b$$ Notice that we're using $\equiv$ (with three parallel bars) rather than $=$. And we don't need any $y$. $x$ appears on both sides of $\equiv$ And there is a place to state the ***name*** of the function, in this case $g()$, so that we can refer to the function unambiguously when we are doing operations on it. 

## The naked modeling functions

Decades of experience allows us to make a short list of mathematical functions that accomplish the vast majority of ways to represent the real world as a mathematical object. Think of this list as the basic pantry from which you'll construct elaborate and sophisticated meals. Diets differ from place to place, but these components are basic to many: oil, grains and flour, vegetables, fruits, meat, fish, salt, water. Experienced cooks have access to a vast array of additional components such as herbs and spices, crustateans and shellfish, and so on, and similarly in mathematics. But we'll stick to the basics.

Our basic pantry of functions will consist of

* Exponential $e^x$
* Logarithm $\ln(x)$
* Power-law $x^p$
* Sinusoid $\sin(x)$
* Straight-line $m x + b$

We've written these here in a traditional notation so that you can easily see the connections to the math you've already studied. We've used $x$ to stand for the single input to these functions just because that's traditional. It's  better if you refer to the functions by their word name---exponential, logarithm, power-law, sinusoid, straight-line. This helps to avoid the source of common confusion. For example, the mathematical expressions $e^x$ and $x^e$ are easily confused, but they are notation for ***utterly different patterns***. You won't so easily mistake "exponential" and "power-law." 

Eventually, we will add in two more basic pantry items, the **hump** function and the **sigmoid** function. We'll wait on these because they are not seen so much in most textbooks, even though they are starring players in the uses of mathematics for real-world applications.

One important point to make here is that this is a very short list. You should memorize the names and be able easily to associate each name with the traditional notation. 

You will also use and see the computer names for these functions. The names can differ somewhat from one computer language to another, but the names in the language we will use, R, are easily recognized by programmers who use any other language.

For ease of reference, here's a table

Name | Traditional notation | R expression
-----|----------------------|---------------
Exponential | $e^x$ | `exp(x)`
Logarithm | $\ln(x)$ | `log(x)`
Power law | $x^p$ | `x^p`
Sinusoid | $\sin(x)$ | `sin(x)`
Straight-line | $m x + b$ | no such named function
Hump |   | `dnorm(x)`
Sigmoid | | `pnorm(x)`

We've left out the traditional notation for the hump and sigmoid because there isn't a standard one. Surprisingly, there is no specific name in R for the straight-line function, but it's easy to implement one when we need it.

You noticed that the section heading is "The naked modeling functions." We mean "naked" in a metaphorical sense, and chose the metaphor to make it easy to remember. Think of this list of seven functions as the celebrities of the world of calculus. Unlike human celebrities who appear and wane over the years, and marry and divorce each other frequently, these celebrities have been with us for generations and maintain intimate connections with one another that reflect the nature of mathematics rather than the fads and fancies of celebrities. (Mastering calculus is largely a matter of becoming familiar with the mathematical connections. You'll see these in due time.)

The celebrity functions appear in many mathematical settings, just as a human celebrity strives to maintain a public image. The human celebrity is a human organism and that organism is naturally naked. In public appearance, however, the celebrity always is clothed in one way or another. (OK ... Rarely some of them appear unclothed and the same is true in mathematics.) In other words, in order to interact with the world at large, the celebrities need attire. 

Similarly, the mathematical functions that appear in real-world applications---as opposed to most math textbooks---always wear clothes, which we call ***parameters***. The clothes help them deal with the units and dimension of quantities. And just as there are standard elements of clothing: shirt, skirt, trousers, ... there are standard ways of clothing the naked modeling function. (This is called the ***parameterization*** of the function, and there are often multiple ways of paremeterizing the same function.)

Once we dress the naked functions---that is, *parameterize* them---they will become the superheroes of calculus. We'll call this league of superheroes the ***basic modeling functions***.

# What is a function?

::: {.objectives data-latex=""}
```{r echo=FALSE, results="asis"}
state_objective("F-10", 
text="Objective Original: Understand the relationship between inputs and outputs for functions of one or two input variables, to include functions defined piecewise.
**Objective Revised**: Recognize that functions are a way of representing (storing) what we know and be able to use properly the basic nomenclature of functions).")
```
:::


You're used to mathematical functions being stated as ***formulas***, expressions composed of addition, multiplication, square roots, and so on. The expression $m x + b$ uses a multiplication and an addition. $\sqrt{\strut 1 - x^2}$ uses exponentiation ($x^2$), subtraction and square root.

But there's nothing in the mathematical concept of "function" that requires a formula. And computer functions in general are not based on a formula. (The word used to describe the internals of a computer function is ***algorithm***, which is a generalization of "formula" that includes many non-arithmetic operations such as looping and branching).

We will be using formulas extensively, but best if you can visualize functions generally as something that's not necessarily a formula. This section gives another perspective on how to describe and think about a function. But remember, functions ***take inputs*** and ***return the corresponding output***. Any arrangement that accomplishes this is a function, even if arithmetic is nowhere in sight.

People have many ways of organizing what they know. Often we rely on our intuitive abilities of memory, but we also have constructed frameworks to make the storage more accessible and reliable. One of these frameworks is the ***table***, generally set up as an array of rows and columns. For instance, here is a table about a range of internal combustion engines of various sizes:

```{r}
DT::datatable(Engines)
```

Each row of the table reports on one, specific engine. Each column is one attribute of the of an engine. Using such tables can be easy. For example, if asked to report how fast the engine named "Enya 60-4C" spins, you would go down to the Enya 60-4C row and over to the "RPM" column and read off the answer: 11,800 revolutions per minute (RPM).

A table like this can be said to describe as raw numbers the general relationships between various engine attributes. For instance, we might want to understand the relationship (if any) between RPM and engine mass, or relate the number and diameter (that is, "bore") and depth (that is, "stroke") of the cylinders to the power generated by the engine. Any single entry in the table doesn't tell us about such general relationships; we need to consider the rows and columns as a whole.

If you examined the relationship between engine power and cylinder number, diameter, and depth, you will find that (as a rule) the larger the number, diameter, and depth, the more powerful the engine. That's a ***qualitative*** description of the relationship. Most educated people are able to understand such a quantitative description. Even if they don't know exactly what "power" means, they have some rough conception of it. And almost everyone knows what diameter, depth, and number mean.

Often, we're interested in having a ***quantitative*** description of a relationship such as the one (number, diameter, depth) $\rightarrow$ power. Remarkably, the many of educated people are uncomfortable with the idea of using quantitative descriptions of a relationship: what sort of language the description should be written with; how to perform the calculations to use the description; how to translate between data (such as in the table) and a quantitative description; how to translate the quantitative description to address a particular question or make a decision.

This course is about constructing and using such quantitative descriptions: that is, ***mathematical modeling***. Skills for modeling are essential for work in engineering and science, and highly valued in many other fields in commerce, management, and government. Often, the work of applying such quantitative skills is called ***calculation***. The name ***calculus*** is used to describe the methods that are widely used for undertaking calculations.

***Functions*** are a fundamental way of organizing mathematical models and calculations. You have undoubtedly seen them in your previous mathematics education, but it's worth reviewing them from the basics so that we can share a vocabulary for communicating about them. 

- A function is a transformation from one or more ***inputs*** to an ***output***. 
- To keep things simple for now we'll focus on inputs and outputs that are ***numeric***, but later we'll need a more nuanced view of "numeric" that takes into account the different kinds of things that are represented by numbers, e.g. length, power, RPM.

::: {.workedexample}
***Functions as bureaucracy***

To see how functions work, imagine a long corridor with a sequence of offices, each identified by a room number. The input to the function is the room number. To ***evaluate*** the function for that input, you knock on the appropriate door and, in response, you'll receive a piece of paper with a number to take away with you. That number is the output of the function.

This will sound at first too simple to be true, but ... In a mathematical function each office gives out exactly the same number every time someone knocks on the door. Obviously, being a worker in such an office is highly tedious and requires no special skill. Every time someone knocks on the worker's door, he or she writes down the *same* number on a piece of paper and hands it to the person knocking. What that person will do with the number is of absolutely no concern to the office worker.

The utility of such functions depends on the artistry and insight of the person who creates them: the ***modeler***. An important point of this course is to teach you some of that artistry. Hopefully you will learn through that artistry to translate your insight to the creation of functions that are useful in your own work. But even if you just use functions created by others, knowing how functions are built will be helpful in using them properly.

In the sort of function just described, all the offices were along a single corridor. Such functions are said to have ***one input***, or, equivalently, to be ***functions of one variable***. To operate the function, you just need one number: the address of the office from which you'll collect the output.

Many functions have more than one input: two, three, four, ... tens, hundreds, thousands, millions, .... In this course, we'll work mainly with functions of two inputs, but the skills you develop will be applicable to functions of more than two inputs.

What does a function of two inputs look like in our office metaphor? Imagine that the office building has many parallel corridors, each with a numeric ID. To evaluate the function, you need two numeric inputs: the number of the corridor and the number of the door along that corridor. With those two numbers in hand, you locate the appropriate door, knock on it and receive the output number in return.

Three inputs? Think of a building with many floors, each floor having many parallel corridors, each corridor having many offices in sequence. Now you need three numbers to identify a particular office: floor, corridor, and door. 

Four inputs? A street with many three-input functions along it. Five inputs? A city with many parallel four-input streets. And on and on.

Applying inputs to a function in order to receive an output is only a small part of most calculations. Calculations are usually organized as ***algorithms***, which is just to say that algorithms are descriptions of a calculation. The calculation itself is ... a function! 

How does the calculation work? Think of it as a business. People come to your business with one or more inputs. You take the inputs and, following a carefully designed protocol, hand them out to your staff, perhaps duplicating some or doing some simple arithmetic with them to create a new number. Thus equipped with the relevant numbers, each member of staff goes off to evaluate a particular function with those numbers. (That is, the staff member goes to the appropriate street, building, floor, corridor, and door, returning with the number provided at that office.) The staff re-assembles at your roadside stand, you do some sorting out of the numbers they have returned with, again following a strict protocol. Perhaps you combine the new numbers with the ones you were originally given as inputs. In any event, you send your staff out with their new instructions---each person's instructions consist simply of a set of inputs which they head out to evaluate and return to you. At some point, perhaps after many such cycles, perhaps after just one, you are able to combine the numbers that you've assembled into a single result: a number that you return to the person who came to your business in the first place. 

A calculation might involve just one function evaluation, or involve a chain of them that sends workers buzzing around the city and visiting other businesses that in turn activate their own staff who add to the urban tumult.
:::

::: {.caution}
The reader familiar with floors and corridors and office doors may note that the addresses are ***discrete***. That is, office 321 has offices 320 and 322 as neighbors. Calculus is about continuous functions, so we need a way to accept, say, 321.487... as an input. There is no such office. 

A slight modification to the procedure will produce a continuous function. It works like this: for an input of 321.487... the messenger goes to both office 321 and 322 and collects their respective outputs. Let's imagine that they are -14.3 and 12.5 respectively. All that's needed is a small calculation, which in this case will look like $$-14.3 \times (1 - 0.487...)   + 12.5 \times 0.487...$$ This is called ***linear interpolation*** and lets us construct continuous functions out of discrete data. 

In Blocks 2 and 5 we'll discuss other widely used ways to do this that produce not just continuous functions but ***smooth*** functions. Understanding the difference between continuous and smooth will have to wait until we introduce a couple more calculus concepts: derivatives and limits.
:::

## Domain: input space



As you know, there is a powerful way of thinking about numbers in terms of ***space*** and ***geometry***. For instance, a single number corresponds to a point on a line: the so-called ***number line***. A pair of inputs, say, (x, y) corresponds to a point in a plane, often called the ***Cartesian coordinate plane***. Three numbers corresponds to a point in space, perhaps organized into (x, y, z) of a Cartesian space. There are higher-dimensional spaces, but usually special training is needed to become comfortable with them. If you are having this discomfort, you might prefer to work with the office metaphor. Just for fun, here's how you can think of a 10-dimensional space: 10 numbers, one telling you which planet, the next specifying the continent on that planet, and so on for country, state, city, street, building, floor, corridor, door.

The set of inputs with which the function can be evaluated is called the ***domain*** of the function. Sometimes we describe the domain as a space, e.g. the number line, the plane, and so on. Sometimes domains including more restrictions. For instance, a particular input might only meaningfully be positive, with no offices corresponding to negative values for that input. Or, an input might be restricted to be in the interval 0 to 1. Sometimes in calculus, the domain excludes an isolated point. For instance, there may be no office at the door marked 0 but the neighboring doors open into working offices.

The ***range*** of a function is the set of all the *outputs* that can be produced. Since at this stage we're working only with functions that return a single number as output, it's common to describe the range as all or part of the number line. For instance, some functions only have positive outputs. Other functions' outputs are always in the interval 0 to 1. (This is the case, for instance, when the function returns a probability as the output.)

::: {.worked-example data-latex=""}
**Weather forecasting by numerical process**

*[Weather forecasting by numerical process](https://archive.org/details/weatherpredictio00richrich/page/184/mode/2up?view=theater)* is a highly influential book, from 1922, by [Lewis Fry Richardson](https://en.wikipedia.org/wiki/Lewis_Fry_Richardson). He envisioned a calculation for a weather forecast as a kind of function. The domain for the forecast is the latitude and longitude of a point on the globe, rather than the rectilinear organization of corridor. 

One fantastic illustration of the idea shows a building constructed in the form of an inside-out globe. At each of many points on the globe, there is a business. (You can see this most clearly in the foreground, which shows several boxes of workers.)

```{r echo=FALSE, out.width="70%", fig.align="center", fig.cap="An artist's depiction of the organization of calculations for weather forecasting by Richardson's system. [Source](https://www.cabinetmagazine.org/issues/27/foer.php)"}
knitr::include_graphics(normalizePath("www/Richardson-globe.jpg"))
```

Each business might work this way: In each business there is a person who will report the current air pressure at that point on the globe, another person who reports the temperature, another reporting humidity, and so on. To compute the predicted weather for the next day, the business has a staff assigned to visit the neighboring businesses to find out the pressure, temperature, humidity, etc. Still other staffers take the collected output from the neighbors and carry out the arithmetic to translate those outputs into the forecast for tomorrow. For instance, knowing the pressure at neighboring points enables the direction of wind to be calculated, thus the humidity and temperature of air coming in to and out of the region the business handles. In today's numerical weather prediction models, the globe is divided very finely by latitude, longitude, and altitude, and software handles both the storage of present conditions and the calculation from that of the future a few minutes later. Repeating the process using the forecast enables a prediction to be made for a few minutes after that, and so on.

Some of the most important concepts in calculus relate to the process of collecting outputs from neighboring points and combining them: for instance finding the difference or the sum. To illustrate, here is the first set of equations from Richardson's *Weather forecasting ...*, writen in the notation of calculus:

```{r echo=FALSE, out.width="70%", fig.align="center"}
knitr::include_graphics(normalizePath("www/Richardson-equations.png"))
```

You can hardly be expected at this point to understand the calculations described by these equations, which involve the physics of air flow, the coriolis force, etc. but it's worth pointing out some of the notation:

- The equations are about the momentum of a column of air at a particular latitude ($\phi$) and longitude.
- $M_E$ and $M_N$ are east-west and north-south components of that momentum. 
- $\partial M_E /\partial t$ is the amount the east-west momentum will change in the next small interval of time ($\partial t$).
- $p_G$ is the air pressure at ground level from that column of air. 
- $\partial p_G / \partial n$ is about the difference between air pressure in the column of air and the columns to the north and south.

Calculus provides both the notation for describing the physics of climate and the means to translate this physics into arithmetic calculation.
:::

::: {.todo}
In the section on linear combinations, have a sidebar that explains that the so-called "straight-line" function is really just a linear combination of the more fundamental functions $\text{identity}(x) \equiv x$ (which is exactly the same thing as the power-law function $x^p$ with $p=1$) and and $\text{constant}(x) \equiv 1$ which is pretty much the same as the power-law function $x^0$. 
:::

::: {.todo}
In the limits section or an exercise, ask about $x^0$? Is that the same as 1? What about when $x=0$. Zero raised to any positive power is 0. But any positive number raised to 0 is 1. So two ways of thinking about it give different answers.

The computer handles the question with ease:

```{r}
0^0
```
But computer results don't always agree with mathematical results. 

In this case, mathematicians looking at the question through the lens of limits, agree with the computer when looking at the function $g(x) \equiv x^0$. But they disagree if the function is $h(x) \equiv 0^x$ or $f(x) \equiv x^x$.  These three functions are not the same when it comes to limits. 

Remember that $\lim_{x\rightarrow 0}$ is not about replacing $x$ with zero, it is about a process of examining the result for non-zero $x$ as $x$ approaches zero. In "zero raised to any positive power" we're talking about $0^{\lim_{x\rightarrow 0}}$, which is not the same as $\lim_{x\rightarrow 0} \left[x^x\right]$.  Similarly, $\left[\lim_{x\rightarrow 0}\right]^0$ is different from 
:::

